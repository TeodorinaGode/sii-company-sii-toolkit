import { Component, ContentChild, ContentChildren, EventEmitter, HostBinding, HostListener, Input, Output, ViewChild } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
import { PageContentToolbarComponent } from '../page-container/page-content/page-content-toolbar/page-content-toolbar.component';
import { ToolbarComponent } from '../toolbar/toolbar.component';
import { PageContentComponent } from './page-content/page-content.component';
import { PageDetailComponent } from './page-detail/page-detail.component';
import { PageFiltersComponent } from './page-filters/page-filters.component';
import { PageFooterDirective } from './page-footer/page-footer.directive';
import { PageHoverMaskComponent } from './page-hover-mask/page-hover-mask.component';
import { NgClass, AsyncPipe } from '@angular/common';
import { CdkObserveContent } from '@angular/cdk/observers';
import * as i0 from "@angular/core";
import * as i1 from "@angular/platform-browser";
export class SiiPageContainerComponent {
    get toolbarHeight() { return this.pageToolbarContainerHeightSubj.value + 'px'; }
    get pageContentToolbarsContainerHeightVal() { return this.pageContentToolbarsContainerHeightSubj.value + 'px'; }
    get fixedToolbarHeight() { return this.pageFixedToolbarContainerHeightSubj.value + 'px'; }
    get footerHeight() { return this.pageFooterContainerHeightSubj.value + 'px'; }
    get headeHeight() { return (this.showMiniHeader ? this.pageMiniHeaderContainerHeightSubj.value : this.pageHeaderContainerVisibleHeightSubj.value) + 'px'; }
    onResize(event) {
        this.fixLayout();
    }
    constructor(el, ref, sanitizer, zone) {
        this.el = el;
        this.ref = ref;
        this.sanitizer = sanitizer;
        this.zone = zone;
        this.clickOutsideDetail = new EventEmitter();
        this.toggleFilterPanel = new EventEmitter();
        this.autoHiddenToolbar = true;
        this.backgroundImgUrl = 'assets/images/bg-eng.jpg';
        this.hideBackgroundImg = false;
        this.lastToolbarVisibilityChangeTime = 0;
        this.hiddenSiiToolbar = false;
        this.siiPageScrolled = false;
        //  @HostBinding('class.hiddenHeader')  siiHiddenHeader = false;
        //  @HostBinding('class.siiPageScrolled') get pageScrolled(){
        //    return this.realScrollerRef  === document ? this.realScrollerRef.scrollingElement.scrollTop > 0 : this.realScrollerRef?.scrollTop > 0; }
        this.initialized = false;
        this.pageToolbarContainerHeightSubj = new BehaviorSubject(0);
        this.pageToolbarContainerHeight = this.pageToolbarContainerHeightSubj.asObservable();
        this.pageFixedToolbarContainerHeightSubj = new BehaviorSubject(0);
        this.pageFixedToolbarContainerHeight = this.pageFixedToolbarContainerHeightSubj.asObservable();
        this.pageContentToolbarsContainerHeightSubj = new BehaviorSubject(0);
        this.pageContentToolbarsContainerHeight = this.pageContentToolbarsContainerHeightSubj.asObservable();
        this.pageFixedContentToolbarsContainerHeightSubj = new BehaviorSubject(0);
        this.pageFixedContentToolbarsContainerHeight = this.pageFixedContentToolbarsContainerHeightSubj.asObservable();
        this.pageFooterContainerHeightSubj = new BehaviorSubject(0);
        this.pageFooterContainerHeight = this.pageFooterContainerHeightSubj.asObservable();
        this.pageHeaderContainerHeightSubj = new BehaviorSubject(0);
        this.pageHeaderContainerHeight = this.pageHeaderContainerHeightSubj.asObservable();
        this.pageMiniHeaderContainerHeightSubj = new BehaviorSubject(0);
        this.pageMiniHeaderContainerHeight = this.pageMiniHeaderContainerHeightSubj.asObservable();
        this.pageFooterContainerVisibleHeightSubj = new BehaviorSubject(0);
        this.pageFooterContainerVisibleHeight = this.pageFooterContainerVisibleHeightSubj.asObservable();
        this.pageHeaderContainerVisibleHeightSubj = new BehaviorSubject(0);
        this.pageHeaderContainerVisibleHeight = this.pageHeaderContainerVisibleHeightSubj.asObservable();
        this.showMiniHeader = false;
        this.addFooterSpace = false;
        this.lastScrollTop = 0;
        this.utils = {
            lastpctbItems: 0
        };
        this.scrollFunctionRef = function scroll(e) {
            if (e.target === e.currentTarget) {
                this.showHideToolbar(e.srcElement === document ? document.scrollingElement : e.srcElement);
            }
        }.bind(this);
        this.positiveOrZero = (val) => val > 0 ? val : 0;
        this.id = (new Date()).getTime();
        this.pageFooterContainerObserver = new ResizeObserver(entries => {
            const fh = entries.reduce((acc, c) => acc + c.contentRect.height, 0) || 0;
            this.pageFooterContainerHeightSubj.next(fh);
            this.checkFooterVisibility(this.realScrollerRef === document ? this.realScrollerRef.scrollingElement : this.realScrollerRef);
            //  this.pageToolbarsContainerHeightSubj.next(entries[0].contentRect.height);
        });
        this.pageHeaderContainerObserver = new ResizeObserver(entries => {
            const fh = entries.reduce((acc, c) => acc + c.contentRect.height, 0) || 0;
            this.pageHeaderContainerHeightSubj.next(fh);
            this.checkHeaderVisibility(this.realScrollerRef === document ? this.realScrollerRef.scrollingElement : this.realScrollerRef);
        });
        this.pageMiniHeaderContainerObserver = new ResizeObserver(entries => {
            const fh = entries.reduce((acc, c) => acc + c.contentRect.height, 0) || 0;
            this.pageMiniHeaderContainerHeightSubj.next(fh);
        });
        this.pageToolbarContainerObserver = new ResizeObserver(entries => {
            this.zone.run(() => {
                const th = entries.reduce((acc, c) => acc + c.contentRect.height, 0);
                if (th !== 0) {
                    this.pageFixedToolbarContainerHeightSubj.next(th);
                }
                this.pageToolbarContainerHeightSubj.next(th);
            });
        });
        this.pageContentToolbarsContainerObserver = new ResizeObserver(entries => {
            this.zone.run(() => {
                const pcth = entries.reduce((acc, c) => acc + c.contentRect.height, 0);
                if (pcth !== 0 && this.utils.lastpctbItems !== entries[0].target.childElementCount) {
                    this.pageFixedContentToolbarsContainerHeightSubj.next(pcth);
                }
                this.pageContentToolbarsContainerHeightSubj.next(pcth);
                this.utils.lastpctbItems = entries[0].target.childElementCount;
            });
        });
        this.scrollerContainerObserver = new ResizeObserver(entries => {
            this.zone.run(() => {
                this.checkFooterVisibility(this.realScrollerRef === document ? this.realScrollerRef.scrollingElement : this.realScrollerRef);
                this.checkHeaderVisibility(this.realScrollerRef === document ? this.realScrollerRef.scrollingElement : this.realScrollerRef);
            });
        });
    }
    ngOnChanges(changes) {
        if (!!changes.scrollerRef && !changes.scrollerRef.isFirstChange()
            && changes.scrollerRef.currentValue !== changes.scrollerRef.previousValue) {
            if (!!this.realScrollerRef) {
                this.realScrollerRef.removeEventListener('scroll', this.scrollFunctionRef, true);
            }
            this.initScroller();
            if (!!this.realScrollerRef) {
                // simuolo uno scroll verso l'alto per far comparire se necessario la toolbar
                this.lastScrollTop = this.realScrollerRef.scrollTop + 10;
                this.showHideToolbar(this.realScrollerRef);
            }
        }
        if (!!changes.backgroundImgUrl || !!changes.hideBackgroundImg) {
            this.updateBgImage();
        }
    }
    updateBgImage() {
        const bg = this.hideBackgroundImg ? '' : `url(${this.backgroundImgUrl})`;
        this.el.nativeElement.style.setProperty('--bgImageUrl', bg);
        ['containerbackground', 'ptContainer', 'pctContainer', 'footerContainer', 'headerContainer', 'miniHeaderContainer', 'pc-toolbars'].forEach((e) => {
            for (const item of this.el.nativeElement.getElementsByClassName(e)) {
                item.style.backgroundImage = bg;
            }
        });
    }
    ngOnDestroy() {
        this.pageToolbarContainerObserver.unobserve(this.ptContainer.nativeElement);
        this.pageContentToolbarsContainerObserver.unobserve(this.pctContainer.nativeElement);
        this.pageFooterContainerObserver.unobserve(this.footerContainer.nativeElement);
        this.pageHeaderContainerObserver.unobserve(this.headerContainer.nativeElement);
        this.pageMiniHeaderContainerObserver.unobserve(this.miniHeaderContainer.nativeElement);
        if (this.realScrollerRef != null) {
            this.scrollerContainerObserver.unobserve(this.realScrollerRef === document ? this.realScrollerRef.scrollingElement : this.realScrollerRef);
        }
        this.disableContentScroll(false);
        this.hiddenSiiToolbar = false;
        this.siiPageScrolled = false;
    }
    ngAfterViewInit() {
        this.updateBgImage();
        this.pageToolbarContainerObserver.observe(this.ptContainer.nativeElement);
        this.pageContentToolbarsContainerObserver.observe(this.pctContainer.nativeElement);
        this.pageFooterContainerObserver.observe(this.footerContainer.nativeElement);
        this.pageHeaderContainerObserver.observe(this.headerContainer.nativeElement);
        this.pageMiniHeaderContainerObserver.observe(this.miniHeaderContainer.nativeElement);
        if (this.pageContentToolbarComponent.length > 0 && this.pageFiltersComponent) {
            Promise.resolve().then(() => {
                this.pageContentToolbarComponent.forEach(f => {
                    f.toggleFilterPanelRef = () => { this.toggleFiltersPanel(); };
                    f.filterPanelRef = this.pageFiltersComponent;
                });
            });
        }
        if (this.pageFiltersComponent) {
            this.pageContentToolbarComponent.changes.subscribe((res) => {
                res.filter(i => !i.filterPanelRef).forEach(f => {
                    f.toggleFilterPanelRef = () => { this.toggleFiltersPanel(); };
                    f.filterPanelRef = this.pageFiltersComponent;
                });
            });
            this.pageFiltersComponent.closeFilterPanelEmitter.subscribe(() => this.toggleFiltersPanel(false));
        }
        this.initScroller();
        this.fixLayout(true);
        Promise.resolve().then(() => {
            this.initialized = true;
        });
    }
    checkFooterVisibility(srcElement) {
        if (!srcElement) {
            return;
        }
        const prevVal = this.pageFooterContainerVisibleHeightSubj.value;
        this.pageFooterContainerVisibleHeightSubj.next(this.positiveOrZero(srcElement.clientHeight - this.footerContainer.nativeElement.getBoundingClientRect().top));
        const currVal = this.pageFooterContainerVisibleHeightSubj.value;
        if (prevVal !== currVal) {
            this.zone.run(() => {
                this.ref.detectChanges();
            });
        }
    }
    checkHeaderVisibility(srcElement) {
        const prevVal = this.pageHeaderContainerVisibleHeightSubj.value;
        this.pageHeaderContainerVisibleHeightSubj.next(this.headerContainer.nativeElement.getBoundingClientRect().height == 0 ? 0 :
            this.positiveOrZero(this.headerContainer.nativeElement.getBoundingClientRect().bottom - this.pageContentToolbarsContainerHeightSubj.value - this.pageToolbarContainerHeightSubj.value));
        const currVal = this.pageHeaderContainerVisibleHeightSubj.value;
        // this.siiHiddenHeader = currVal==0;
        if (prevVal !== currVal) {
            this.showMiniHeader = currVal <= this.pageMiniHeaderContainerHeightSubj.value;
            this.zone.run(() => {
                this.ref.detectChanges();
            });
        }
    }
    //  isScrolledToBottom(srcElement){
    //   //  console.log( Math.round(srcElement.clientHeight + srcElement.scrollTop) - (srcElement.scrollHeight - this.pageFooterContainerHeightSubj.value) );
    //    return Math.round(srcElement.clientHeight + srcElement.scrollTop) >= (srcElement.scrollHeight - this.pageFooterContainerHeightSubj.value) ;
    //  }
    showHideToolbar(srcElement) {
        this.siiPageScrolled = srcElement.scrollTop > 0;
        if (((new Date().getTime()) - this.lastToolbarVisibilityChangeTime < 200) &&
            ((this.siiPageScrolled && this.hiddenSiiToolbar) || (!this.siiPageScrolled && !this.hiddenSiiToolbar))) {
            return;
        }
        const st = srcElement.scrollTop;
        const siiToolbar = this.toolbarComponent !== undefined && this.toolbarComponent.autoHide ? this.toolbarComponent.el.nativeElement.clientHeight : 0;
        const siiFooter = this.footerComponent !== undefined ? this.footerComponent.el.nativeElement.clientHeight : 0;
        let siiContentToolbar = 0;
        // if (this.pageContentToolbarComponent2.length>0 ){
        this.pageContentToolbarComponent.filter(t => t.autoHide).forEach(t => siiContentToolbar += t.el.nativeElement.clientHeight);
        // siiContentToolbar = this.pageContentToolbarComponent.el.nativeElement.clientHeight;
        // }
        this.checkFooterVisibility(srcElement);
        this.checkHeaderVisibility(srcElement);
        const toolbarH = siiToolbar + siiFooter + siiContentToolbar + 20;
        if (Math.abs(this.lastScrollTop - st) <= 10 && st > toolbarH + 50) {
            return;
        }
        let toolbarVisibilityChange = false;
        if (st > this.lastScrollTop && st > toolbarH + 50) {
            // sto scrollando verso il basso di un altezza abbastanza grande da contenere la toolbar
            if (this.toolbarComponent && this.toolbarComponent.autoHide) {
                if (!this.hiddenSiiToolbar) {
                    toolbarVisibilityChange = true;
                    this.hiddenSiiToolbar = true;
                }
            }
            // if (this.pageContentToolbarComponent && this.pageContentToolbarComponent.autoHide){
            // this.pageContentToolbarComponent.filter(t => t.autoHide).forEach(t => t.el.nativeElement.style.display = 'none');
            this.pageContentToolbarComponent.filter(t => t.autoHide).forEach(t => {
                if (!t.el.nativeElement.classList.contains('hiddenToolbar')) {
                    toolbarVisibilityChange = true;
                    t.el.nativeElement.classList.add('hiddenToolbar');
                }
            });
            // this.pageContentToolbarComponent.el.nativeElement.style.display = 'none';
            // }
            this.lastScrollTop = st - toolbarH;
        }
        else if (st < this.lastScrollTop && (st < 10 || this.lastScrollTop - st > 50)) {
            // sono arrivato in cima oppure ho fatto uno scoll molto rapido
            // if(st + this.el.nativeElement.clientHeight < this.el.nativeElement.clientHeight) {
            if (this.toolbarComponent && this.toolbarComponent.autoHide) {
                if (this.hiddenSiiToolbar) {
                    toolbarVisibilityChange = true;
                    this.hiddenSiiToolbar = false;
                }
                // if (this.toolbarComponent.el.nativeElement.style.display === 'none'){
                //   toolbarVisibilityChange = true;
                //   this.toolbarComponent.el.nativeElement.style.display = '';
                // }
            }
            // this.pageContentToolbarComponent.filter(t => t.autoHide).forEach(t => t.el.nativeElement.style.display = '');
            this.pageContentToolbarComponent.filter(t => t.autoHide).forEach(t => {
                if (t.el.nativeElement.classList.contains('hiddenToolbar')) {
                    toolbarVisibilityChange = true;
                    t.el.nativeElement.classList.remove('hiddenToolbar');
                }
            });
            // if (this.pageContentToolbarComponent && this.pageContentToolbarComponent.autoHide){
            //   this.pageContentToolbarComponent.el.nativeElement.style.display = '';
            // }
            this.lastScrollTop = st;
            // }
        }
        else {
            this.lastScrollTop = st;
        }
        if (toolbarVisibilityChange) {
            this.emitToolbarHideEvent();
        }
    }
    emitToolbarHideEvent() {
        this.lastToolbarVisibilityChangeTime = new Date().getTime();
    }
    initScroller() {
        if ((this.toolbarComponent || this.pageContentToolbarComponent.length > 0) && this.autoHiddenToolbar === true) {
            if (this.scrollerRef !== undefined && this.scrollerRef.addEventListener !== undefined) {
                // l'elemento può essere scollato
                this.realScrollerRef = this.scrollerRef;
            }
            else if (this.scrollerRef !== undefined && this.scrollerRef.addEventListener === undefined &&
                this.scrollerRef.scrollerEl !== undefined) {
                this.realScrollerRef = this.scrollerRef.scrollerEl;
            }
            else {
                // this.realScrollerRef = this.pageContentComponent.el.nativeElement.getElementsByClassName('pc-body')[0];
                this.realScrollerRef = document;
            }
            this.subscribeScrollInterceptor();
            this.scrollerContainerObserver.observe(this.realScrollerRef === document ? this.realScrollerRef.scrollingElement : this.realScrollerRef);
            this.checkFooterVisibility(this.realScrollerRef === document ? this.realScrollerRef.scrollingElement : this.realScrollerRef);
            this.checkHeaderVisibility(this.realScrollerRef === document ? this.realScrollerRef.scrollingElement : this.realScrollerRef);
            this.emitToolbarHideEvent();
        }
    }
    subscribeScrollInterceptor() {
        if (this.pageContentComponent) {
            this.realScrollerRef.addEventListener('scroll', this.scrollFunctionRef, { capture: true, passive: true });
        }
    }
    toggleFiltersPanel(forceStatusVisible) {
        if (this.pageFiltersComponent) {
            if (forceStatusVisible != null) {
                if (forceStatusVisible && this.pageFiltersComponent.display !== 'block') {
                    this.showFiltersPanel();
                }
                else if (!forceStatusVisible && this.pageFiltersComponent.display === 'block') {
                    this.hideFiltersPanel();
                }
            }
            else {
                if (this.pageFiltersComponent.display === 'block') {
                    this.hideFiltersPanel();
                }
                else {
                    this.showFiltersPanel();
                }
            }
        }
    }
    toggleDetailPanel(forceStatusVisible) {
        if (this.pageDetailComponent) {
            if (forceStatusVisible != null) {
                if (forceStatusVisible && this.pageDetailComponent.display !== 'block') {
                    this.showDetailPanel();
                }
                else if (!forceStatusVisible && this.pageDetailComponent.display === 'block') {
                    this.hideDetailPanel();
                }
            }
            else {
                if (this.pageDetailComponent.display === 'block') {
                    this.hideDetailPanel();
                }
                else {
                    this.showDetailPanel();
                }
            }
        }
    }
    fixLayout(isInit = false) {
        if (this.pageDetailComponent && this.pageDetailComponent.display !== 'none') {
            this.showDetailPanel();
        }
        if (this.pageFiltersComponent) {
            if (isInit) {
                // tslint:disable-next-line:max-line-length
                const spaceAvailable = this.pageContentComponent.getMinWidthInPx() + this.pageFiltersComponent.el.nativeElement.clientWidth < this.el.nativeElement.offsetWidth;
                if (!spaceAvailable && this.pageFiltersComponent.display !== 'none') {
                    // il pannello dei filtri è visibile ma non c'è spazio
                    this.hideFiltersPanel();
                }
            }
            else if (this.pageFiltersComponent.display !== 'none') {
                this.showFiltersPanel();
            }
        }
    }
    showDetailPanel() {
        // delete $this.utils.style.detail.display;
        Promise.resolve().then(() => this.pageDetailComponent.display = 'block');
        // controllo che ci sia abbastanza spazio per mostrare sia il pannello dei filtri e sia il pannello del dettaglio
        const compW = this.el.nativeElement.offsetWidth;
        // larghezza attualmente visibile
        const fCw = this.pageFiltersComponent?.el.nativeElement.clientWidth || 0;
        let cCw = this.pageContentComponent.el.nativeElement.clientWidth;
        const dCw = this.pageDetailComponent.el.nativeElement.clientWidth;
        // $this.utils.components.detailPanel.removeClass("odcHoverFullScreen");//rimuovo se presente
        this.pageDetailComponent.hoverFullScreen(false);
        // larghezza effettiva quando il pannello del dettaglio è visibile
        const dw = this.pageDetailComponent.getRealWidth();
        const cw = this.pageContentComponent.getMinWidthInPx();
        // pannello dei filtri aperto e larghezza dettaglio da visibile maggiore della finestra => chiudo pannello filtri e
        // ricalcolo la larghezza visibile del contenitore
        if (fCw > 0 && cw + fCw + dw > compW) {
            this.toggleFiltersPanel(false);
            // safeApply();
            cCw = this.pageContentComponent.el.nativeElement.clientWidth;
        }
        // dettaglio + contenuto > finestra => apro in hover il dettaglio
        if (cw + dw > compW) {
            this.pageDetailComponent.hover(true);
            this.disableContentScroll(true);
            // $this.utils.components.detailPanel.addClass("odcHover");
            if (compW - dw < 200) {
                // se la dimensione del contenitore è troppo piccola, metto il pannello del dettaglio al 100%
                this.pageDetailComponent.hoverFullScreen(true);
                // $this.utils.components.detailPanel.addClass("odcHoverFullScreen");
            }
            this.showHideDetailHoverMask(true);
        }
        else {
            this.pageDetailComponent.hover(this.pageDetailComponent.alwaysHover ? true : false);
            // $this.utils.components.detailPanel.removeClass("odcHover");
            this.showHideDetailHoverMask(this.pageDetailComponent.alwaysHover ? true : false);
            this.disableContentScroll(this.pageDetailComponent.alwaysHover ? true : false);
        }
    }
    hideDetailPanel() {
        // $this.utils.style.detail.display='none';
        Promise.resolve().then(() => this.pageDetailComponent.display = 'none');
        this.pageDetailComponent.hover(false);
        this.pageDetailComponent.hoverFullScreen(false);
        this.disableContentScroll(false);
        this.showHideDetailHoverMask(false);
    }
    showHideDetailHoverMask(vis) {
        // if($this.utils.components.component!=undefined){
        Promise.resolve().then(() => this.detailHoverMask.display = vis ? 'block' : 'none');
        //  vis? $this.utils.components.component.addClass("odcHoverMask") : $this.utils.components.component.removeClass("odcHoverMask")
        // }
    }
    showFiltersPanel() {
        // delete $this.utils.style.filters.display;
        Promise.resolve().then(() => this.pageFiltersComponent.display = 'block');
        this.toggleFilterPanel.emit(true);
        // controllo che ci sia abbastanza spazio per mostrare sia il pannello dei filtri e sia il pannello del dettaglio
        const compW = this.el.nativeElement.offsetWidth;
        // larghezza attualmente visibile
        const fCw = this.pageFiltersComponent.el.nativeElement.clientWidth;
        const cCw = this.pageContentComponent.el.nativeElement.clientWidth;
        const dCw = this.pageDetailComponent?.el.nativeElement.clientWidth || 0;
        const cw = this.pageContentComponent.getMinWidthInPx();
        this.pageFiltersComponent.hoverFullScreen(false);
        // // larghezza effettiva quando il pannello dei filtri  è visibile
        const fw = this.pageFiltersComponent.getRealWidth();
        if (cw + dCw + fw > compW) {
            // mostro il pannello dei filtri in hover
            this.pageFiltersComponent.hover(true);
            this.disableContentScroll(true);
            if (compW - fw < 200) {
                // se la dimensione del contenitore è troppo piccola, metto il pannello del dettaglio al 100%
                this.pageFiltersComponent.hoverFullScreen(true);
            }
            this.showHideFiltersHoverMask(true);
        }
        else {
            this.pageFiltersComponent.hover(false);
            this.disableContentScroll(false);
            this.showHideFiltersHoverMask(false);
        }
    }
    showHideFiltersHoverMask(vis) {
        // if($this.utils.components.component!=undefined){
        Promise.resolve().then(() => this.filterHoverMask.display = vis ? 'block' : 'none');
        //  vis? $this.utils.components.component.addClass("odcHoverMask") : $this.utils.components.component.removeClass("odcHoverMask")
        // }
    }
    hideFiltersPanel() {
        Promise.resolve().then(() => this.pageFiltersComponent.display = 'none');
        this.toggleFilterPanel.emit(false);
        // if($this.utils.components.filtersPanel!=undefined){.
        this.pageFiltersComponent.hover(false);
        this.disableContentScroll(false);
        this.pageFiltersComponent.hoverFullScreen(false);
        // }
        this.showHideFiltersHoverMask(false);
    }
    getRealWidth() {
        return parseInt(getComputedStyle(this.el.nativeElement, null).width.replace('px', ''), 10);
    }
    detailHoverMaskClick() {
        this.clickOutsideDetail.emit();
    }
    filterHoverMaskClick() {
        this.hideFiltersPanel();
    }
    toolbarsHeightChange() {
        // this.toolbarsHeight = this.pctb.nativeElement.offsetHeight;
        this.zone.run(() => {
            this.ref.detectChanges();
            window.dispatchEvent(new CustomEvent('pageContainerToolbarsHeightChange'));
        });
    }
    disableContentScroll(enable) {
        document.getElementsByTagName('html')[0].style.overflow = enable ? 'hidden' : '';
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: SiiPageContainerComponent, deps: [{ token: i0.ElementRef }, { token: i0.ChangeDetectorRef }, { token: i1.DomSanitizer }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.2.13", type: SiiPageContainerComponent, isStandalone: true, selector: "sii-page-container", inputs: { autoHiddenToolbar: "autoHiddenToolbar", scrollerRef: "scrollerRef", backgroundImgUrl: "backgroundImgUrl", hideBackgroundImg: "hideBackgroundImg", backgroundClass: "backgroundClass" }, outputs: { clickOutsideDetail: "clickOutsideDetail", toggleFilterPanel: "toggleFilterPanel" }, host: { listeners: { "window:resize": "onResize($event)" }, properties: { "style.--toolbarHeight": "this.toolbarHeight", "style.--pageContentToolbarsContainerHeight": "this.pageContentToolbarsContainerHeightVal", "style.--fixedToolbarHeight": "this.fixedToolbarHeight", "style.--footerHeight": "this.footerHeight", "style.--headerHeight": "this.headeHeight", "class.hiddenSiiToolbar": "this.hiddenSiiToolbar", "class.siiPageScrolled": "this.siiPageScrolled", "class.siiInitialized": "this.initialized" } }, queries: [{ propertyName: "pageFiltersComponent", first: true, predicate: PageFiltersComponent, descendants: true }, { propertyName: "pageDetailComponent", first: true, predicate: PageDetailComponent, descendants: true }, { propertyName: "pageContentComponent", first: true, predicate: PageContentComponent, descendants: true }, { propertyName: "toolbarComponent", first: true, predicate: ToolbarComponent, descendants: true }, { propertyName: "footerComponent", first: true, predicate: PageFooterDirective, descendants: true }, { propertyName: "pageContentToolbarComponent", predicate: PageContentToolbarComponent, descendants: true }], viewQueries: [{ propertyName: "filterHoverMask", first: true, predicate: ["FILTERHOVERMASK"], descendants: true }, { propertyName: "detailHoverMask", first: true, predicate: ["DETAILHOVERMASK"], descendants: true }, { propertyName: "ptContainer", first: true, predicate: ["ptContainer"], descendants: true }, { propertyName: "pctContainer", first: true, predicate: ["pctContainer"], descendants: true }, { propertyName: "footerContainer", first: true, predicate: ["footerContainer"], descendants: true }, { propertyName: "headerContainer", first: true, predicate: ["headerContainer"], descendants: true }, { propertyName: "miniHeaderContainer", first: true, predicate: ["miniHeaderContainer"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "\r\n<div #ptContainer class=\"ptContainer\" (cdkObserveContent)=\"toolbarsHeightChange()\">\r\n  <ng-content select=\"sii-toolbar\"></ng-content>\r\n</div>\r\n<div #pctContainer class=\"pctContainer\" (cdkObserveContent)=\"toolbarsHeightChange()\">\r\n  <ng-content select=\"sii-page-content-toolbar\"></ng-content>\r\n</div>\r\n<div class=\"containerbackground\"  [ngClass]=\"backgroundClass\"></div>\r\n\r\n\r\n<!-- HEADERS -->\r\n<div #miniHeaderContainer class=\"miniHeaderContainer\" [style.visibility]=\"showMiniHeader ? 'visible':'hidden'\" [style.top.px]=\"((pageToolbarContainerHeight | async) + (pageContentToolbarsContainerHeight | async) )\">\r\n  <ng-content select=\"[siiPageMiniHeader]\"></ng-content>\r\n</div>\r\n\r\n<div #headerContainer class=\"headerContainer\" (cdkObserveContent)=\"toolbarsHeightChange()\" [style.marginTop.px]=\"((pageFixedToolbarContainerHeight | async) + (pageFixedContentToolbarsContainerHeight | async) )\">\r\n  <ng-content select=\"[siiPageHeader]\"></ng-content>\r\n</div>\r\n<!-- HEADERS fine -->\r\n\r\n<div class=\"pc_container\" >\r\n\r\n <!-- FILTER PANEL -->\r\n <div class=\"pageFilterContentBox\" [style.top.px]=\"((pageToolbarContainerHeight | async) + (pageContentToolbarsContainerHeight | async) +   (showMiniHeader ? (pageMiniHeaderContainerHeight | async):(pageHeaderContainerVisibleHeight | async)))\"\r\n [style.height]=\"sanitizer.bypassSecurityTrustStyle('calc(100vh - '+( (pageToolbarContainerHeight | async) + (pageContentToolbarsContainerHeight | async) +  (pageFooterContainerVisibleHeight | async)   + (showMiniHeader ? (pageMiniHeaderContainerHeight | async):(pageHeaderContainerVisibleHeight | async)) )+'px)')\" >\r\n <ng-content select=\"sii-page-filters\"></ng-content>\r\n</div>\r\n<!-- FILTER PANEL fine -->\r\n\r\n  <!-- CONTENT PANEL -->\r\n  <ng-content select=\"sii-page-content\"></ng-content>\r\n  <!-- CONTENT PANEL fine-->\r\n\r\n\r\n  <!-- DETAIL PANEL -->\r\n  <div class=\"pageDetailContentBox\" [style.top.px]=\"((pageToolbarContainerHeight | async) + (pageContentToolbarsContainerHeight | async) + (showMiniHeader ? (pageMiniHeaderContainerHeight | async):(pageHeaderContainerVisibleHeight | async)))\"\r\n  [style.height]=\"sanitizer.bypassSecurityTrustStyle('calc(100vh - '+( (pageToolbarContainerHeight | async) + (pageContentToolbarsContainerHeight | async) + (pageFooterContainerVisibleHeight | async)   +(showMiniHeader ? (pageMiniHeaderContainerHeight | async):(pageHeaderContainerVisibleHeight | async))  )+'px)')\" >\r\n  <ng-content select=\"sii-page-detail\"></ng-content>\r\n</div>\r\n<!-- DETAIL PANEL fine-->\r\n\r\n\r\n  <!-- HOVER MASK -->\r\n  <sii-page-hover-mask #DETAILHOVERMASK style=\"z-index: 3;\" class=\"sii-page-hover-mask\" (click)=\"detailHoverMaskClick()\"></sii-page-hover-mask>\r\n  <sii-page-hover-mask #FILTERHOVERMASK style=\"z-index: 2;\" class=\"sii-page-hover-mask\" (click)=\"filterHoverMaskClick()\"></sii-page-hover-mask>\r\n  <!-- HOVER MASK fine-->\r\n\r\n  <!-- FOOTER -->\r\n  <div #footerContainer class=\"footerContainer\" (cdkObserveContent)=\"toolbarsHeightChange()\">\r\n    <ng-content select=\"[siiPageFooter]\"></ng-content>\r\n  </div>\r\n  <!-- FOOTER fine-->\r\n</div>\r\n\r\n\r\n", styles: [":host{display:flex;flex-direction:column;min-height:100vh;position:relative;background-color:#2a2b38}:host ::ng-deep>sii-page-content-toolbar{z-index:804}:host:not(.siiInitialized) .ptContainer,:host:not(.siiInitialized) .pctContainer,:host:not(.siiInitialized) .footerContainer,:host:not(.siiInitialized) .headerContainer,:host:not(.siiInitialized) .miniHeaderContainer,:host:not(.siiInitialized) .pc_container,:host:not(.siiInitialized) .pc_container ::ng-deep{visibility:hidden!important}:host:not(.siiInitialized) ::ng-deep .pf_content{display:none}.containerbackground{position:absolute;width:100%;height:100%;background-size:cover;background-repeat:no-repeat;background-image:linear-gradient(-186.39deg,#090909 -7.89%,#161721 26.77%,#000 59.41%,#323551 94.42%);background-attachment:fixed}@media screen and (max-width: 576px){:host .ptContainer,:host .pctContainer,:host .footerContainer,:host .miniHeaderContainer,:host ::ng-deep .pc-toolbars{background-image:none!important;-webkit-backdrop-filter:blur(12px) brightness(.75)!important;backdrop-filter:blur(12px) brightness(.75)!important}}:host::ng-deep sii-toolbar{z-index:804}.ptContainer{position:fixed;top:0;width:calc(100% - var(--safe-area-inset-right) - var(--safe-area-inset-left));background-size:cover;background-repeat:no-repeat;background-color:#2a2b38;background-attachment:fixed;z-index:5}.pctContainer{position:fixed;top:var(--toolbarHeight);width:calc(100% - var(--safe-area-inset-right) - var(--safe-area-inset-left));background-size:cover;background-repeat:no-repeat;background-image:linear-gradient(-186.39deg,#090909 -7.89%,#161721 26.77%,#000 59.41%,#323551 94.42%);background-attachment:fixed;z-index:2}.footerContainer{position:absolute;bottom:0;left:0;width:100%;background-size:cover;background-repeat:no-repeat;background-image:linear-gradient(-186.39deg,#090909 -7.89%,#161721 26.77%,#000 59.41%,#323551 94.42%);background-attachment:fixed;z-index:2}.headerContainer{width:100%;background-size:cover;background-repeat:no-repeat;background-image:linear-gradient(-186.39deg,#090909 -7.89%,#161721 26.77%,#000 59.41%,#323551 94.42%);background-attachment:fixed;z-index:1}.miniHeaderContainer{position:fixed;z-index:2;background-size:cover;background-repeat:no-repeat;background-image:linear-gradient(-186.39deg,#090909 -7.89%,#161721 26.77%,#000 59.41%,#323551 94.42%);background-attachment:fixed;width:100%}.pc_container{display:flex}.pc_container .pageDetailContentBox{position:sticky;z-index:4}.pc_container .pageDetailContentBox ::ng-deep sii-page-detail{overscroll-behavior:contain;overflow:auto;height:100%}.pc_container .pageFilterContentBox{position:sticky;z-index:3}.pc_container .pageFilterContentBox ::ng-deep sii-page-filters{height:100%}:host.hiddenSiiToolbar::ng-deep sii-toolbar,:host::ng-deep sii-page-content-toolbar.hiddenToolbar{display:none}:host::ng-deep>.pctContainer sii-page-content-toolbar .pct_container_filterButton{display:none}:host .pctContainer::ng-deep sii-page-content-toolbar .pct_container{margin:0 auto;width:100%}.pc_container{width:100%;margin-left:auto;margin-right:auto}@media screen and (min-width: 1440px){:host .pctContainer::ng-deep sii-page-content-toolbar .pct_container,.pc_container{width:1320px}}@media screen and (min-width: 1600px){:host .pctContainer::ng-deep sii-page-content-toolbar .pct_container,.pc_container{width:1450px}}@media screen and (min-width: 1920px){:host .pctContainer::ng-deep sii-page-content-toolbar .pct_container,.pc_container{width:1610px}}:host::ng-deep [siipagefooter]{z-index:0;display:block}:host::ng-deep .pc-body{margin-bottom:var(--footerHeight)}\n"], dependencies: [{ kind: "directive", type: CdkObserveContent, selector: "[cdkObserveContent]", inputs: ["cdkObserveContentDisabled", "debounce"], outputs: ["cdkObserveContent"], exportAs: ["cdkObserveContent"] }, { kind: "directive", type: NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "component", type: PageHoverMaskComponent, selector: "sii-page-hover-mask" }, { kind: "pipe", type: AsyncPipe, name: "async" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: SiiPageContainerComponent, decorators: [{
            type: Component,
            args: [{ selector: 'sii-page-container', standalone: true, imports: [
                        CdkObserveContent,
                        NgClass,
                        PageHoverMaskComponent,
                        AsyncPipe,
                    ], template: "\r\n<div #ptContainer class=\"ptContainer\" (cdkObserveContent)=\"toolbarsHeightChange()\">\r\n  <ng-content select=\"sii-toolbar\"></ng-content>\r\n</div>\r\n<div #pctContainer class=\"pctContainer\" (cdkObserveContent)=\"toolbarsHeightChange()\">\r\n  <ng-content select=\"sii-page-content-toolbar\"></ng-content>\r\n</div>\r\n<div class=\"containerbackground\"  [ngClass]=\"backgroundClass\"></div>\r\n\r\n\r\n<!-- HEADERS -->\r\n<div #miniHeaderContainer class=\"miniHeaderContainer\" [style.visibility]=\"showMiniHeader ? 'visible':'hidden'\" [style.top.px]=\"((pageToolbarContainerHeight | async) + (pageContentToolbarsContainerHeight | async) )\">\r\n  <ng-content select=\"[siiPageMiniHeader]\"></ng-content>\r\n</div>\r\n\r\n<div #headerContainer class=\"headerContainer\" (cdkObserveContent)=\"toolbarsHeightChange()\" [style.marginTop.px]=\"((pageFixedToolbarContainerHeight | async) + (pageFixedContentToolbarsContainerHeight | async) )\">\r\n  <ng-content select=\"[siiPageHeader]\"></ng-content>\r\n</div>\r\n<!-- HEADERS fine -->\r\n\r\n<div class=\"pc_container\" >\r\n\r\n <!-- FILTER PANEL -->\r\n <div class=\"pageFilterContentBox\" [style.top.px]=\"((pageToolbarContainerHeight | async) + (pageContentToolbarsContainerHeight | async) +   (showMiniHeader ? (pageMiniHeaderContainerHeight | async):(pageHeaderContainerVisibleHeight | async)))\"\r\n [style.height]=\"sanitizer.bypassSecurityTrustStyle('calc(100vh - '+( (pageToolbarContainerHeight | async) + (pageContentToolbarsContainerHeight | async) +  (pageFooterContainerVisibleHeight | async)   + (showMiniHeader ? (pageMiniHeaderContainerHeight | async):(pageHeaderContainerVisibleHeight | async)) )+'px)')\" >\r\n <ng-content select=\"sii-page-filters\"></ng-content>\r\n</div>\r\n<!-- FILTER PANEL fine -->\r\n\r\n  <!-- CONTENT PANEL -->\r\n  <ng-content select=\"sii-page-content\"></ng-content>\r\n  <!-- CONTENT PANEL fine-->\r\n\r\n\r\n  <!-- DETAIL PANEL -->\r\n  <div class=\"pageDetailContentBox\" [style.top.px]=\"((pageToolbarContainerHeight | async) + (pageContentToolbarsContainerHeight | async) + (showMiniHeader ? (pageMiniHeaderContainerHeight | async):(pageHeaderContainerVisibleHeight | async)))\"\r\n  [style.height]=\"sanitizer.bypassSecurityTrustStyle('calc(100vh - '+( (pageToolbarContainerHeight | async) + (pageContentToolbarsContainerHeight | async) + (pageFooterContainerVisibleHeight | async)   +(showMiniHeader ? (pageMiniHeaderContainerHeight | async):(pageHeaderContainerVisibleHeight | async))  )+'px)')\" >\r\n  <ng-content select=\"sii-page-detail\"></ng-content>\r\n</div>\r\n<!-- DETAIL PANEL fine-->\r\n\r\n\r\n  <!-- HOVER MASK -->\r\n  <sii-page-hover-mask #DETAILHOVERMASK style=\"z-index: 3;\" class=\"sii-page-hover-mask\" (click)=\"detailHoverMaskClick()\"></sii-page-hover-mask>\r\n  <sii-page-hover-mask #FILTERHOVERMASK style=\"z-index: 2;\" class=\"sii-page-hover-mask\" (click)=\"filterHoverMaskClick()\"></sii-page-hover-mask>\r\n  <!-- HOVER MASK fine-->\r\n\r\n  <!-- FOOTER -->\r\n  <div #footerContainer class=\"footerContainer\" (cdkObserveContent)=\"toolbarsHeightChange()\">\r\n    <ng-content select=\"[siiPageFooter]\"></ng-content>\r\n  </div>\r\n  <!-- FOOTER fine-->\r\n</div>\r\n\r\n\r\n", styles: [":host{display:flex;flex-direction:column;min-height:100vh;position:relative;background-color:#2a2b38}:host ::ng-deep>sii-page-content-toolbar{z-index:804}:host:not(.siiInitialized) .ptContainer,:host:not(.siiInitialized) .pctContainer,:host:not(.siiInitialized) .footerContainer,:host:not(.siiInitialized) .headerContainer,:host:not(.siiInitialized) .miniHeaderContainer,:host:not(.siiInitialized) .pc_container,:host:not(.siiInitialized) .pc_container ::ng-deep{visibility:hidden!important}:host:not(.siiInitialized) ::ng-deep .pf_content{display:none}.containerbackground{position:absolute;width:100%;height:100%;background-size:cover;background-repeat:no-repeat;background-image:linear-gradient(-186.39deg,#090909 -7.89%,#161721 26.77%,#000 59.41%,#323551 94.42%);background-attachment:fixed}@media screen and (max-width: 576px){:host .ptContainer,:host .pctContainer,:host .footerContainer,:host .miniHeaderContainer,:host ::ng-deep .pc-toolbars{background-image:none!important;-webkit-backdrop-filter:blur(12px) brightness(.75)!important;backdrop-filter:blur(12px) brightness(.75)!important}}:host::ng-deep sii-toolbar{z-index:804}.ptContainer{position:fixed;top:0;width:calc(100% - var(--safe-area-inset-right) - var(--safe-area-inset-left));background-size:cover;background-repeat:no-repeat;background-color:#2a2b38;background-attachment:fixed;z-index:5}.pctContainer{position:fixed;top:var(--toolbarHeight);width:calc(100% - var(--safe-area-inset-right) - var(--safe-area-inset-left));background-size:cover;background-repeat:no-repeat;background-image:linear-gradient(-186.39deg,#090909 -7.89%,#161721 26.77%,#000 59.41%,#323551 94.42%);background-attachment:fixed;z-index:2}.footerContainer{position:absolute;bottom:0;left:0;width:100%;background-size:cover;background-repeat:no-repeat;background-image:linear-gradient(-186.39deg,#090909 -7.89%,#161721 26.77%,#000 59.41%,#323551 94.42%);background-attachment:fixed;z-index:2}.headerContainer{width:100%;background-size:cover;background-repeat:no-repeat;background-image:linear-gradient(-186.39deg,#090909 -7.89%,#161721 26.77%,#000 59.41%,#323551 94.42%);background-attachment:fixed;z-index:1}.miniHeaderContainer{position:fixed;z-index:2;background-size:cover;background-repeat:no-repeat;background-image:linear-gradient(-186.39deg,#090909 -7.89%,#161721 26.77%,#000 59.41%,#323551 94.42%);background-attachment:fixed;width:100%}.pc_container{display:flex}.pc_container .pageDetailContentBox{position:sticky;z-index:4}.pc_container .pageDetailContentBox ::ng-deep sii-page-detail{overscroll-behavior:contain;overflow:auto;height:100%}.pc_container .pageFilterContentBox{position:sticky;z-index:3}.pc_container .pageFilterContentBox ::ng-deep sii-page-filters{height:100%}:host.hiddenSiiToolbar::ng-deep sii-toolbar,:host::ng-deep sii-page-content-toolbar.hiddenToolbar{display:none}:host::ng-deep>.pctContainer sii-page-content-toolbar .pct_container_filterButton{display:none}:host .pctContainer::ng-deep sii-page-content-toolbar .pct_container{margin:0 auto;width:100%}.pc_container{width:100%;margin-left:auto;margin-right:auto}@media screen and (min-width: 1440px){:host .pctContainer::ng-deep sii-page-content-toolbar .pct_container,.pc_container{width:1320px}}@media screen and (min-width: 1600px){:host .pctContainer::ng-deep sii-page-content-toolbar .pct_container,.pc_container{width:1450px}}@media screen and (min-width: 1920px){:host .pctContainer::ng-deep sii-page-content-toolbar .pct_container,.pc_container{width:1610px}}:host::ng-deep [siipagefooter]{z-index:0;display:block}:host::ng-deep .pc-body{margin-bottom:var(--footerHeight)}\n"] }]
        }], ctorParameters: () => [{ type: i0.ElementRef }, { type: i0.ChangeDetectorRef }, { type: i1.DomSanitizer }, { type: i0.NgZone }], propDecorators: { clickOutsideDetail: [{
                type: Output
            }], toggleFilterPanel: [{
                type: Output
            }], autoHiddenToolbar: [{
                type: Input
            }], scrollerRef: [{
                type: Input
            }], backgroundImgUrl: [{
                type: Input
            }], hideBackgroundImg: [{
                type: Input
            }], backgroundClass: [{
                type: Input
            }], toolbarHeight: [{
                type: HostBinding,
                args: ['style.--toolbarHeight']
            }], pageContentToolbarsContainerHeightVal: [{
                type: HostBinding,
                args: ['style.--pageContentToolbarsContainerHeight']
            }], fixedToolbarHeight: [{
                type: HostBinding,
                args: ['style.--fixedToolbarHeight']
            }], footerHeight: [{
                type: HostBinding,
                args: ['style.--footerHeight']
            }], headeHeight: [{
                type: HostBinding,
                args: ['style.--headerHeight']
            }], filterHoverMask: [{
                type: ViewChild,
                args: ['FILTERHOVERMASK']
            }], detailHoverMask: [{
                type: ViewChild,
                args: ['DETAILHOVERMASK']
            }], pageFiltersComponent: [{
                type: ContentChild,
                args: [PageFiltersComponent]
            }], pageDetailComponent: [{
                type: ContentChild,
                args: [PageDetailComponent]
            }], pageContentComponent: [{
                type: ContentChild,
                args: [PageContentComponent]
            }], pageContentToolbarComponent: [{
                type: ContentChildren,
                args: [PageContentToolbarComponent, { descendants: true }]
            }], toolbarComponent: [{
                type: ContentChild,
                args: [ToolbarComponent]
            }], footerComponent: [{
                type: ContentChild,
                args: [PageFooterDirective]
            }], ptContainer: [{
                type: ViewChild,
                args: ['ptContainer', { static: false }]
            }], pctContainer: [{
                type: ViewChild,
                args: ['pctContainer', { static: false }]
            }], footerContainer: [{
                type: ViewChild,
                args: ['footerContainer', { static: false }]
            }], headerContainer: [{
                type: ViewChild,
                args: ['headerContainer', { static: false }]
            }], miniHeaderContainer: [{
                type: ViewChild,
                args: ['miniHeaderContainer', { static: false }]
            }], hiddenSiiToolbar: [{
                type: HostBinding,
                args: ['class.hiddenSiiToolbar']
            }], siiPageScrolled: [{
                type: HostBinding,
                args: ['class.siiPageScrolled']
            }], initialized: [{
                type: HostBinding,
                args: ['class.siiInitialized']
            }], onResize: [{
                type: HostListener,
                args: ['window:resize', ['$event']]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnZS1jb250YWluZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvc2lpLXRvb2xraXQvc3JjL2xpYi9jb21wb25lbnRzL3BhZ2UtY29udGFpbmVyL3BhZ2UtY29udGFpbmVyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3NpaS10b29sa2l0L3NyYy9saWIvY29tcG9uZW50cy9wYWdlLWNvbnRhaW5lci9wYWdlLWNvbnRhaW5lci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQW9DLFNBQVMsRUFBRSxZQUFZLEVBQUUsZUFBZSxFQUFjLFlBQVksRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFFN0ksTUFBTSxFQUE0QixTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFckUsT0FBTyxFQUFFLGVBQWUsRUFBVyxNQUFNLE1BQU0sQ0FBQztBQUVoRCxPQUFPLEVBQUUsMkJBQTJCLEVBQUUsTUFBTSxvRkFBb0YsQ0FBQztBQUNqSSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUNoRSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSx1Q0FBdUMsQ0FBQztBQUM3RSxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUMxRSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSx1Q0FBdUMsQ0FBQztBQUM3RSxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUMxRSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSw2Q0FBNkMsQ0FBQztBQUNyRixPQUFPLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3JELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHdCQUF3QixDQUFDOzs7QUFjM0QsTUFBTSxP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UCxZQUFZO3VCQUFDLGVBQWUsRUFBRSxDQUFDLFFBQVEsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFmdGVyVmlld0luaXQsIENoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnQsIENvbnRlbnRDaGlsZCwgQ29udGVudENoaWxkcmVuLCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIEhvc3RCaW5kaW5nLCBIb3N0TGlzdGVuZXIsIElucHV0LCBOZ1pvbmUsIE9uQ2hhbmdlcyxcclxuICBPbkRlc3Ryb3ksXHJcbiAgT3V0cHV0LCBRdWVyeUxpc3QsIFNpbXBsZUNoYW5nZXMsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBEb21TYW5pdGl6ZXIgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJztcclxuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IGRlYm91bmNlVGltZSwgZGlzdGluY3RVbnRpbENoYW5nZWQgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IFBhZ2VDb250ZW50VG9vbGJhckNvbXBvbmVudCB9IGZyb20gJy4uL3BhZ2UtY29udGFpbmVyL3BhZ2UtY29udGVudC9wYWdlLWNvbnRlbnQtdG9vbGJhci9wYWdlLWNvbnRlbnQtdG9vbGJhci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBUb29sYmFyQ29tcG9uZW50IH0gZnJvbSAnLi4vdG9vbGJhci90b29sYmFyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFBhZ2VDb250ZW50Q29tcG9uZW50IH0gZnJvbSAnLi9wYWdlLWNvbnRlbnQvcGFnZS1jb250ZW50LmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFBhZ2VEZXRhaWxDb21wb25lbnQgfSBmcm9tICcuL3BhZ2UtZGV0YWlsL3BhZ2UtZGV0YWlsLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFBhZ2VGaWx0ZXJzQ29tcG9uZW50IH0gZnJvbSAnLi9wYWdlLWZpbHRlcnMvcGFnZS1maWx0ZXJzLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFBhZ2VGb290ZXJEaXJlY3RpdmUgfSBmcm9tICcuL3BhZ2UtZm9vdGVyL3BhZ2UtZm9vdGVyLmRpcmVjdGl2ZSc7XHJcbmltcG9ydCB7IFBhZ2VIb3Zlck1hc2tDb21wb25lbnQgfSBmcm9tICcuL3BhZ2UtaG92ZXItbWFzay9wYWdlLWhvdmVyLW1hc2suY29tcG9uZW50JztcclxuaW1wb3J0IHsgTmdDbGFzcywgQXN5bmNQaXBlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuaW1wb3J0IHsgQ2RrT2JzZXJ2ZUNvbnRlbnQgfSBmcm9tICdAYW5ndWxhci9jZGsvb2JzZXJ2ZXJzJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdzaWktcGFnZS1jb250YWluZXInLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL3BhZ2UtY29udGFpbmVyLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL3BhZ2UtY29udGFpbmVyLmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgICBzdGFuZGFsb25lOiB0cnVlLFxyXG4gICAgaW1wb3J0czogW1xyXG4gICAgICAgIENka09ic2VydmVDb250ZW50LFxyXG4gICAgICAgIE5nQ2xhc3MsXHJcbiAgICAgICAgUGFnZUhvdmVyTWFza0NvbXBvbmVudCxcclxuICAgICAgICBBc3luY1BpcGUsXHJcbiAgICBdLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgU2lpUGFnZUNvbnRhaW5lckNvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIE9uQ2hhbmdlcyAsIE9uRGVzdHJveSB7XHJcbiBAT3V0cHV0KCkgY2xpY2tPdXRzaWRlRGV0YWlsID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gQE91dHB1dCgpIHRvZ2dsZUZpbHRlclBhbmVsID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gQElucHV0KCkgYXV0b0hpZGRlblRvb2xiYXIgPSB0cnVlO1xyXG4gQElucHV0KCkgc2Nyb2xsZXJSZWY6IEhUTUxJbnB1dEVsZW1lbnQgfCBhbnkgO1xyXG5cclxuIEBJbnB1dCgpIGJhY2tncm91bmRJbWdVcmwgPSAnYXNzZXRzL2ltYWdlcy9iZy1lbmcuanBnJyA7XHJcbiBASW5wdXQoKSBoaWRlQmFja2dyb3VuZEltZyA9IGZhbHNlO1xyXG4gQElucHV0KCkgYmFja2dyb3VuZENsYXNzOiBhbnk7XHJcblxyXG4gQEhvc3RCaW5kaW5nKCdzdHlsZS4tLXRvb2xiYXJIZWlnaHQnKSAgZ2V0IHRvb2xiYXJIZWlnaHQoKXsgcmV0dXJuIHRoaXMucGFnZVRvb2xiYXJDb250YWluZXJIZWlnaHRTdWJqLnZhbHVlICsgJ3B4JzsgfVxyXG4gQEhvc3RCaW5kaW5nKCdzdHlsZS4tLXBhZ2VDb250ZW50VG9vbGJhcnNDb250YWluZXJIZWlnaHQnKSAgZ2V0IHBhZ2VDb250ZW50VG9vbGJhcnNDb250YWluZXJIZWlnaHRWYWwoKXsgcmV0dXJuIHRoaXMucGFnZUNvbnRlbnRUb29sYmFyc0NvbnRhaW5lckhlaWdodFN1YmoudmFsdWUgKyAncHgnOyB9XHJcbiBASG9zdEJpbmRpbmcoJ3N0eWxlLi0tZml4ZWRUb29sYmFySGVpZ2h0JykgIGdldCBmaXhlZFRvb2xiYXJIZWlnaHQoKXsgcmV0dXJuIHRoaXMucGFnZUZpeGVkVG9vbGJhckNvbnRhaW5lckhlaWdodFN1YmoudmFsdWUgKyAncHgnOyB9XHJcbiBASG9zdEJpbmRpbmcoJ3N0eWxlLi0tZm9vdGVySGVpZ2h0JykgZ2V0IGZvb3RlckhlaWdodCgpeyByZXR1cm4gdGhpcy5wYWdlRm9vdGVyQ29udGFpbmVySGVpZ2h0U3Viai52YWx1ZSArICdweCc7IH1cclxuIEBIb3N0QmluZGluZygnc3R5bGUuLS1oZWFkZXJIZWlnaHQnKSBnZXQgaGVhZGVIZWlnaHQoKXsgcmV0dXJuICggdGhpcy5zaG93TWluaUhlYWRlciA/IHRoaXMucGFnZU1pbmlIZWFkZXJDb250YWluZXJIZWlnaHRTdWJqLnZhbHVlIDogdGhpcy5wYWdlSGVhZGVyQ29udGFpbmVyVmlzaWJsZUhlaWdodFN1YmoudmFsdWUpICsgJ3B4JzsgfVxyXG5cclxuXHJcbiBsYXN0VG9vbGJhclZpc2liaWxpdHlDaGFuZ2VUaW1lID0gMDtcclxuXHJcbiByZWFsU2Nyb2xsZXJSZWY7XHJcbiBAVmlld0NoaWxkKCdGSUxURVJIT1ZFUk1BU0snKSBwcml2YXRlIGZpbHRlckhvdmVyTWFzazogUGFnZUhvdmVyTWFza0NvbXBvbmVudDtcclxuIEBWaWV3Q2hpbGQoJ0RFVEFJTEhPVkVSTUFTSycpIHByaXZhdGUgZGV0YWlsSG92ZXJNYXNrOiBQYWdlSG92ZXJNYXNrQ29tcG9uZW50O1xyXG5cclxuIEBDb250ZW50Q2hpbGQoUGFnZUZpbHRlcnNDb21wb25lbnQpIHByaXZhdGUgcGFnZUZpbHRlcnNDb21wb25lbnQ6IFBhZ2VGaWx0ZXJzQ29tcG9uZW50O1xyXG4gQENvbnRlbnRDaGlsZChQYWdlRGV0YWlsQ29tcG9uZW50KSBwcml2YXRlIHBhZ2VEZXRhaWxDb21wb25lbnQ6IFBhZ2VEZXRhaWxDb21wb25lbnQ7XHJcbiBAQ29udGVudENoaWxkKFBhZ2VDb250ZW50Q29tcG9uZW50KSBwcml2YXRlIHBhZ2VDb250ZW50Q29tcG9uZW50OiBQYWdlQ29udGVudENvbXBvbmVudDtcclxuIEBDb250ZW50Q2hpbGRyZW4oUGFnZUNvbnRlbnRUb29sYmFyQ29tcG9uZW50LCB7ZGVzY2VuZGFudHM6IHRydWV9KSBwcml2YXRlIHBhZ2VDb250ZW50VG9vbGJhckNvbXBvbmVudDogUXVlcnlMaXN0PFBhZ2VDb250ZW50VG9vbGJhckNvbXBvbmVudD47XHJcblxyXG4gQENvbnRlbnRDaGlsZChUb29sYmFyQ29tcG9uZW50KSBwcml2YXRlIHRvb2xiYXJDb21wb25lbnQ6IFRvb2xiYXJDb21wb25lbnQ7XHJcbiBAQ29udGVudENoaWxkKFBhZ2VGb290ZXJEaXJlY3RpdmUpIHByaXZhdGUgZm9vdGVyQ29tcG9uZW50OiBQYWdlRm9vdGVyRGlyZWN0aXZlO1xyXG5cclxuIEBWaWV3Q2hpbGQoJ3B0Q29udGFpbmVyJywgeyBzdGF0aWM6IGZhbHNlIH0pICBwdENvbnRhaW5lcjogRWxlbWVudFJlZjtcclxuIEBWaWV3Q2hpbGQoJ3BjdENvbnRhaW5lcicsIHsgc3RhdGljOiBmYWxzZSB9KSAgcGN0Q29udGFpbmVyOiBFbGVtZW50UmVmO1xyXG4gQFZpZXdDaGlsZCgnZm9vdGVyQ29udGFpbmVyJywgeyBzdGF0aWM6IGZhbHNlIH0pICBmb290ZXJDb250YWluZXI6IEVsZW1lbnRSZWY7XHJcbiBAVmlld0NoaWxkKCdoZWFkZXJDb250YWluZXInLCB7IHN0YXRpYzogZmFsc2UgfSkgIGhlYWRlckNvbnRhaW5lcjogRWxlbWVudFJlZjtcclxuIEBWaWV3Q2hpbGQoJ21pbmlIZWFkZXJDb250YWluZXInLCB7IHN0YXRpYzogZmFsc2UgfSkgIG1pbmlIZWFkZXJDb250YWluZXI6IEVsZW1lbnRSZWY7XHJcblxyXG4gQEhvc3RCaW5kaW5nKCdjbGFzcy5oaWRkZW5TaWlUb29sYmFyJykgaGlkZGVuU2lpVG9vbGJhciA9IGZhbHNlO1xyXG4gQEhvc3RCaW5kaW5nKCdjbGFzcy5zaWlQYWdlU2Nyb2xsZWQnKSAgc2lpUGFnZVNjcm9sbGVkID0gZmFsc2U7XHJcbi8vICBASG9zdEJpbmRpbmcoJ2NsYXNzLmhpZGRlbkhlYWRlcicpICBzaWlIaWRkZW5IZWFkZXIgPSBmYWxzZTtcclxuXHJcbi8vICBASG9zdEJpbmRpbmcoJ2NsYXNzLnNpaVBhZ2VTY3JvbGxlZCcpIGdldCBwYWdlU2Nyb2xsZWQoKXtcclxuLy8gICAgcmV0dXJuIHRoaXMucmVhbFNjcm9sbGVyUmVmICA9PT0gZG9jdW1lbnQgPyB0aGlzLnJlYWxTY3JvbGxlclJlZi5zY3JvbGxpbmdFbGVtZW50LnNjcm9sbFRvcCA+IDAgOiB0aGlzLnJlYWxTY3JvbGxlclJlZj8uc2Nyb2xsVG9wID4gMDsgfVxyXG4gQEhvc3RCaW5kaW5nKCdjbGFzcy5zaWlJbml0aWFsaXplZCcpICBpbml0aWFsaXplZCA9IGZhbHNlO1xyXG5cclxuXHJcbiBwYWdlVG9vbGJhckNvbnRhaW5lckhlaWdodFN1YmogPSBuZXcgQmVoYXZpb3JTdWJqZWN0PG51bWJlcj4oMCk7XHJcbiBwYWdlVG9vbGJhckNvbnRhaW5lckhlaWdodCA9IHRoaXMucGFnZVRvb2xiYXJDb250YWluZXJIZWlnaHRTdWJqLmFzT2JzZXJ2YWJsZSgpO1xyXG4gcGFnZUZpeGVkVG9vbGJhckNvbnRhaW5lckhlaWdodFN1YmogPSBuZXcgQmVoYXZpb3JTdWJqZWN0PG51bWJlcj4oMCk7XHJcbiBwYWdlRml4ZWRUb29sYmFyQ29udGFpbmVySGVpZ2h0ID0gdGhpcy5wYWdlRml4ZWRUb29sYmFyQ29udGFpbmVySGVpZ2h0U3Viai5hc09ic2VydmFibGUoKTtcclxuXHJcbiBwYWdlQ29udGVudFRvb2xiYXJzQ29udGFpbmVySGVpZ2h0U3ViaiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8bnVtYmVyPigwKTtcclxuIHBhZ2VDb250ZW50VG9vbGJhcnNDb250YWluZXJIZWlnaHQgPSB0aGlzLnBhZ2VDb250ZW50VG9vbGJhcnNDb250YWluZXJIZWlnaHRTdWJqLmFzT2JzZXJ2YWJsZSgpO1xyXG4gcGFnZUZpeGVkQ29udGVudFRvb2xiYXJzQ29udGFpbmVySGVpZ2h0U3ViaiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8bnVtYmVyPigwKTtcclxuIHBhZ2VGaXhlZENvbnRlbnRUb29sYmFyc0NvbnRhaW5lckhlaWdodCA9IHRoaXMucGFnZUZpeGVkQ29udGVudFRvb2xiYXJzQ29udGFpbmVySGVpZ2h0U3Viai5hc09ic2VydmFibGUoKTtcclxuXHJcbiBwYWdlRm9vdGVyQ29udGFpbmVySGVpZ2h0U3ViaiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8bnVtYmVyPigwKTtcclxuIHBhZ2VGb290ZXJDb250YWluZXJIZWlnaHQgPSB0aGlzLnBhZ2VGb290ZXJDb250YWluZXJIZWlnaHRTdWJqLmFzT2JzZXJ2YWJsZSgpO1xyXG5cclxuIHBhZ2VIZWFkZXJDb250YWluZXJIZWlnaHRTdWJqID0gbmV3IEJlaGF2aW9yU3ViamVjdDxudW1iZXI+KDApO1xyXG4gcGFnZUhlYWRlckNvbnRhaW5lckhlaWdodCA9IHRoaXMucGFnZUhlYWRlckNvbnRhaW5lckhlaWdodFN1YmouYXNPYnNlcnZhYmxlKCk7XHJcblxyXG4gcGFnZU1pbmlIZWFkZXJDb250YWluZXJIZWlnaHRTdWJqID0gbmV3IEJlaGF2aW9yU3ViamVjdDxudW1iZXI+KDApO1xyXG4gcGFnZU1pbmlIZWFkZXJDb250YWluZXJIZWlnaHQgPSB0aGlzLnBhZ2VNaW5pSGVhZGVyQ29udGFpbmVySGVpZ2h0U3Viai5hc09ic2VydmFibGUoKTtcclxuXHJcbiBwYWdlRm9vdGVyQ29udGFpbmVyVmlzaWJsZUhlaWdodFN1YmogPSBuZXcgQmVoYXZpb3JTdWJqZWN0PG51bWJlcj4oMCk7XHJcbiBwYWdlRm9vdGVyQ29udGFpbmVyVmlzaWJsZUhlaWdodCA9IHRoaXMucGFnZUZvb3RlckNvbnRhaW5lclZpc2libGVIZWlnaHRTdWJqLmFzT2JzZXJ2YWJsZSgpO1xyXG5cclxuIHBhZ2VIZWFkZXJDb250YWluZXJWaXNpYmxlSGVpZ2h0U3ViaiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8bnVtYmVyPigwKTtcclxuIHBhZ2VIZWFkZXJDb250YWluZXJWaXNpYmxlSGVpZ2h0ID0gdGhpcy5wYWdlSGVhZGVyQ29udGFpbmVyVmlzaWJsZUhlaWdodFN1YmouYXNPYnNlcnZhYmxlKCk7XHJcblxyXG4gc2hvd01pbmlIZWFkZXI9ZmFsc2U7XHJcblxyXG4vLyAgcGFnZU1pbmlIZWFkZXJDb250YWluZXJWaXNpYmxlSGVpZ2h0U3ViaiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8bnVtYmVyPigwKTtcclxuLy8gIHBhZ2VNaW5pSGVhZGVyQ29udGFpbmVyVmlzaWJsZUhlaWdodCA9IHRoaXMucGFnZU1pbmlIZWFkZXJDb250YWluZXJWaXNpYmxlSGVpZ2h0U3Viai5hc09ic2VydmFibGUoKTtcclxuXHJcbiBwYWdlVG9vbGJhckNvbnRhaW5lck9ic2VydmVyO1xyXG4gcGFnZUNvbnRlbnRUb29sYmFyc0NvbnRhaW5lck9ic2VydmVyO1xyXG4gcGFnZUZvb3RlckNvbnRhaW5lck9ic2VydmVyO1xyXG4gcGFnZUhlYWRlckNvbnRhaW5lck9ic2VydmVyO1xyXG4gcGFnZU1pbmlIZWFkZXJDb250YWluZXJPYnNlcnZlcjtcclxuIHNjcm9sbGVyQ29udGFpbmVyT2JzZXJ2ZXI7XHJcbiBhZGRGb290ZXJTcGFjZSA9IGZhbHNlO1xyXG5cclxuIGlkOiBudW1iZXI7XHJcbiBsYXN0U2Nyb2xsVG9wID0gMDtcclxuXHJcblxyXG4gdXRpbHMgPSB7XHJcbiAgbGFzdHBjdGJJdGVtczogMFxyXG59O1xyXG5cclxuXHJcblxyXG4gc2Nyb2xsRnVuY3Rpb25SZWYgPSBmdW5jdGlvbiBzY3JvbGwoZSl7XHJcbiAgIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KXt0aGlzLnNob3dIaWRlVG9vbGJhcihlLnNyY0VsZW1lbnQgPT09IGRvY3VtZW50ID8gZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudCA6IGUuc3JjRWxlbWVudCk7IH1cclxuIH0uYmluZCh0aGlzKTtcclxuXHJcbiBASG9zdExpc3RlbmVyKCd3aW5kb3c6cmVzaXplJywgWyckZXZlbnQnXSlcclxuIG9uUmVzaXplKGV2ZW50KSB7XHJcbiAgIHRoaXMuZml4TGF5b3V0KCk7XHJcbiB9XHJcblxyXG5cclxuIGNvbnN0cnVjdG9yKHByaXZhdGUgZWw6IEVsZW1lbnRSZWYgLCBwcml2YXRlIHJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsIHB1YmxpYyBzYW5pdGl6ZXI6IERvbVNhbml0aXplciwgcHJpdmF0ZSB6b25lOiBOZ1pvbmUpIHtcclxuICAgdGhpcy5pZCA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XHJcblxyXG4gICB0aGlzLnBhZ2VGb290ZXJDb250YWluZXJPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcihlbnRyaWVzID0+IHtcclxuICAgICBjb25zdCBmaCA9IGVudHJpZXMucmVkdWNlKChhY2MsIGMpID0+IGFjYyArIGMuY29udGVudFJlY3QuaGVpZ2h0LCAwKSB8fCAwO1xyXG4gICAgIHRoaXMucGFnZUZvb3RlckNvbnRhaW5lckhlaWdodFN1YmoubmV4dChmaCk7XHJcbiAgICAgdGhpcy5jaGVja0Zvb3RlclZpc2liaWxpdHkodGhpcy5yZWFsU2Nyb2xsZXJSZWYgID09PSBkb2N1bWVudCA/IHRoaXMucmVhbFNjcm9sbGVyUmVmLnNjcm9sbGluZ0VsZW1lbnQgOiB0aGlzLnJlYWxTY3JvbGxlclJlZik7XHJcbiAgIC8vICB0aGlzLnBhZ2VUb29sYmFyc0NvbnRhaW5lckhlaWdodFN1YmoubmV4dChlbnRyaWVzWzBdLmNvbnRlbnRSZWN0LmhlaWdodCk7XHJcbiAgICB9KTtcclxuXHJcbiAgIHRoaXMucGFnZUhlYWRlckNvbnRhaW5lck9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKGVudHJpZXMgPT4ge1xyXG4gICAgIGNvbnN0IGZoID0gZW50cmllcy5yZWR1Y2UoKGFjYywgYykgPT4gYWNjICsgYy5jb250ZW50UmVjdC5oZWlnaHQsIDApIHx8IDA7XHJcbiAgICAgdGhpcy5wYWdlSGVhZGVyQ29udGFpbmVySGVpZ2h0U3Viai5uZXh0KGZoKTtcclxuICAgICB0aGlzLmNoZWNrSGVhZGVyVmlzaWJpbGl0eSh0aGlzLnJlYWxTY3JvbGxlclJlZiAgPT09IGRvY3VtZW50ID8gdGhpcy5yZWFsU2Nyb2xsZXJSZWYuc2Nyb2xsaW5nRWxlbWVudCA6IHRoaXMucmVhbFNjcm9sbGVyUmVmKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMucGFnZU1pbmlIZWFkZXJDb250YWluZXJPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcihlbnRyaWVzID0+IHtcclxuICAgICBjb25zdCBmaCA9IGVudHJpZXMucmVkdWNlKChhY2MsIGMpID0+IGFjYyArIGMuY29udGVudFJlY3QuaGVpZ2h0LCAwKSB8fCAwO1xyXG4gICAgIHRoaXMucGFnZU1pbmlIZWFkZXJDb250YWluZXJIZWlnaHRTdWJqLm5leHQoZmgpO1xyXG4gICAgfSk7XHJcblxyXG4gICB0aGlzLnBhZ2VUb29sYmFyQ29udGFpbmVyT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoZW50cmllcyA9PiB7XHJcbiAgICAgdGhpcy56b25lLnJ1bigoKSA9PiB7XHJcbiAgICAgICBjb25zdCB0aCA9IGVudHJpZXMucmVkdWNlKChhY2MsIGMpID0+IGFjYyArIGMuY29udGVudFJlY3QuaGVpZ2h0LCAwKTtcclxuICAgICAgIGlmICh0aCAhPT0gMCl7XHJcbiAgICAgICAgIHRoaXMucGFnZUZpeGVkVG9vbGJhckNvbnRhaW5lckhlaWdodFN1YmoubmV4dCh0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgdGhpcy5wYWdlVG9vbGJhckNvbnRhaW5lckhlaWdodFN1YmoubmV4dCh0aCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuICAgdGhpcy5wYWdlQ29udGVudFRvb2xiYXJzQ29udGFpbmVyT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoZW50cmllcyA9PiB7XHJcbiAgICAgdGhpcy56b25lLnJ1bigoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBjdGggPSBlbnRyaWVzLnJlZHVjZSgoYWNjLCBjKSA9PiBhY2MgKyBjLmNvbnRlbnRSZWN0LmhlaWdodCwgMCk7XHJcbiAgICAgIGlmIChwY3RoICE9PSAwICYmIHRoaXMudXRpbHMubGFzdHBjdGJJdGVtcyAhPT0gZW50cmllc1swXS50YXJnZXQuY2hpbGRFbGVtZW50Q291bnQpe1xyXG4gICAgICAgICB0aGlzLnBhZ2VGaXhlZENvbnRlbnRUb29sYmFyc0NvbnRhaW5lckhlaWdodFN1YmoubmV4dChwY3RoKTtcclxuICAgICAgICB9XHJcbiAgICAgIHRoaXMucGFnZUNvbnRlbnRUb29sYmFyc0NvbnRhaW5lckhlaWdodFN1YmoubmV4dChwY3RoKTtcclxuICAgICAgdGhpcy51dGlscy5sYXN0cGN0Ykl0ZW1zID0gZW50cmllc1swXS50YXJnZXQuY2hpbGRFbGVtZW50Q291bnQ7XHJcblxyXG5cclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuXHJcbiAgIHRoaXMuc2Nyb2xsZXJDb250YWluZXJPYnNlcnZlciAgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoZW50cmllcyA9PiB7XHJcbiAgICB0aGlzLnpvbmUucnVuKCgpID0+IHtcclxuICAgICAgdGhpcy5jaGVja0Zvb3RlclZpc2liaWxpdHkodGhpcy5yZWFsU2Nyb2xsZXJSZWYgID09PSBkb2N1bWVudCA/IHRoaXMucmVhbFNjcm9sbGVyUmVmLnNjcm9sbGluZ0VsZW1lbnQgOiB0aGlzLnJlYWxTY3JvbGxlclJlZik7XHJcbiAgICAgIHRoaXMuY2hlY2tIZWFkZXJWaXNpYmlsaXR5KHRoaXMucmVhbFNjcm9sbGVyUmVmICA9PT0gZG9jdW1lbnQgPyB0aGlzLnJlYWxTY3JvbGxlclJlZi5zY3JvbGxpbmdFbGVtZW50IDogdGhpcy5yZWFsU2Nyb2xsZXJSZWYpO1xyXG4gICB9KTtcclxuIH0pO1xyXG5cclxuXHJcblxyXG4gfVxyXG5cclxuXHJcbiBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgIGlmICghIWNoYW5nZXMuc2Nyb2xsZXJSZWYgJiYgIWNoYW5nZXMuc2Nyb2xsZXJSZWYuaXNGaXJzdENoYW5nZSgpXHJcbiAgICYmIGNoYW5nZXMuc2Nyb2xsZXJSZWYuY3VycmVudFZhbHVlICE9PSBjaGFuZ2VzLnNjcm9sbGVyUmVmLnByZXZpb3VzVmFsdWUgKXtcclxuICAgICBpZiAoISF0aGlzLnJlYWxTY3JvbGxlclJlZil7XHJcbiAgICAgICB0aGlzLnJlYWxTY3JvbGxlclJlZi5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLnNjcm9sbEZ1bmN0aW9uUmVmLCB0cnVlKTtcclxuICAgICB9XHJcbiAgICAgdGhpcy5pbml0U2Nyb2xsZXIoKTtcclxuICAgICBpZiAoISF0aGlzLnJlYWxTY3JvbGxlclJlZil7XHJcbiAgICAgICAvLyBzaW11b2xvIHVubyBzY3JvbGwgdmVyc28gbCdhbHRvIHBlciBmYXIgY29tcGFyaXJlIHNlIG5lY2Vzc2FyaW8gbGEgdG9vbGJhclxyXG4gICAgICAgdGhpcy5sYXN0U2Nyb2xsVG9wID0gdGhpcy5yZWFsU2Nyb2xsZXJSZWYuc2Nyb2xsVG9wICsgMTA7XHJcbiAgICAgICB0aGlzLnNob3dIaWRlVG9vbGJhcih0aGlzLnJlYWxTY3JvbGxlclJlZik7XHJcbiAgICAgfVxyXG4gIH1cclxuICAgaWYgKCEhY2hhbmdlcy5iYWNrZ3JvdW5kSW1nVXJsIHx8ICEhY2hhbmdlcy5oaWRlQmFja2dyb3VuZEltZyApe1xyXG4gICAgdGhpcy51cGRhdGVCZ0ltYWdlKCk7XHJcbiAgfVxyXG4gfVxyXG5cclxuIHVwZGF0ZUJnSW1hZ2UoKXtcclxuICBjb25zdCBiZyA9ICB0aGlzLmhpZGVCYWNrZ3JvdW5kSW1nID8gJycgOiBgdXJsKCR7dGhpcy5iYWNrZ3JvdW5kSW1nVXJsfSlgO1xyXG4gIHRoaXMuZWwubmF0aXZlRWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1iZ0ltYWdlVXJsJywgYmcpO1xyXG5bJ2NvbnRhaW5lcmJhY2tncm91bmQnLCAncHRDb250YWluZXInLCAncGN0Q29udGFpbmVyJywgJ2Zvb3RlckNvbnRhaW5lcicsJ2hlYWRlckNvbnRhaW5lcicsJ21pbmlIZWFkZXJDb250YWluZXInLCAncGMtdG9vbGJhcnMnXS5mb3JFYWNoKChlKSA9PiB7XHJcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgIHRoaXMuZWwubmF0aXZlRWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGUpKXtcclxuICAgICAgaXRlbS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBiZztcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiB9XHJcblxyXG4gbmdPbkRlc3Ryb3koKSB7XHJcbiAgdGhpcy5wYWdlVG9vbGJhckNvbnRhaW5lck9ic2VydmVyLnVub2JzZXJ2ZSh0aGlzLnB0Q29udGFpbmVyLm5hdGl2ZUVsZW1lbnQpO1xyXG4gIHRoaXMucGFnZUNvbnRlbnRUb29sYmFyc0NvbnRhaW5lck9ic2VydmVyLnVub2JzZXJ2ZSh0aGlzLnBjdENvbnRhaW5lci5uYXRpdmVFbGVtZW50KTtcclxuICB0aGlzLnBhZ2VGb290ZXJDb250YWluZXJPYnNlcnZlci51bm9ic2VydmUodGhpcy5mb290ZXJDb250YWluZXIubmF0aXZlRWxlbWVudCk7XHJcbiAgdGhpcy5wYWdlSGVhZGVyQ29udGFpbmVyT2JzZXJ2ZXIudW5vYnNlcnZlKHRoaXMuaGVhZGVyQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQpO1xyXG4gIHRoaXMucGFnZU1pbmlIZWFkZXJDb250YWluZXJPYnNlcnZlci51bm9ic2VydmUodGhpcy5taW5pSGVhZGVyQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQpO1xyXG4gIGlmICh0aGlzLnJlYWxTY3JvbGxlclJlZiAhPSBudWxsKXtcclxuICAgIHRoaXMuc2Nyb2xsZXJDb250YWluZXJPYnNlcnZlci51bm9ic2VydmUodGhpcy5yZWFsU2Nyb2xsZXJSZWYgID09PSBkb2N1bWVudCA/IHRoaXMucmVhbFNjcm9sbGVyUmVmLnNjcm9sbGluZ0VsZW1lbnQgOiB0aGlzLnJlYWxTY3JvbGxlclJlZik7XHJcbiAgfVxyXG4gIHRoaXMuZGlzYWJsZUNvbnRlbnRTY3JvbGwoZmFsc2UpO1xyXG4gIHRoaXMuaGlkZGVuU2lpVG9vbGJhciA9IGZhbHNlO1xyXG4gIHRoaXMuc2lpUGFnZVNjcm9sbGVkID0gZmFsc2U7XHJcblxyXG59XHJcblxyXG4gbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG4gIHRoaXMudXBkYXRlQmdJbWFnZSgpO1xyXG4gIHRoaXMucGFnZVRvb2xiYXJDb250YWluZXJPYnNlcnZlci5vYnNlcnZlKHRoaXMucHRDb250YWluZXIubmF0aXZlRWxlbWVudCk7XHJcbiAgdGhpcy5wYWdlQ29udGVudFRvb2xiYXJzQ29udGFpbmVyT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnBjdENvbnRhaW5lci5uYXRpdmVFbGVtZW50KTtcclxuICB0aGlzLnBhZ2VGb290ZXJDb250YWluZXJPYnNlcnZlci5vYnNlcnZlKHRoaXMuZm9vdGVyQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQpO1xyXG4gIHRoaXMucGFnZUhlYWRlckNvbnRhaW5lck9ic2VydmVyLm9ic2VydmUodGhpcy5oZWFkZXJDb250YWluZXIubmF0aXZlRWxlbWVudCk7XHJcbiAgdGhpcy5wYWdlTWluaUhlYWRlckNvbnRhaW5lck9ic2VydmVyLm9ic2VydmUodGhpcy5taW5pSGVhZGVyQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQpO1xyXG5cclxuXHJcbiAgaWYgKHRoaXMucGFnZUNvbnRlbnRUb29sYmFyQ29tcG9uZW50Lmxlbmd0aCA+IDAgJiYgdGhpcy5wYWdlRmlsdGVyc0NvbXBvbmVudCl7XHJcbiAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICB0aGlzLnBhZ2VDb250ZW50VG9vbGJhckNvbXBvbmVudC5mb3JFYWNoKGYgPT4ge1xyXG4gICAgICAgICBmLnRvZ2dsZUZpbHRlclBhbmVsUmVmID0gKCkgPT4ge3RoaXMudG9nZ2xlRmlsdGVyc1BhbmVsKCk7IH07XHJcbiAgICAgICAgIGYuZmlsdGVyUGFuZWxSZWYgPSB0aGlzLnBhZ2VGaWx0ZXJzQ29tcG9uZW50O1xyXG4gICAgICAgfSk7XHJcbiAgICAgfSk7XHJcbiAgIH1cclxuXHJcblxyXG4gIGlmICh0aGlzLnBhZ2VGaWx0ZXJzQ29tcG9uZW50KXtcclxuICAgIHRoaXMucGFnZUNvbnRlbnRUb29sYmFyQ29tcG9uZW50LmNoYW5nZXMuc3Vic2NyaWJlKChyZXMpPT57XHJcbiAgICAgIHJlcy5maWx0ZXIoaT0+IWkuZmlsdGVyUGFuZWxSZWYpLmZvckVhY2goZiA9PiB7XHJcbiAgICAgICAgZi50b2dnbGVGaWx0ZXJQYW5lbFJlZiA9ICgpID0+IHt0aGlzLnRvZ2dsZUZpbHRlcnNQYW5lbCgpOyB9O1xyXG4gICAgICAgIGYuZmlsdGVyUGFuZWxSZWYgPSB0aGlzLnBhZ2VGaWx0ZXJzQ29tcG9uZW50O1xyXG4gICAgICB9KTtcclxuICAgICB9KVxyXG5cclxuICAgICB0aGlzLnBhZ2VGaWx0ZXJzQ29tcG9uZW50LmNsb3NlRmlsdGVyUGFuZWxFbWl0dGVyLnN1YnNjcmliZSgoKSA9PiB0aGlzLnRvZ2dsZUZpbHRlcnNQYW5lbChmYWxzZSkpO1xyXG4gICB9XHJcblxyXG4gIHRoaXMuaW5pdFNjcm9sbGVyKCk7XHJcblxyXG4gIHRoaXMuZml4TGF5b3V0KHRydWUpO1xyXG4gIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xyXG4gICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICB9KTtcclxuXHJcbiB9XHJcblxyXG4gY2hlY2tGb290ZXJWaXNpYmlsaXR5KHNyY0VsZW1lbnQpe1xyXG4gIGlmKCFzcmNFbGVtZW50KXtyZXR1cm59XHJcbiAgY29uc3QgcHJldlZhbCA9IHRoaXMucGFnZUZvb3RlckNvbnRhaW5lclZpc2libGVIZWlnaHRTdWJqLnZhbHVlO1xyXG4gIHRoaXMucGFnZUZvb3RlckNvbnRhaW5lclZpc2libGVIZWlnaHRTdWJqLm5leHQodGhpcy5wb3NpdGl2ZU9yWmVybyhzcmNFbGVtZW50LmNsaWVudEhlaWdodCAtIHRoaXMuZm9vdGVyQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wKSk7XHJcbiAgY29uc3QgY3VyclZhbCA9IHRoaXMucGFnZUZvb3RlckNvbnRhaW5lclZpc2libGVIZWlnaHRTdWJqLnZhbHVlO1xyXG4gIGlmIChwcmV2VmFsICE9PSBjdXJyVmFsKXtcclxuICAgIHRoaXMuem9uZS5ydW4oKCkgPT4ge1xyXG4gICAgICB0aGlzLnJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgfVxyXG5cclxuIGNoZWNrSGVhZGVyVmlzaWJpbGl0eShzcmNFbGVtZW50KXsgXHJcbiAgY29uc3QgcHJldlZhbCA9IHRoaXMucGFnZUhlYWRlckNvbnRhaW5lclZpc2libGVIZWlnaHRTdWJqLnZhbHVlO1xyXG4gIHRoaXMucGFnZUhlYWRlckNvbnRhaW5lclZpc2libGVIZWlnaHRTdWJqLm5leHQoXHJcbiAgICB0aGlzLmhlYWRlckNvbnRhaW5lci5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodD09MD8gMCA6XHJcbiAgICB0aGlzLnBvc2l0aXZlT3JaZXJvKHRoaXMuaGVhZGVyQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tIC0gdGhpcy5wYWdlQ29udGVudFRvb2xiYXJzQ29udGFpbmVySGVpZ2h0U3Viai52YWx1ZSAtIHRoaXMucGFnZVRvb2xiYXJDb250YWluZXJIZWlnaHRTdWJqLnZhbHVlICkpO1xyXG5cclxuICBjb25zdCBjdXJyVmFsID0gdGhpcy5wYWdlSGVhZGVyQ29udGFpbmVyVmlzaWJsZUhlaWdodFN1YmoudmFsdWU7XHJcbiAgLy8gdGhpcy5zaWlIaWRkZW5IZWFkZXIgPSBjdXJyVmFsPT0wO1xyXG4gIGlmIChwcmV2VmFsICE9PSBjdXJyVmFsKXtcclxuICAgIHRoaXMuc2hvd01pbmlIZWFkZXI9IGN1cnJWYWw8PXRoaXMucGFnZU1pbmlIZWFkZXJDb250YWluZXJIZWlnaHRTdWJqLnZhbHVlXHJcbiAgICB0aGlzLnpvbmUucnVuKCgpID0+IHtcclxuICAgICAgdGhpcy5yZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIH1cclxuXHJcblxyXG5cclxucHJpdmF0ZSBwb3NpdGl2ZU9yWmVybyA9ICh2YWw6IG51bWJlcikgPT4gICB2YWwgPiAwID8gdmFsIDogMDtcclxuXHJcblxyXG4vLyAgaXNTY3JvbGxlZFRvQm90dG9tKHNyY0VsZW1lbnQpe1xyXG4vLyAgIC8vICBjb25zb2xlLmxvZyggTWF0aC5yb3VuZChzcmNFbGVtZW50LmNsaWVudEhlaWdodCArIHNyY0VsZW1lbnQuc2Nyb2xsVG9wKSAtIChzcmNFbGVtZW50LnNjcm9sbEhlaWdodCAtIHRoaXMucGFnZUZvb3RlckNvbnRhaW5lckhlaWdodFN1YmoudmFsdWUpICk7XHJcbi8vICAgIHJldHVybiBNYXRoLnJvdW5kKHNyY0VsZW1lbnQuY2xpZW50SGVpZ2h0ICsgc3JjRWxlbWVudC5zY3JvbGxUb3ApID49IChzcmNFbGVtZW50LnNjcm9sbEhlaWdodCAtIHRoaXMucGFnZUZvb3RlckNvbnRhaW5lckhlaWdodFN1YmoudmFsdWUpIDtcclxuLy8gIH1cclxuXHJcbiBzaG93SGlkZVRvb2xiYXIoc3JjRWxlbWVudCl7XHJcbiAgdGhpcy5zaWlQYWdlU2Nyb2xsZWQgPSBzcmNFbGVtZW50LnNjcm9sbFRvcCA+IDAgO1xyXG5cclxuXHJcbiAgaWYgKCAoKG5ldyBEYXRlKCkuZ2V0VGltZSgpKSAtIHRoaXMubGFzdFRvb2xiYXJWaXNpYmlsaXR5Q2hhbmdlVGltZSA8IDIwMCkgICYmXHJcbiAgICAgICAoKHRoaXMuc2lpUGFnZVNjcm9sbGVkICYmIHRoaXMuaGlkZGVuU2lpVG9vbGJhcikgfHwgKCF0aGlzLnNpaVBhZ2VTY3JvbGxlZCAmJiAhdGhpcy5oaWRkZW5TaWlUb29sYmFyKSkgKXtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgY29uc3Qgc3QgPSBzcmNFbGVtZW50LnNjcm9sbFRvcDtcclxuICBjb25zdCBzaWlUb29sYmFyID0gdGhpcy50b29sYmFyQ29tcG9uZW50ICE9PSB1bmRlZmluZWQgJiYgdGhpcy50b29sYmFyQ29tcG9uZW50LmF1dG9IaWRlID8gICB0aGlzLnRvb2xiYXJDb21wb25lbnQuZWwubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQgOiAwO1xyXG4gIGNvbnN0IHNpaUZvb3RlciA9IHRoaXMuZm9vdGVyQ29tcG9uZW50ICE9PSB1bmRlZmluZWQgPyAgIHRoaXMuZm9vdGVyQ29tcG9uZW50LmVsLm5hdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0IDogMDtcclxuICBsZXQgc2lpQ29udGVudFRvb2xiYXIgPSAwO1xyXG5cclxuICAgLy8gaWYgKHRoaXMucGFnZUNvbnRlbnRUb29sYmFyQ29tcG9uZW50Mi5sZW5ndGg+MCApe1xyXG4gIHRoaXMucGFnZUNvbnRlbnRUb29sYmFyQ29tcG9uZW50LmZpbHRlcih0ID0+IHQuYXV0b0hpZGUpLmZvckVhY2godCA9PiBzaWlDb250ZW50VG9vbGJhciArPSB0LmVsLm5hdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0KTtcclxuICAgICAvLyBzaWlDb250ZW50VG9vbGJhciA9IHRoaXMucGFnZUNvbnRlbnRUb29sYmFyQ29tcG9uZW50LmVsLm5hdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0O1xyXG4gICAvLyB9XHJcblxyXG4gIHRoaXMuY2hlY2tGb290ZXJWaXNpYmlsaXR5KHNyY0VsZW1lbnQpO1xyXG4gIHRoaXMuY2hlY2tIZWFkZXJWaXNpYmlsaXR5KHNyY0VsZW1lbnQpO1xyXG5cclxuICBjb25zdCB0b29sYmFySCA9IHNpaVRvb2xiYXIgKyBzaWlGb290ZXIgKyBzaWlDb250ZW50VG9vbGJhciArIDIwO1xyXG4gIGlmIChNYXRoLmFicyh0aGlzLmxhc3RTY3JvbGxUb3AgLSBzdCkgPD0gMTAgJiYgc3QgPiB0b29sYmFySCArIDUwKXtcclxuICAgICByZXR1cm47XHJcbiAgIH1cclxuICBsZXQgdG9vbGJhclZpc2liaWxpdHlDaGFuZ2UgPSBmYWxzZTtcclxuXHJcblxyXG4gIGlmIChzdCA+IHRoaXMubGFzdFNjcm9sbFRvcCAmJiBzdCA+IHRvb2xiYXJIICsgNTApe1xyXG4gICAgICAgICAvLyBzdG8gc2Nyb2xsYW5kbyB2ZXJzbyBpbCBiYXNzbyBkaSB1biBhbHRlenphIGFiYmFzdGFuemEgZ3JhbmRlIGRhIGNvbnRlbmVyZSBsYSB0b29sYmFyXHJcbiAgICAgICAgIGlmICggdGhpcy50b29sYmFyQ29tcG9uZW50ICYmIHRoaXMudG9vbGJhckNvbXBvbmVudC5hdXRvSGlkZSl7XHJcbiAgICAgICAgICAgaWYgKCF0aGlzLmhpZGRlblNpaVRvb2xiYXIpe1xyXG4gICAgICAgICAgICAgdG9vbGJhclZpc2liaWxpdHlDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgdGhpcy5oaWRkZW5TaWlUb29sYmFyID0gdHJ1ZTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgLy8gaWYgKHRoaXMucGFnZUNvbnRlbnRUb29sYmFyQ29tcG9uZW50ICYmIHRoaXMucGFnZUNvbnRlbnRUb29sYmFyQ29tcG9uZW50LmF1dG9IaWRlKXtcclxuICAgICAgICAgLy8gdGhpcy5wYWdlQ29udGVudFRvb2xiYXJDb21wb25lbnQuZmlsdGVyKHQgPT4gdC5hdXRvSGlkZSkuZm9yRWFjaCh0ID0+IHQuZWwubmF0aXZlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnKTtcclxuICAgICAgICAgdGhpcy5wYWdlQ29udGVudFRvb2xiYXJDb21wb25lbnQuZmlsdGVyKHQgPT4gdC5hdXRvSGlkZSkuZm9yRWFjaCh0ID0+IHtcclxuICAgICAgICAgICBpZiAoICF0LmVsLm5hdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW5Ub29sYmFyJykpe1xyXG4gICAgICAgICAgICAgdG9vbGJhclZpc2liaWxpdHlDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgdC5lbC5uYXRpdmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlblRvb2xiYXInKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAvLyB0aGlzLnBhZ2VDb250ZW50VG9vbGJhckNvbXBvbmVudC5lbC5uYXRpdmVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgIHRoaXMubGFzdFNjcm9sbFRvcCA9IHN0IC0gdG9vbGJhckg7XHJcblxyXG5cclxuICAgICAgIH0gIGVsc2UgaWYgKHN0IDwgdGhpcy5sYXN0U2Nyb2xsVG9wICYmIChzdCA8IDEwIHx8IHRoaXMubGFzdFNjcm9sbFRvcCAtIHN0ID4gNTApKSB7XHJcbiAgICAgICAgIC8vIHNvbm8gYXJyaXZhdG8gaW4gY2ltYSBvcHB1cmUgaG8gZmF0dG8gdW5vIHNjb2xsIG1vbHRvIHJhcGlkb1xyXG4gICAgICAgICAvLyBpZihzdCArIHRoaXMuZWwubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQgPCB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgaWYgKCB0aGlzLnRvb2xiYXJDb21wb25lbnQgJiYgdGhpcy50b29sYmFyQ29tcG9uZW50LmF1dG9IaWRlKXtcclxuICAgICAgICAgICAgIGlmICh0aGlzLmhpZGRlblNpaVRvb2xiYXIpe1xyXG4gICAgICAgICAgICAgICB0b29sYmFyVmlzaWJpbGl0eUNoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgIHRoaXMuaGlkZGVuU2lpVG9vbGJhciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgLy8gaWYgKHRoaXMudG9vbGJhckNvbXBvbmVudC5lbC5uYXRpdmVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyl7XHJcbiAgICAgICAgICAgICAvLyAgIHRvb2xiYXJWaXNpYmlsaXR5Q2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgIC8vICAgdGhpcy50b29sYmFyQ29tcG9uZW50LmVsLm5hdGl2ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgLy8gdGhpcy5wYWdlQ29udGVudFRvb2xiYXJDb21wb25lbnQuZmlsdGVyKHQgPT4gdC5hdXRvSGlkZSkuZm9yRWFjaCh0ID0+IHQuZWwubmF0aXZlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJycpO1xyXG5cclxuICAgICAgICAgICB0aGlzLnBhZ2VDb250ZW50VG9vbGJhckNvbXBvbmVudC5maWx0ZXIodCA9PiB0LmF1dG9IaWRlKS5mb3JFYWNoKHQgPT4ge1xyXG4gICAgICAgICAgICAgaWYgKCB0LmVsLm5hdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW5Ub29sYmFyJykpe1xyXG4gICAgICAgICAgICAgICB0b29sYmFyVmlzaWJpbGl0eUNoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgIHQuZWwubmF0aXZlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW5Ub29sYmFyJyk7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAvLyBpZiAodGhpcy5wYWdlQ29udGVudFRvb2xiYXJDb21wb25lbnQgJiYgdGhpcy5wYWdlQ29udGVudFRvb2xiYXJDb21wb25lbnQuYXV0b0hpZGUpe1xyXG4gICAgICAgICAgICAgLy8gICB0aGlzLnBhZ2VDb250ZW50VG9vbGJhckNvbXBvbmVudC5lbC5uYXRpdmVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICB0aGlzLmxhc3RTY3JvbGxUb3AgPSBzdDtcclxuICAgICAgICAgICAgIC8vIH1cclxuXHJcbiAgICAgfWVsc2V7XHJcbiAgICAgICB0aGlzLmxhc3RTY3JvbGxUb3AgPSBzdDtcclxuICAgICB9XHJcblxyXG4gIGlmICh0b29sYmFyVmlzaWJpbGl0eUNoYW5nZSl7XHJcbiAgICAgICB0aGlzLmVtaXRUb29sYmFySGlkZUV2ZW50KCk7XHJcbiAgICAgfVxyXG5cclxuIH1cclxuXHJcbiBlbWl0VG9vbGJhckhpZGVFdmVudCgpe1xyXG4gICB0aGlzLmxhc3RUb29sYmFyVmlzaWJpbGl0eUNoYW5nZVRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuIH1cclxuXHJcbiBpbml0U2Nyb2xsZXIoKXtcclxuICAgaWYgKCh0aGlzLnRvb2xiYXJDb21wb25lbnQgfHwgdGhpcy5wYWdlQ29udGVudFRvb2xiYXJDb21wb25lbnQubGVuZ3RoID4gMCkgJiYgdGhpcy5hdXRvSGlkZGVuVG9vbGJhciA9PT0gdHJ1ZSl7XHJcbiAgICAgaWYgKHRoaXMuc2Nyb2xsZXJSZWYgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnNjcm9sbGVyUmVmLmFkZEV2ZW50TGlzdGVuZXIgIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAvLyBsJ2VsZW1lbnRvIHB1w7IgZXNzZXJlIHNjb2xsYXRvXHJcbiAgICAgICB0aGlzLnJlYWxTY3JvbGxlclJlZiA9IHRoaXMuc2Nyb2xsZXJSZWY7XHJcbiAgICAgfWVsc2UgaWYgKHRoaXMuc2Nyb2xsZXJSZWYgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnNjcm9sbGVyUmVmLmFkZEV2ZW50TGlzdGVuZXIgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgKHRoaXMuc2Nyb2xsZXJSZWYgYXMgYW55KS5zY3JvbGxlckVsICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgdGhpcy5yZWFsU2Nyb2xsZXJSZWYgPSAodGhpcy5zY3JvbGxlclJlZiBhcyBhbnkpLnNjcm9sbGVyRWw7XHJcbiAgICAgfWVsc2V7XHJcbiAgICAgICAvLyB0aGlzLnJlYWxTY3JvbGxlclJlZiA9IHRoaXMucGFnZUNvbnRlbnRDb21wb25lbnQuZWwubmF0aXZlRWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwYy1ib2R5JylbMF07XHJcbiAgICAgICB0aGlzLnJlYWxTY3JvbGxlclJlZiA9IGRvY3VtZW50O1xyXG4gICAgIH1cclxuICAgICB0aGlzLnN1YnNjcmliZVNjcm9sbEludGVyY2VwdG9yKCk7XHJcbiAgICAgdGhpcy5zY3JvbGxlckNvbnRhaW5lck9ic2VydmVyLm9ic2VydmUodGhpcy5yZWFsU2Nyb2xsZXJSZWYgID09PSBkb2N1bWVudCA/IHRoaXMucmVhbFNjcm9sbGVyUmVmLnNjcm9sbGluZ0VsZW1lbnQgOiB0aGlzLnJlYWxTY3JvbGxlclJlZik7XHJcbiAgICAgdGhpcy5jaGVja0Zvb3RlclZpc2liaWxpdHkodGhpcy5yZWFsU2Nyb2xsZXJSZWYgID09PSBkb2N1bWVudCA/IHRoaXMucmVhbFNjcm9sbGVyUmVmLnNjcm9sbGluZ0VsZW1lbnQgOiB0aGlzLnJlYWxTY3JvbGxlclJlZik7XHJcbiAgICAgdGhpcy5jaGVja0hlYWRlclZpc2liaWxpdHkodGhpcy5yZWFsU2Nyb2xsZXJSZWYgID09PSBkb2N1bWVudCA/IHRoaXMucmVhbFNjcm9sbGVyUmVmLnNjcm9sbGluZ0VsZW1lbnQgOiB0aGlzLnJlYWxTY3JvbGxlclJlZik7XHJcbiAgICAgdGhpcy5lbWl0VG9vbGJhckhpZGVFdmVudCgpO1xyXG5cclxuICAgfVxyXG5cclxuIH1cclxuXHJcblxyXG4gc3Vic2NyaWJlU2Nyb2xsSW50ZXJjZXB0b3IoKXtcclxuICAgaWYgKHRoaXMucGFnZUNvbnRlbnRDb21wb25lbnQpe1xyXG4gICAgIHRoaXMucmVhbFNjcm9sbGVyUmVmLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsRnVuY3Rpb25SZWYsIHtjYXB0dXJlOiB0cnVlLCBwYXNzaXZlOiB0cnVlfSk7XHJcbiAgIH1cclxuIH1cclxuXHJcbiBwdWJsaWMgdG9nZ2xlRmlsdGVyc1BhbmVsKGZvcmNlU3RhdHVzVmlzaWJsZT86IGJvb2xlYW4pe1xyXG4gICBpZiAodGhpcy5wYWdlRmlsdGVyc0NvbXBvbmVudCl7XHJcbiAgICAgaWYgKGZvcmNlU3RhdHVzVmlzaWJsZSAhPSBudWxsKXtcclxuICAgICAgIGlmIChmb3JjZVN0YXR1c1Zpc2libGUgJiYgdGhpcy5wYWdlRmlsdGVyc0NvbXBvbmVudC5kaXNwbGF5ICE9PSAnYmxvY2snKXtcclxuICAgICAgICAgdGhpcy5zaG93RmlsdGVyc1BhbmVsKCk7XHJcbiAgICAgICB9ZWxzZSBpZiAoIWZvcmNlU3RhdHVzVmlzaWJsZSAmJiB0aGlzLnBhZ2VGaWx0ZXJzQ29tcG9uZW50LmRpc3BsYXkgPT09ICdibG9jaycpe1xyXG4gICAgICAgICB0aGlzLmhpZGVGaWx0ZXJzUGFuZWwoKTtcclxuICAgICAgIH1cclxuICAgICB9ZWxzZSB7XHJcbiAgICAgICBpZiAodGhpcy5wYWdlRmlsdGVyc0NvbXBvbmVudC5kaXNwbGF5ID09PSAnYmxvY2snKXtcclxuICAgICAgICAgdGhpcy5oaWRlRmlsdGVyc1BhbmVsKCk7XHJcbiAgICAgICB9ZWxzZXtcclxuICAgICAgICAgdGhpcy5zaG93RmlsdGVyc1BhbmVsKCk7XHJcbiAgICAgICB9XHJcbiAgICAgfVxyXG4gICB9XHJcbiB9XHJcblxyXG5cclxuIHB1YmxpYyB0b2dnbGVEZXRhaWxQYW5lbChmb3JjZVN0YXR1c1Zpc2libGU/OiBib29sZWFuKXtcclxuICAgaWYgKHRoaXMucGFnZURldGFpbENvbXBvbmVudCl7XHJcbiAgICAgaWYgKGZvcmNlU3RhdHVzVmlzaWJsZSAhPSBudWxsKXtcclxuICAgICAgIGlmIChmb3JjZVN0YXR1c1Zpc2libGUgJiYgdGhpcy5wYWdlRGV0YWlsQ29tcG9uZW50LmRpc3BsYXkgIT09ICdibG9jaycpe1xyXG4gICAgICAgICB0aGlzLnNob3dEZXRhaWxQYW5lbCgpO1xyXG4gICAgICAgfWVsc2UgaWYgKCFmb3JjZVN0YXR1c1Zpc2libGUgJiYgdGhpcy5wYWdlRGV0YWlsQ29tcG9uZW50LmRpc3BsYXkgPT09ICdibG9jaycpe1xyXG4gICAgICAgICB0aGlzLmhpZGVEZXRhaWxQYW5lbCgpO1xyXG4gICAgICAgfVxyXG4gICAgIH1lbHNle1xyXG4gICAgICAgaWYgKCB0aGlzLnBhZ2VEZXRhaWxDb21wb25lbnQuZGlzcGxheSA9PT0gJ2Jsb2NrJyl7XHJcbiAgICAgICAgIHRoaXMuaGlkZURldGFpbFBhbmVsKCk7XHJcbiAgICAgICB9ZWxzZXtcclxuICAgICAgICAgdGhpcy5zaG93RGV0YWlsUGFuZWwoKTtcclxuICAgICAgIH1cclxuICAgICB9XHJcbiAgIH1cclxuIH1cclxuXHJcbiBwcml2YXRlIGZpeExheW91dChpc0luaXQ9IGZhbHNlKXtcclxuICAgaWYgKHRoaXMucGFnZURldGFpbENvbXBvbmVudCAmJiB0aGlzLnBhZ2VEZXRhaWxDb21wb25lbnQuZGlzcGxheSAhPT0gJ25vbmUnKXtcclxuICAgICB0aGlzLnNob3dEZXRhaWxQYW5lbCgpO1xyXG4gICB9XHJcblxyXG5cclxuICAgaWYgKHRoaXMucGFnZUZpbHRlcnNDb21wb25lbnQpe1xyXG4gICAgICBpZiAoaXNJbml0KXtcclxuICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcclxuICAgICAgIGNvbnN0IHNwYWNlQXZhaWxhYmxlID0gdGhpcy5wYWdlQ29udGVudENvbXBvbmVudC5nZXRNaW5XaWR0aEluUHgoKSArIHRoaXMucGFnZUZpbHRlcnNDb21wb25lbnQuZWwubmF0aXZlRWxlbWVudC5jbGllbnRXaWR0aCA8IHRoaXMuZWwubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcclxuXHJcbiAgICAgICBpZiAoIXNwYWNlQXZhaWxhYmxlICYmIHRoaXMucGFnZUZpbHRlcnNDb21wb25lbnQuZGlzcGxheSAhPT0gJ25vbmUnKXtcclxuICAgICAgICAgLy8gaWwgcGFubmVsbG8gZGVpIGZpbHRyaSDDqCB2aXNpYmlsZSBtYSBub24gYyfDqCBzcGF6aW9cclxuICAgICAgICAgdGhpcy5oaWRlRmlsdGVyc1BhbmVsKCk7XHJcbiAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAodGhpcy5wYWdlRmlsdGVyc0NvbXBvbmVudC5kaXNwbGF5ICE9PSAnbm9uZScpe1xyXG4gICAgICAgICB0aGlzLnNob3dGaWx0ZXJzUGFuZWwoKTtcclxuICAgICAgIH1cclxuICAgIH1cclxuXHJcbiB9XHJcblxyXG5cclxuIHByaXZhdGUgc2hvd0RldGFpbFBhbmVsKCl7XHJcblxyXG4gICAvLyBkZWxldGUgJHRoaXMudXRpbHMuc3R5bGUuZGV0YWlsLmRpc3BsYXk7XHJcbiAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gdGhpcy5wYWdlRGV0YWlsQ29tcG9uZW50LmRpc3BsYXkgPSAnYmxvY2snKTtcclxuXHJcbiAgIC8vIGNvbnRyb2xsbyBjaGUgY2kgc2lhIGFiYmFzdGFuemEgc3BhemlvIHBlciBtb3N0cmFyZSBzaWEgaWwgcGFubmVsbG8gZGVpIGZpbHRyaSBlIHNpYSBpbCBwYW5uZWxsbyBkZWwgZGV0dGFnbGlvXHJcbiAgIGNvbnN0IGNvbXBXID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoO1xyXG5cclxuICAgLy8gbGFyZ2hlenphIGF0dHVhbG1lbnRlIHZpc2liaWxlXHJcbiAgIGNvbnN0IGZDdyA9IHRoaXMucGFnZUZpbHRlcnNDb21wb25lbnQ/LmVsLm5hdGl2ZUVsZW1lbnQuY2xpZW50V2lkdGggfHwgMDtcclxuICAgbGV0IGNDdyA9IHRoaXMucGFnZUNvbnRlbnRDb21wb25lbnQuZWwubmF0aXZlRWxlbWVudC5jbGllbnRXaWR0aDtcclxuICAgY29uc3QgZEN3ID0gdGhpcy5wYWdlRGV0YWlsQ29tcG9uZW50LmVsLm5hdGl2ZUVsZW1lbnQuY2xpZW50V2lkdGg7XHJcblxyXG4gICAvLyAkdGhpcy51dGlscy5jb21wb25lbnRzLmRldGFpbFBhbmVsLnJlbW92ZUNsYXNzKFwib2RjSG92ZXJGdWxsU2NyZWVuXCIpOy8vcmltdW92byBzZSBwcmVzZW50ZVxyXG4gICB0aGlzLnBhZ2VEZXRhaWxDb21wb25lbnQuaG92ZXJGdWxsU2NyZWVuKGZhbHNlKTtcclxuXHJcbiAgIC8vIGxhcmdoZXp6YSBlZmZldHRpdmEgcXVhbmRvIGlsIHBhbm5lbGxvIGRlbCBkZXR0YWdsaW8gw6ggdmlzaWJpbGVcclxuICAgY29uc3QgZHcgPSB0aGlzLnBhZ2VEZXRhaWxDb21wb25lbnQuZ2V0UmVhbFdpZHRoKCk7XHJcbiAgIGNvbnN0IGN3ID0gdGhpcy5wYWdlQ29udGVudENvbXBvbmVudC5nZXRNaW5XaWR0aEluUHgoKTtcclxuXHJcbiAvLyBwYW5uZWxsbyBkZWkgZmlsdHJpIGFwZXJ0byBlIGxhcmdoZXp6YSBkZXR0YWdsaW8gZGEgdmlzaWJpbGUgbWFnZ2lvcmUgZGVsbGEgZmluZXN0cmEgPT4gY2hpdWRvIHBhbm5lbGxvIGZpbHRyaSBlXHJcbiAvLyByaWNhbGNvbG8gbGEgbGFyZ2hlenphIHZpc2liaWxlIGRlbCBjb250ZW5pdG9yZVxyXG4gICBpZiAoZkN3ID4gMCAmJiAgY3cgKyBmQ3cgKyBkdyA+IGNvbXBXKXtcclxuICAgICB0aGlzLnRvZ2dsZUZpbHRlcnNQYW5lbChmYWxzZSk7XHJcbiAgICAgLy8gc2FmZUFwcGx5KCk7XHJcbiAgICAgY0N3ID0gdGhpcy5wYWdlQ29udGVudENvbXBvbmVudC5lbC5uYXRpdmVFbGVtZW50LmNsaWVudFdpZHRoO1xyXG4gICB9XHJcblxyXG4gICAgICAgLy8gZGV0dGFnbGlvICsgY29udGVudXRvID4gZmluZXN0cmEgPT4gYXBybyBpbiBob3ZlciBpbCBkZXR0YWdsaW9cclxuXHJcbiAgIGlmIChjdyArIGR3ID4gY29tcFcpe1xyXG4gICAgICAgICB0aGlzLnBhZ2VEZXRhaWxDb21wb25lbnQuaG92ZXIodHJ1ZSk7XHJcbiAgICAgICAgIHRoaXMuZGlzYWJsZUNvbnRlbnRTY3JvbGwodHJ1ZSk7XHJcbiAgICAgICAgIC8vICR0aGlzLnV0aWxzLmNvbXBvbmVudHMuZGV0YWlsUGFuZWwuYWRkQ2xhc3MoXCJvZGNIb3ZlclwiKTtcclxuXHJcbiAgICAgICAgIGlmIChjb21wVyAtIGR3IDwgMjAwKXtcclxuICAgICAgICAgICAvLyBzZSBsYSBkaW1lbnNpb25lIGRlbCBjb250ZW5pdG9yZSDDqCB0cm9wcG8gcGljY29sYSwgbWV0dG8gaWwgcGFubmVsbG8gZGVsIGRldHRhZ2xpbyBhbCAxMDAlXHJcbiAgICAgICAgICAgdGhpcy5wYWdlRGV0YWlsQ29tcG9uZW50LmhvdmVyRnVsbFNjcmVlbih0cnVlKTtcclxuICAgICAgICAgICAvLyAkdGhpcy51dGlscy5jb21wb25lbnRzLmRldGFpbFBhbmVsLmFkZENsYXNzKFwib2RjSG92ZXJGdWxsU2NyZWVuXCIpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIHRoaXMuc2hvd0hpZGVEZXRhaWxIb3Zlck1hc2sodHJ1ZSk7XHJcbiAgICAgICB9ZWxzZXtcclxuICAgICAgICAgdGhpcy5wYWdlRGV0YWlsQ29tcG9uZW50LmhvdmVyKHRoaXMucGFnZURldGFpbENvbXBvbmVudC5hbHdheXNIb3ZlciA/IHRydWUgOiBmYWxzZSk7XHJcbiAgICAgICAgIC8vICR0aGlzLnV0aWxzLmNvbXBvbmVudHMuZGV0YWlsUGFuZWwucmVtb3ZlQ2xhc3MoXCJvZGNIb3ZlclwiKTtcclxuICAgICAgICAgdGhpcy5zaG93SGlkZURldGFpbEhvdmVyTWFzayh0aGlzLnBhZ2VEZXRhaWxDb21wb25lbnQuYWx3YXlzSG92ZXIgPyB0cnVlIDogZmFsc2UpO1xyXG4gICAgICAgICB0aGlzLmRpc2FibGVDb250ZW50U2Nyb2xsKHRoaXMucGFnZURldGFpbENvbXBvbmVudC5hbHdheXNIb3ZlciA/IHRydWUgOiBmYWxzZSk7XHJcbiAgICAgICB9XHJcblxyXG4gfVxyXG5cclxuIHByaXZhdGUgaGlkZURldGFpbFBhbmVsKCl7XHJcbiAgIC8vICR0aGlzLnV0aWxzLnN0eWxlLmRldGFpbC5kaXNwbGF5PSdub25lJztcclxuICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB0aGlzLnBhZ2VEZXRhaWxDb21wb25lbnQuZGlzcGxheSA9ICdub25lJyk7XHJcbiAgIHRoaXMucGFnZURldGFpbENvbXBvbmVudC5ob3ZlcihmYWxzZSk7XHJcbiAgIHRoaXMucGFnZURldGFpbENvbXBvbmVudC5ob3ZlckZ1bGxTY3JlZW4oZmFsc2UpO1xyXG4gICB0aGlzLmRpc2FibGVDb250ZW50U2Nyb2xsKGZhbHNlKTtcclxuICAgdGhpcy5zaG93SGlkZURldGFpbEhvdmVyTWFzayhmYWxzZSk7XHJcbiB9XHJcblxyXG4gcHJpdmF0ZSBzaG93SGlkZURldGFpbEhvdmVyTWFzayh2aXMpe1xyXG4gLy8gaWYoJHRoaXMudXRpbHMuY29tcG9uZW50cy5jb21wb25lbnQhPXVuZGVmaW5lZCl7XHJcbiAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB0aGlzLmRldGFpbEhvdmVyTWFzay5kaXNwbGF5ID0gdmlzID8gJ2Jsb2NrJyA6ICAnbm9uZScpO1xyXG4gLy8gIHZpcz8gJHRoaXMudXRpbHMuY29tcG9uZW50cy5jb21wb25lbnQuYWRkQ2xhc3MoXCJvZGNIb3Zlck1hc2tcIikgOiAkdGhpcy51dGlscy5jb21wb25lbnRzLmNvbXBvbmVudC5yZW1vdmVDbGFzcyhcIm9kY0hvdmVyTWFza1wiKVxyXG4gLy8gfVxyXG4gfVxyXG5cclxuIHByaXZhdGUgc2hvd0ZpbHRlcnNQYW5lbCgpe1xyXG4gICAvLyBkZWxldGUgJHRoaXMudXRpbHMuc3R5bGUuZmlsdGVycy5kaXNwbGF5O1xyXG4gICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHRoaXMucGFnZUZpbHRlcnNDb21wb25lbnQuZGlzcGxheSA9ICdibG9jaycpO1xyXG4gICB0aGlzLnRvZ2dsZUZpbHRlclBhbmVsLmVtaXQodHJ1ZSk7XHJcblxyXG4gLy8gY29udHJvbGxvIGNoZSBjaSBzaWEgYWJiYXN0YW56YSBzcGF6aW8gcGVyIG1vc3RyYXJlIHNpYSBpbCBwYW5uZWxsbyBkZWkgZmlsdHJpIGUgc2lhIGlsIHBhbm5lbGxvIGRlbCBkZXR0YWdsaW9cclxuICAgY29uc3QgY29tcFcgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcblxyXG4vLyBsYXJnaGV6emEgYXR0dWFsbWVudGUgdmlzaWJpbGVcclxuICAgY29uc3QgZkN3ID0gdGhpcy5wYWdlRmlsdGVyc0NvbXBvbmVudC5lbC5uYXRpdmVFbGVtZW50LmNsaWVudFdpZHRoO1xyXG4gICBjb25zdCBjQ3cgPSB0aGlzLnBhZ2VDb250ZW50Q29tcG9uZW50LmVsLm5hdGl2ZUVsZW1lbnQuY2xpZW50V2lkdGg7XHJcbiAgIGNvbnN0IGRDdyA9IHRoaXMucGFnZURldGFpbENvbXBvbmVudD8uZWwubmF0aXZlRWxlbWVudC5jbGllbnRXaWR0aCB8fCAwO1xyXG5cclxuICAgY29uc3QgY3cgPSB0aGlzLnBhZ2VDb250ZW50Q29tcG9uZW50LmdldE1pbldpZHRoSW5QeCgpO1xyXG4gICB0aGlzLnBhZ2VGaWx0ZXJzQ29tcG9uZW50LmhvdmVyRnVsbFNjcmVlbihmYWxzZSk7XHJcblxyXG4gICAvLyAvLyBsYXJnaGV6emEgZWZmZXR0aXZhIHF1YW5kbyBpbCBwYW5uZWxsbyBkZWkgZmlsdHJpICDDqCB2aXNpYmlsZVxyXG4gICBjb25zdCBmdyA9IHRoaXMucGFnZUZpbHRlcnNDb21wb25lbnQuZ2V0UmVhbFdpZHRoKCk7XHJcblxyXG4gICBpZiAoY3cgKyBkQ3cgKyBmdyA+IGNvbXBXKXtcclxuICAgLy8gbW9zdHJvIGlsIHBhbm5lbGxvIGRlaSBmaWx0cmkgaW4gaG92ZXJcclxuICAgdGhpcy5wYWdlRmlsdGVyc0NvbXBvbmVudC5ob3Zlcih0cnVlKTtcclxuICAgdGhpcy5kaXNhYmxlQ29udGVudFNjcm9sbCh0cnVlKTtcclxuICAgaWYgKGNvbXBXIC0gZncgPCAyMDApe1xyXG4gICAgIC8vIHNlIGxhIGRpbWVuc2lvbmUgZGVsIGNvbnRlbml0b3JlIMOoIHRyb3BwbyBwaWNjb2xhLCBtZXR0byBpbCBwYW5uZWxsbyBkZWwgZGV0dGFnbGlvIGFsIDEwMCVcclxuICAgICB0aGlzLnBhZ2VGaWx0ZXJzQ29tcG9uZW50LmhvdmVyRnVsbFNjcmVlbih0cnVlKTtcclxuICAgfVxyXG4gICB0aGlzLnNob3dIaWRlRmlsdGVyc0hvdmVyTWFzayh0cnVlKTtcclxuICAgfWVsc2V7XHJcbiAgIHRoaXMucGFnZUZpbHRlcnNDb21wb25lbnQuaG92ZXIoZmFsc2UpO1xyXG4gICB0aGlzLmRpc2FibGVDb250ZW50U2Nyb2xsKGZhbHNlKTtcclxuICAgdGhpcy5zaG93SGlkZUZpbHRlcnNIb3Zlck1hc2soZmFsc2UpO1xyXG4gICB9XHJcblxyXG4gfVxyXG5cclxuIHByaXZhdGUgc2hvd0hpZGVGaWx0ZXJzSG92ZXJNYXNrKHZpcyl7XHJcbiAvLyBpZigkdGhpcy51dGlscy5jb21wb25lbnRzLmNvbXBvbmVudCE9dW5kZWZpbmVkKXtcclxuICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB0aGlzLmZpbHRlckhvdmVyTWFzay5kaXNwbGF5ID0gdmlzID8gJ2Jsb2NrJyA6ICAnbm9uZScpO1xyXG4gICAvLyAgdmlzPyAkdGhpcy51dGlscy5jb21wb25lbnRzLmNvbXBvbmVudC5hZGRDbGFzcyhcIm9kY0hvdmVyTWFza1wiKSA6ICR0aGlzLnV0aWxzLmNvbXBvbmVudHMuY29tcG9uZW50LnJlbW92ZUNsYXNzKFwib2RjSG92ZXJNYXNrXCIpXHJcbiAvLyB9XHJcbiB9XHJcblxyXG4gcHJpdmF0ZSBoaWRlRmlsdGVyc1BhbmVsKCl7XHJcbiAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gdGhpcy5wYWdlRmlsdGVyc0NvbXBvbmVudC5kaXNwbGF5ID0gJ25vbmUnKTtcclxuICAgdGhpcy50b2dnbGVGaWx0ZXJQYW5lbC5lbWl0KGZhbHNlKTtcclxuICAgLy8gaWYoJHRoaXMudXRpbHMuY29tcG9uZW50cy5maWx0ZXJzUGFuZWwhPXVuZGVmaW5lZCl7LlxyXG4gICB0aGlzLnBhZ2VGaWx0ZXJzQ29tcG9uZW50LmhvdmVyKGZhbHNlKTtcclxuICAgdGhpcy5kaXNhYmxlQ29udGVudFNjcm9sbChmYWxzZSk7XHJcbiAgIHRoaXMucGFnZUZpbHRlcnNDb21wb25lbnQuaG92ZXJGdWxsU2NyZWVuKGZhbHNlKTtcclxuIC8vIH1cclxuICAgdGhpcy5zaG93SGlkZUZpbHRlcnNIb3Zlck1hc2soZmFsc2UpO1xyXG5cclxuIH1cclxuXHJcblxyXG4gcHVibGljIGdldFJlYWxXaWR0aCgpeyAvLyBsYXJnaGV6emEgZWZmZXR0aXZhXHJcbiAgIHJldHVybiBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgbnVsbCkud2lkdGgucmVwbGFjZSgncHgnLCAnJyksIDEwKTtcclxuIH1cclxuXHJcbiBkZXRhaWxIb3Zlck1hc2tDbGljaygpe1xyXG4gIHRoaXMuY2xpY2tPdXRzaWRlRGV0YWlsLmVtaXQoKTtcclxuIH1cclxuXHJcbiBmaWx0ZXJIb3Zlck1hc2tDbGljaygpe1xyXG4gICB0aGlzLmhpZGVGaWx0ZXJzUGFuZWwoKTtcclxuIH1cclxuXHJcbiB0b29sYmFyc0hlaWdodENoYW5nZSgpe1xyXG4gICAvLyB0aGlzLnRvb2xiYXJzSGVpZ2h0ID0gdGhpcy5wY3RiLm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xyXG4gICB0aGlzLnpvbmUucnVuKCgpID0+IHtcclxuICAgICB0aGlzLnJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdwYWdlQ29udGFpbmVyVG9vbGJhcnNIZWlnaHRDaGFuZ2UnKSk7XHJcbiAgIH0pO1xyXG59XHJcblxyXG5kaXNhYmxlQ29udGVudFNjcm9sbChlbmFibGU6IGJvb2xlYW4pe1xyXG5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaHRtbCcpWzBdLnN0eWxlLm92ZXJmbG93ID0gZW5hYmxlID8gJ2hpZGRlbicgOiAnJztcclxufVxyXG5cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCJcclxuPGRpdiAjcHRDb250YWluZXIgY2xhc3M9XCJwdENvbnRhaW5lclwiIChjZGtPYnNlcnZlQ29udGVudCk9XCJ0b29sYmFyc0hlaWdodENoYW5nZSgpXCI+XHJcbiAgPG5nLWNvbnRlbnQgc2VsZWN0PVwic2lpLXRvb2xiYXJcIj48L25nLWNvbnRlbnQ+XHJcbjwvZGl2PlxyXG48ZGl2ICNwY3RDb250YWluZXIgY2xhc3M9XCJwY3RDb250YWluZXJcIiAoY2RrT2JzZXJ2ZUNvbnRlbnQpPVwidG9vbGJhcnNIZWlnaHRDaGFuZ2UoKVwiPlxyXG4gIDxuZy1jb250ZW50IHNlbGVjdD1cInNpaS1wYWdlLWNvbnRlbnQtdG9vbGJhclwiPjwvbmctY29udGVudD5cclxuPC9kaXY+XHJcbjxkaXYgY2xhc3M9XCJjb250YWluZXJiYWNrZ3JvdW5kXCIgIFtuZ0NsYXNzXT1cImJhY2tncm91bmRDbGFzc1wiPjwvZGl2PlxyXG5cclxuXHJcbjwhLS0gSEVBREVSUyAtLT5cclxuPGRpdiAjbWluaUhlYWRlckNvbnRhaW5lciBjbGFzcz1cIm1pbmlIZWFkZXJDb250YWluZXJcIiBbc3R5bGUudmlzaWJpbGl0eV09XCJzaG93TWluaUhlYWRlciA/ICd2aXNpYmxlJzonaGlkZGVuJ1wiIFtzdHlsZS50b3AucHhdPVwiKChwYWdlVG9vbGJhckNvbnRhaW5lckhlaWdodCB8IGFzeW5jKSArIChwYWdlQ29udGVudFRvb2xiYXJzQ29udGFpbmVySGVpZ2h0IHwgYXN5bmMpIClcIj5cclxuICA8bmctY29udGVudCBzZWxlY3Q9XCJbc2lpUGFnZU1pbmlIZWFkZXJdXCI+PC9uZy1jb250ZW50PlxyXG48L2Rpdj5cclxuXHJcbjxkaXYgI2hlYWRlckNvbnRhaW5lciBjbGFzcz1cImhlYWRlckNvbnRhaW5lclwiIChjZGtPYnNlcnZlQ29udGVudCk9XCJ0b29sYmFyc0hlaWdodENoYW5nZSgpXCIgW3N0eWxlLm1hcmdpblRvcC5weF09XCIoKHBhZ2VGaXhlZFRvb2xiYXJDb250YWluZXJIZWlnaHQgfCBhc3luYykgKyAocGFnZUZpeGVkQ29udGVudFRvb2xiYXJzQ29udGFpbmVySGVpZ2h0IHwgYXN5bmMpIClcIj5cclxuICA8bmctY29udGVudCBzZWxlY3Q9XCJbc2lpUGFnZUhlYWRlcl1cIj48L25nLWNvbnRlbnQ+XHJcbjwvZGl2PlxyXG48IS0tIEhFQURFUlMgZmluZSAtLT5cclxuXHJcbjxkaXYgY2xhc3M9XCJwY19jb250YWluZXJcIiA+XHJcblxyXG4gPCEtLSBGSUxURVIgUEFORUwgLS0+XHJcbiA8ZGl2IGNsYXNzPVwicGFnZUZpbHRlckNvbnRlbnRCb3hcIiBbc3R5bGUudG9wLnB4XT1cIigocGFnZVRvb2xiYXJDb250YWluZXJIZWlnaHQgfCBhc3luYykgKyAocGFnZUNvbnRlbnRUb29sYmFyc0NvbnRhaW5lckhlaWdodCB8IGFzeW5jKSArICAgKHNob3dNaW5pSGVhZGVyID8gKHBhZ2VNaW5pSGVhZGVyQ29udGFpbmVySGVpZ2h0IHwgYXN5bmMpOihwYWdlSGVhZGVyQ29udGFpbmVyVmlzaWJsZUhlaWdodCB8IGFzeW5jKSkpXCJcclxuIFtzdHlsZS5oZWlnaHRdPVwic2FuaXRpemVyLmJ5cGFzc1NlY3VyaXR5VHJ1c3RTdHlsZSgnY2FsYygxMDB2aCAtICcrKCAocGFnZVRvb2xiYXJDb250YWluZXJIZWlnaHQgfCBhc3luYykgKyAocGFnZUNvbnRlbnRUb29sYmFyc0NvbnRhaW5lckhlaWdodCB8IGFzeW5jKSArICAocGFnZUZvb3RlckNvbnRhaW5lclZpc2libGVIZWlnaHQgfCBhc3luYykgICArIChzaG93TWluaUhlYWRlciA/IChwYWdlTWluaUhlYWRlckNvbnRhaW5lckhlaWdodCB8IGFzeW5jKToocGFnZUhlYWRlckNvbnRhaW5lclZpc2libGVIZWlnaHQgfCBhc3luYykpICkrJ3B4KScpXCIgPlxyXG4gPG5nLWNvbnRlbnQgc2VsZWN0PVwic2lpLXBhZ2UtZmlsdGVyc1wiPjwvbmctY29udGVudD5cclxuPC9kaXY+XHJcbjwhLS0gRklMVEVSIFBBTkVMIGZpbmUgLS0+XHJcblxyXG4gIDwhLS0gQ09OVEVOVCBQQU5FTCAtLT5cclxuICA8bmctY29udGVudCBzZWxlY3Q9XCJzaWktcGFnZS1jb250ZW50XCI+PC9uZy1jb250ZW50PlxyXG4gIDwhLS0gQ09OVEVOVCBQQU5FTCBmaW5lLS0+XHJcblxyXG5cclxuICA8IS0tIERFVEFJTCBQQU5FTCAtLT5cclxuICA8ZGl2IGNsYXNzPVwicGFnZURldGFpbENvbnRlbnRCb3hcIiBbc3R5bGUudG9wLnB4XT1cIigocGFnZVRvb2xiYXJDb250YWluZXJIZWlnaHQgfCBhc3luYykgKyAocGFnZUNvbnRlbnRUb29sYmFyc0NvbnRhaW5lckhlaWdodCB8IGFzeW5jKSArIChzaG93TWluaUhlYWRlciA/IChwYWdlTWluaUhlYWRlckNvbnRhaW5lckhlaWdodCB8IGFzeW5jKToocGFnZUhlYWRlckNvbnRhaW5lclZpc2libGVIZWlnaHQgfCBhc3luYykpKVwiXHJcbiAgW3N0eWxlLmhlaWdodF09XCJzYW5pdGl6ZXIuYnlwYXNzU2VjdXJpdHlUcnVzdFN0eWxlKCdjYWxjKDEwMHZoIC0gJysoIChwYWdlVG9vbGJhckNvbnRhaW5lckhlaWdodCB8IGFzeW5jKSArIChwYWdlQ29udGVudFRvb2xiYXJzQ29udGFpbmVySGVpZ2h0IHwgYXN5bmMpICsgKHBhZ2VGb290ZXJDb250YWluZXJWaXNpYmxlSGVpZ2h0IHwgYXN5bmMpICAgKyhzaG93TWluaUhlYWRlciA/IChwYWdlTWluaUhlYWRlckNvbnRhaW5lckhlaWdodCB8IGFzeW5jKToocGFnZUhlYWRlckNvbnRhaW5lclZpc2libGVIZWlnaHQgfCBhc3luYykpICApKydweCknKVwiID5cclxuICA8bmctY29udGVudCBzZWxlY3Q9XCJzaWktcGFnZS1kZXRhaWxcIj48L25nLWNvbnRlbnQ+XHJcbjwvZGl2PlxyXG48IS0tIERFVEFJTCBQQU5FTCBmaW5lLS0+XHJcblxyXG5cclxuICA8IS0tIEhPVkVSIE1BU0sgLS0+XHJcbiAgPHNpaS1wYWdlLWhvdmVyLW1hc2sgI0RFVEFJTEhPVkVSTUFTSyBzdHlsZT1cInotaW5kZXg6IDM7XCIgY2xhc3M9XCJzaWktcGFnZS1ob3Zlci1tYXNrXCIgKGNsaWNrKT1cImRldGFpbEhvdmVyTWFza0NsaWNrKClcIj48L3NpaS1wYWdlLWhvdmVyLW1hc2s+XHJcbiAgPHNpaS1wYWdlLWhvdmVyLW1hc2sgI0ZJTFRFUkhPVkVSTUFTSyBzdHlsZT1cInotaW5kZXg6IDI7XCIgY2xhc3M9XCJzaWktcGFnZS1ob3Zlci1tYXNrXCIgKGNsaWNrKT1cImZpbHRlckhvdmVyTWFza0NsaWNrKClcIj48L3NpaS1wYWdlLWhvdmVyLW1hc2s+XHJcbiAgPCEtLSBIT1ZFUiBNQVNLIGZpbmUtLT5cclxuXHJcbiAgPCEtLSBGT09URVIgLS0+XHJcbiAgPGRpdiAjZm9vdGVyQ29udGFpbmVyIGNsYXNzPVwiZm9vdGVyQ29udGFpbmVyXCIgKGNka09ic2VydmVDb250ZW50KT1cInRvb2xiYXJzSGVpZ2h0Q2hhbmdlKClcIj5cclxuICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIltzaWlQYWdlRm9vdGVyXVwiPjwvbmctY29udGVudD5cclxuICA8L2Rpdj5cclxuICA8IS0tIEZPT1RFUiBmaW5lLS0+XHJcbjwvZGl2PlxyXG5cclxuXHJcbiJdfQ==