import { Component, Input, HostBinding, Output, EventEmitter } from '@angular/core';
import { BehaviorSubject, Subscription } from 'rxjs';
import { ToolbarSubmenuItemOpenIn } from '../../dto/toolbar-menu.dto';
import { startWith } from 'rxjs/operators';
import { MatSidenav, MatSidenavContainer } from '@angular/material/sidenav';
import { SiiDownloadService } from '../../service/sii-download-service';
import { SiiDatePipe } from '../util/sii-date.pipe';
import { MatTabNav, MatTabLink } from '@angular/material/tabs';
import { ProfileButtonComponent } from '../profile-button/profile-button.component';
import { BadgeComponent } from '../badge/badge.component';
import { MatTooltip } from '@angular/material/tooltip';
import { MatProgressSpinner } from '@angular/material/progress-spinner';
import { MatBadge } from '@angular/material/badge';
import { FormsModule } from '@angular/forms';
import { NgTemplateOutlet, NgClass, AsyncPipe } from '@angular/common';
import { MatIcon } from '@angular/material/icon';
import { MatIconButton } from '@angular/material/button';
import * as i0 from "@angular/core";
import * as i1 from "../../sii-toolkit.service";
import * as i2 from "../../service/sii-engage.service";
import * as i3 from "../dsii-components/sdac-preview/service/sdac-preview.service";
import * as i4 from "@angular/router";
import * as i5 from "@angular/cdk/layout";
import * as i6 from "../breadcrumb/services/breadcrumb.service";
import * as i7 from "../dsii-components/delegation/delegation.service";
import * as i8 from "../../service/sii-download-service";
import * as i9 from "@angular/forms";
export class ToolbarComponent {
    toggleMenuSidebar(forceStatus) {
        if (forceStatus == undefined) {
            this.menuSidebarVisible = !this.menuSidebarVisible;
        }
        else {
            this.menuSidebarVisible = forceStatus;
        }
        !!this.menuSidebarVisible ? document.body.classList.add('unscrollableBody') : document.body.classList.remove('unscrollableBody');
    }
    // mySelf: MyselfDTO;
    get mySelf() {
        return this.siiToolkitService.loggedUser.value;
    }
    get haveNotification() {
        return this.sdacNotificationCount + this.sdacTicketCount > 0;
    }
    get sdacNotification() {
        return this.sdacPreviewService.notificationPreview;
    }
    get sdacTichet() {
        return this.sdacPreviewService.ticketPreview;
    }
    get sdacTicketCount() {
        return this.sdacPreviewService.ticketCount;
    }
    get sdacNotificationCount() {
        return this.sdacPreviewService.notificationCount;
    }
    get corporateItCalendarEvents() {
        return this.engageServ.corporateCalendarEvents;
    }
    get corporateItCalendarEventsCount() {
        return this.engageServ.corporateCalendarEventsCount;
    }
    get isServerless() { return this.siiToolkitService.isServerless; }
    get isEngage() { return this.engageServ.isEngage; }
    get isEngageAvailable() { return this.engageServ.engageAvailable; }
    get engMenuOk() {
        return this.isEngageAvailable && !!this.menuVoices.value?.menu;
    }
    get appMenuOk() {
        return this.applicationMenu?.length !== 0;
    }
    get appMenuActive() {
        return this.activeMobMenu === 'app';
    }
    // @HostBinding('style.box-shadow') boxShadow = 'initial';
    get boxShadow() {
        return this.siiToolkitService.loggedUser.value.toolbarMode === undefined ? 'initial' :
            this.siiToolkitService.loggedUser.value.toolbarMode + ' 0px 2px 20px 16px inset';
    }
    constructor(siiToolkitService, el, engageServ, sdacPreviewService, router, breakpointObserver, siiBreadcrumbServ, delegationService, siiDownloadService) {
        this.siiToolkitService = siiToolkitService;
        this.el = el;
        this.engageServ = engageServ;
        this.sdacPreviewService = sdacPreviewService;
        this.router = router;
        this.breakpointObserver = breakpointObserver;
        this.siiBreadcrumbServ = siiBreadcrumbServ;
        this.delegationService = delegationService;
        this.siiDownloadService = siiDownloadService;
        this.autoHide = true;
        this.applicationMenu = [];
        this.showEngageSearch = false;
        this.showEngageMenu = true;
        // @Input() showGlobalSearch = false;
        // @Input() enableGlobalMenu = false;
        this.showCloseButton = false;
        this.closeAction = new EventEmitter();
        this.menuVoices = new BehaviorSubject({});
        this.menuMobileOpen = false;
        this.subMenuOpenStatus = {};
        this.mobileToolbar = false;
        this.activeMobMenu = 'app';
        this.menuSidebarVisible = false;
        this.subscriptions = new Subscription();
        this.breakpointObserver
            .observe(['(max-width: 1050px)'])
            .subscribe((state) => { this.mobileToolbar = state.matches; });
    }
    ngOnChanges(changes) {
        if (!!changes.menu) {
            this.applicationMenu = changes.menu.currentValue.map((m) => ({
                label: m.title,
                location: 'interna',
                url: m.link
            }));
        }
    }
    ngAfterViewInit() {
        if (this.isEngage || this.showEngageMenu) {
            this.engageServ.getToolbarMenuVoices().subscribe((res) => {
                this.menuVoices.next(res);
                this.engageServ.currentMenu.pipe(startWith(this.engageServ.currentMenu.value))
                    .subscribe((currMenRes) => {
                    if (currMenRes.length > 0) {
                        this.checkProfiledVoices(currMenRes);
                    }
                });
            });
        }
        if (this.helpId !== undefined) {
            this.subscriptions.add(this.siiToolkitService.getHelpPage(this.helpId).subscribe((helPage) => {
                this.helPage = helPage;
            }));
        }
    }
    ngOnInit() {
    }
    ngOnDestroy() {
        // not needed since it's a cold observable but good practice
        this.subscriptions.unsubscribe();
        document.body.classList.remove('unscrollableBody');
    }
    goToHelpPage() {
        if (this.helPage && this.helPage.url) {
            window.open(this.helPage.url);
        }
    }
    closeAct() {
        this.closeAction.next();
    }
    openUrlInWindow(url, openIn) {
        if (openIn == ToolbarSubmenuItemOpenIn.self) {
            window.open(url, '_self');
        }
        else if (openIn == ToolbarSubmenuItemOpenIn.tab) {
            window.open(url, '_blank');
        }
        else {
            window.open(url, '_blank', `target=_blank,width=4000,height=4000`);
        }
    }
    navigateUrl(voice, engageVoice = false) {
        this.siiBreadcrumbServ.reset();
        if ((engageVoice && this.engageServ.isEngage && voice.location === 'interna') || (!engageVoice && voice.location !== 'esterna')) {
            const splu = voice.url.split('?');
            let qp = {};
            if (!!splu[1]) {
                qp = splu[1].split('&').map(i => i.split('=')).reduce((acc, item) => { acc[item[0]] = item[1]; return acc; }, {});
            }
            this.router.navigate([splu[0]], { queryParams: qp });
        }
        else {
            // debugger
            //aggiungo la company di default
            const duc = window.localStorage.getItem('defaultUserCompany-' + this.mySelf.workerId);
            if (!!duc) {
                let urlToCall = voice.url;
                if (urlToCall.indexOf('?') < 0) {
                    urlToCall += '?';
                }
                urlToCall += '&WebCacheLocalId=' + new Date().getTime().toString();
                urlToCall += '&soccodice=' + duc;
                this.openUrlInWindow(urlToCall, voice.openIn);
            }
            else {
                this.openUrlInWindow(voice.url, voice.openIn);
            }
        }
    }
    performSearch(txtSearch) {
        if (this.engageServ.engageAvailable) {
            if (this.engageServ.isEngage) {
                this.router.navigate(['search'], { queryParams: (!!txtSearch ? { search: txtSearch } : {}) });
            }
            else {
                this.openUrlInWindow(this.engageServ.engageDomain + (!!txtSearch ? `search?search=${txtSearch}` : 'search'));
            }
        }
        else {
            alert('enagage unavailable');
        }
    }
    checkProfiledVoices(voices) {
        const tmpMenu = this.menuVoices.getValue();
        // mostro le voci della navbar se l utente  ne ha visibilità
        voices.forEach(category => {
            category.voices.forEach(voice => {
                tmpMenu.menu.forEach(mv => {
                    mv.submenu?.columns.forEach(sc => {
                        sc.items?.forEach(v => {
                            if (v.profiling === voice.id) {
                                v.visibleProfiling = true;
                            }
                        });
                    });
                });
            });
        });
        this.menuVoices.next(tmpMenu);
    }
    goToHome() {
        this.router.navigate(['/']);
    }
    mobileMenuClick() {
        this.subMenuOpenStatus = {};
        this.menuMobileOpen = !this.menuMobileOpen;
    }
    toggleSubmenu(event, smIndex) {
        event.stopImmediatePropagation();
        this.subMenuOpenStatus[smIndex] = !this.subMenuOpenStatus[smIndex];
    }
    doLogout() {
        window.location.href = `${this.siiToolkitService.environment.domain}/sii_common/logout`;
    }
    doDelegation() {
        this.delegationService.openDelegation();
    }
    doDelegationLogout() {
        this.delegationService.logout();
    }
    openSdacTiketsByCode(code) {
        this.sdacPreviewService.openSdacTiketsByCode(code);
    }
    openSdacNotification() {
        this.sdacPreviewService.openSdacType(true);
    }
    openSdacTicket() {
        this.sdacPreviewService.openSdacType(false);
    }
    goToDeadlines() {
        if (this.engageServ.isEngage) {
            this.router.navigateByUrl('deadlines');
        }
        else {
            this.openUrlInWindow(this.engageServ.engageDomain + '/deadlines');
        }
    }
    goToProfile() {
        if (this.engageServ.isEngage) {
            this.router.navigateByUrl('profile');
        }
        else {
            this.openUrlInWindow(this.engageServ.engageDomain + '/profile');
        }
    }
    // sidenavVisibleChange(visible: boolean){
    //   // document.body.style.overflow = visible ? 'hidden' : '';
    //   visible ? document.body.classList.add('unscrollableBody') : document.body.classList.remove('unscrollableBody');
    // }
    toggleProfileInfo(event) {
        const status = !this.subMenuOpenStatus.profile;
        if (this.mobileToolbar) {
            event.stopImmediatePropagation();
            this.menuMobileOpen = status;
            this.toggleMenuSidebar(status);
            this.subMenuOpenStatus.profile = status;
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: ToolbarComponent, deps: [{ token: i1.SiiToolkitService }, { token: i0.ElementRef }, { token: i2.SiiEngageService }, { token: i3.SdacPreviewService }, { token: i4.Router }, { token: i5.BreakpointObserver }, { token: i6.SiiBreadcrumbService }, { token: i7.DelegationService }, { token: i8.SiiDownloadService }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.13", type: ToolbarComponent, isStandalone: true, selector: "sii-toolbar", inputs: { autoHide: "autoHide", toolbarTitle: "toolbarTitle", menu: "menu", applicationMenu: "applicationMenu", helpId: "helpId", showEngageSearch: "showEngageSearch", showEngageMenu: "showEngageMenu", showCloseButton: "showCloseButton" }, outputs: { closeAction: "closeAction" }, host: { properties: { "style.box-shadow": "this.boxShadow" } }, providers: [SiiDownloadService, SiiDatePipe], usesOnChanges: true, ngImport: i0, template: "\r\n\r\n@if (showCloseButton) {\r\n  <button mat-icon-button aria-label=\"Close\" (click)=\"closeAct()\">\r\n    <mat-icon>close</mat-icon>\r\n  </button>\r\n}\r\n\r\n<!-- <sii-menu *ngIf=\"(menu && menu.length>0) || enableGlobalMenu\" [voices]=\"menu\" [enableGlobalMenu]=\"enableGlobalMenu\"></sii-menu> -->\r\n<!-- <img class=\"sii-toolbar__logo\" src=\"assets/icons/logo.png\" > -->\r\n<div class=\"sii-toolbar_logo_box\" (click)=\"goToHome()\" >\r\n  <mat-icon class=\"sii-toolbar_logo_engage\" svgIcon=\"logo_engage\"></mat-icon>\r\n  <div class=\"sii-toolbar__title\"> {{toolbarTitle}} </div>\r\n</div>\r\n<div class=\"sii-toolbar__container\" >\r\n  <!-- <div class=\"sii-toolbar__title\"> {{toolbarTitle}} </div> -->\r\n  <div class=\"sii-toolbar__content\">\r\n\r\n    <!--\r\n\r\n    isEngage  |  appMenuOk | engMenuOk |  eng  | app | minEng\r\n    1          1           1         -       1     1\r\n    1          1           0         -       1     -\r\n    1          0           1         1       -     -\r\n    1          0           0         -       -     -\r\n    0          1           1         -       1     1\r\n    0          1           0         -       1     -\r\n    0          0           1         -       -     1\r\n    0          0           0         -       -     -\r\n\r\n    eng     => isEngage && engMenuOk && !appMenuOk\r\n    app     => appMenuOk\r\n    minEng  => (isEngage && appMenuOk && engMenuOk) || (!isEngage && engMenuOk)\r\n\r\n    -->\r\n\r\n\r\n\r\n    @if ( isEngage && engMenuOk && !appMenuOk) {\r\n      <ng-container  *ngTemplateOutlet=\"toolbarMenuTemplate;context:{$implicit: (menuVoices | async)?.menu, isEngageMenu:true}\" >    </ng-container>\r\n    }\r\n\r\n    @if (appMenuOk) {\r\n      <ng-container  *ngTemplateOutlet=\"toolbarMenuTemplate;context:{$implicit: applicationMenu , isEngageMenu:false}\" >    </ng-container>\r\n    }\r\n\r\n\r\n    <span [style.marginLeft]=\"'auto'\"></span>\r\n\r\n    <ng-content></ng-content>\r\n\r\n\r\n\r\n\r\n    <!-- <sii-global-search *ngIf=\"showGlobalSearch\"></sii-global-search> -->\r\n    <ul class=\"sii_toolbar_navbar_nav searchNavItem\" style=\"padding-right: 0;\">\r\n      <!-- search -->\r\n      @if (isEngage || showEngageSearch) {\r\n        <li class=\"sii_toolbar_nav_item\" >\r\n          <a class=\"sii_toolbar_nav_link searchLink\" aria-label=\"Search\"><span class=\"toolbarSearchLabel\" >Search</span> <mat-icon class=\"search-icon\" >search</mat-icon></a>\r\n          <div class=\"toolbarMenuSubVoices searchPanel\">\r\n            <div>\r\n              <form class=\"search-form\"  (submit)=\"performSearch(dsv.value); $event.preventDefault()\">\r\n                <input #dsv id=\"search-form-input\" type=\"text\" name=\"search\" i18n-placeholder=\"@@toolbarSearchMessage\" placeholder=\"What are you looking for?\" class=\"search-form__search-input\">\r\n                <button mat-icon-button   type=\"submit\" aria-label=\"search\" >\r\n                  <mat-icon>search</mat-icon>\r\n                </button>\r\n              </form>\r\n            </div>\r\n            <div class=\"search-actions\">\r\n              <a tabindex=\"0\" (click)=\"performSearch()\"   title=\"\" class=\"top-sii_toolbar_nav_link\">\r\n                <mat-icon class=\"advsearchIcon\">tune</mat-icon> <b i18n=\"@@toolbar_advancedSearch\">Advanced Search</b><mat-icon>chevron_right</mat-icon>\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </li>\r\n      }\r\n      <!-- <li class=\"sii_toolbar_nav_item gotosiiwebButton\" *ngIf=\"isEngage\" >\r\n      <a class=\"sii_toolbar_nav_link \" href=\"https://siiweb.eng.it\" target=\"_blank\" title=\"\">Go To Siiweb  1<mat-icon>launch</mat-icon></a>\r\n    </li> -->\r\n    @if ((isEngage && appMenuOk && engMenuOk) || (!isEngage && engMenuOk)) {\r\n      <li class=\"sii_toolbar_nav_item engageMenuItem\">\r\n        <a class=\"sii_toolbar_nav_link engageMenuItem_link\" aria-label=\"menu engage\">Menu Engage</a>\r\n        <div class=\"engageMenuItem_box\">\r\n          <ng-container  *ngTemplateOutlet=\"toolbarMenuTemplate;context:{$implicit:(menuVoices | async)?.menu , isEngageMenu:true}\" >    </ng-container>\r\n        </div>\r\n      </li>\r\n    }\r\n\r\n    @if (helPage) {\r\n      <li class=\"sii_toolbar_nav_item sii-toolbar__icon_button \" >\r\n        <a class=\"sii_toolbar_nav_link\" aria-label=\"help\" (click)=\"goToHelpPage()\">\r\n          <mat-icon svgIcon=\"sii-help-online\"></mat-icon>\r\n        </a>\r\n      </li>\r\n    }\r\n\r\n\r\n\r\n    @if (!isServerless && siiDownloadService.utils.count>0) {\r\n      <li class=\"sii_toolbar_nav_item sii-toolbar__icon_button alwaysVisible\" >\r\n        <a class=\"sii_toolbar_nav_link\" aria-label=\"Attachments\">\r\n          <mat-icon aria-hidden=\"false\" [ngClass]=\"{'changeIncoming':siiDownloadService.utils.someChanges,'changeRequired':siiDownloadService.utils.countChange}\" [matBadge]=\"siiDownloadService.utils.count\" matBadgeColor=\"primary\" matBadgePosition=\"before\" matBadgeSize=\"small\" svgIcon=\"menu-download\"></mat-icon>\r\n        </a>\r\n        <div class=\"toolbarSmallContainer\">\r\n          <p class=\"text-uppercase categoryTitle\" style=\"display: flex;\">\r\n            <b style=\"margin-right:10px ;\" i18n=\"@@appDownload\">Downloaded files</b>\r\n            @if (siiDownloadService.utils.fetchInProgress>0) {\r\n              <mat-spinner [color]=\"'accent'\" [diameter]=\"20\"></mat-spinner>\r\n            }\r\n            @if (siiDownloadService.utils.fetchInProgress==0) {\r\n              <button style=\"margin: -15px 0 -13px -11px;\" mat-icon-button (click)=\"siiDownloadService._fetchData()\"><mat-icon>refresh</mat-icon></button>\r\n            }\r\n          </p>\r\n          <div class=\" attachmentContainer \"  >\r\n            @for (attach of siiDownloadService.utils.list ; track attach) {\r\n              <div  class=\"attachmentRow\">\r\n                <div class=\"attachmentInfoPanel\">\r\n                  <span class=\"attachNameLabel\">{{attach.fileName}}</span>\r\n                  <div class=\"attachSubRow\">{{attach.createdDate | siiDate:true}}</div>\r\n                </div>\r\n                <div class=\"attachment_action\">\r\n                  @if (attach.status==10) {\r\n                    <mat-spinner [diameter]=\"30\"></mat-spinner>\r\n                  }\r\n                  @if (attach.status==30) {\r\n                    <button  mat-icon-button style=\"margin-right: -12px;    margin-top: -10px;\" (click)=\"siiDownloadService._download(attach.id)\" ><mat-icon>download</mat-icon></button>\r\n                  }\r\n                  @if (attach.status==40) {\r\n                    <mat-icon  style=\"color: red;\" [matTooltip]=\"attach.error\">error_outline</mat-icon>\r\n                  }\r\n                  @if (!attach._readyForDelete) {\r\n                    <button  mat-icon-button class=\"attachDeleteButton\" (click)=\"siiDownloadService._markReadyForDelete(attach)\" ><mat-icon>delete</mat-icon></button>\r\n                  }\r\n                  @if (!!attach._readyForDelete) {\r\n                    <div class=\"delete_action_panel\" >\r\n                      <button  mat-icon-button  (click)=\"siiDownloadService._clearReadyForTimeout(attach)\" ><mat-icon>clear</mat-icon></button>\r\n                      <button  mat-icon-button   (click)=\"siiDownloadService._delete(attach)\" ><mat-icon>check</mat-icon></button>\r\n                    </div>\r\n                  }\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n        </div>\r\n      </li>\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    @if (!isServerless && !!haveNotification) {\r\n      <li class=\"sii_toolbar_nav_item sii-toolbar__icon_button\" >\r\n        <a class=\"sii_toolbar_nav_link\" aria-label=\"Notification\">\r\n          <mat-icon aria-hidden=\"false\" [matBadge]=\"sdacTicketCount+sdacNotificationCount\" matBadgeColor=\"primary\" matBadgePosition=\"before\" matBadgeSize=\"small\" svgIcon=\"menu-notifications\"></mat-icon>\r\n        </a>\r\n        <div class=\"toolbarSmallContainer\">\r\n          @if (sdacNotificationCount!=0) {\r\n            <p class=\"text-uppercase categoryTitle\"><b i18n=\"@@toolbar_Notification\">Notification</b></p>\r\n            <div class=\" notificheContainer \"  >\r\n              @for (ticket of sdacNotification | async ; track ticket) {\r\n                <div  (click)=\"openSdacTiketsByCode(ticket.ssCode)\">\r\n                  <span class=\"notificheContainerLabel\">{{ticket.ssDescr}}</span>\r\n                  <div class=\"notifSub\" >{{ticket.count}} <span i18n=\"@@ticket_items\">{ticket.count,plural,=1 {Item} other {Items}}</span></div>\r\n                </div>\r\n              }\r\n            </div>\r\n            <div (click)=\"openSdacNotification()\"  class=\"allNotif\"><b i18n=\"@@toolbar_seeAllNotification\">See all notification</b> <mat-icon>navigate_next</mat-icon></div>\r\n          }\r\n          @if (sdacTicketCount!=0) {\r\n            <p class=\"text-uppercase categoryTitle\"><b i18n=\"@@toolbar_taskManagement\">Task Management</b></p>\r\n            <div class=\" notificheContainer \"  >\r\n              @for (ticket of sdacTichet | async ; track ticket) {\r\n                <div  (click)=\"openSdacTiketsByCode(ticket.ssCode)\">\r\n                  <span class=\"notificheContainerLabel\">{{ticket.ssDescr}}</span>\r\n                  <div class=\"notifSub\"  >{{ticket.count}} <span i18n=\"@@task_ite\">{ticket.count,plural,=1 {Task} other {Tasks}}</span></div>\r\n                </div>\r\n              }\r\n            </div>\r\n            <div (click)=\"openSdacTicket()\"  class=\"allNotif\"><b i18n=\"@@toolbar_seeAllTask\">See all tasks</b> <mat-icon>navigate_next</mat-icon></div>\r\n          }\r\n        </div>\r\n      </li>\r\n    }\r\n    @if (!isServerless) {\r\n      <li class=\"sii_toolbar_nav_item sii-toolbar__icon_button\" >\r\n        <a class=\"sii_toolbar_nav_link\" aria-label=\"event\">\r\n          <mat-icon aria-hidden=\"false\" [matBadge]=\"corporateItCalendarEventsCount\" matBadgeColor=\"warn\" matBadgePosition=\"before\" matBadgeSize=\"small\" [matBadgeHidden]=\"corporateItCalendarEventsCount==0\" svgIcon=\"menu-calendar\" ></mat-icon>\r\n        </a>\r\n        <div class=\"toolbarSmallContainer\">\r\n          <!-- <ng-container *ngIf=\"corporateItCalendarEventsCount>0\"> -->\r\n          <p class=\"text-uppercase categoryTitle\"><b  i18n=\"@@toolbar_deadlines\">Deadlines</b></p>\r\n          <div  class=\"notificheContainer\">\r\n            @for (item of corporateItCalendarEvents | async; track item; let index = $index) {\r\n              @if (!item.hideData && item.status=='SCADENZA_OGGI') {\r\n                <p style=\"width:100%\"><sii-badge style=\"padding: 2px 10px; font-weight: 700;\" [background]=\"'#ff9db4'\" [color]=\"'black'\" i18n=\"@@deadline_today\">today</sii-badge></p>\r\n              }\r\n              @if (!item.hideData && item.status=='IN_SCADENZA') {\r\n                <p style=\"width:100%\">  <sii-badge style=\"padding: 2px 10px; font-weight: 700;\" [background]=\"'#eabf30'\" [color]=\"'black'\" i18n=\"@@deadline_tomorrow\">tomorrow</sii-badge></p>\r\n              }\r\n              <div >\r\n                <div class=\"notificheContainerLabel\" style=\"margin-bottom:20px;\">@if (!item.isAllDay) {\r\n                  <span>{{item.time}} - </span>\r\n                }{{item.subject}}</div>\r\n              </div>\r\n            }\r\n          </div>\r\n          <div  (click)=\"goToDeadlines()\"  class=\"allNotif\"><b i18n=\"@@toolbar_allDeadlines\">See all deadlines</b> <mat-icon>navigate_next</mat-icon></div>\r\n        </div>\r\n      </li>\r\n    }\r\n\r\n    @if (!isServerless) {\r\n      <li class=\"sii_toolbar_nav_item sii_toolbar_profile_link\" >\r\n        <sii-profile-button style=\"padding-left: 7px;\"   [mySelf]='mySelf' (click)=\"toggleProfileInfo($event)\" [hideDetail]=\"mobileToolbar\"></sii-profile-button>\r\n      </li>\r\n    }\r\n  </ul>\r\n\r\n\r\n\r\n\r\n  <div role=\"button\" aria-label=\"menu\" (click)=\"mobileMenuClick();toggleMenuSidebar();\" id=\"menuToggle\" class=\"hidden-lg-up\">\r\n    <div class=\"sii_toolbar_manu_bar\" [ngClass]=\"{'animate':menuMobileOpen}\"></div>\r\n  </div>\r\n</div>\r\n\r\n</div>\r\n\r\n@if (menuSidebarVisible) {\r\n<div class=\"menu-sidebar\">\r\n<!-- <mat-sidenav-container > -->\r\n  <!-- <mat-sidenav class=\"menuSidenav\" #snav  mode=\"side\" position=\"end\" fixedInViewport=\"true\" fixedTopGap=\"72\"  > -->\r\n\r\n\r\n\r\n\r\n    <ul class=\"sii_toolbar_mobile-navbar\">\r\n\r\n      <!--\r\n\r\n      appMenuActive  |  appMenuOk | engMenuOk |  toolbar | eng  | app\r\n      1          1           1          V       -       V\r\n      1          1           0          -       -       V\r\n      1          0           1          -       V       -\r\n      1          0           0          -       -       -\r\n      0          1           1          V       V       -\r\n      0          1           0          -       -       V\r\n      0          0           1          -       V       -\r\n      0          0           0          -       -       -\r\n\r\n      toolbar => appMenuOk && engMenuOk\r\n      eng     => (appMenuOk && engMenuOk && !appMenuActive) || (engMenuOk && !appMenuOk)\r\n      app     => (appMenuOk && engMenuOk && appMenuActive) ||  (!engMenuOk && appMenuOk)\r\n\r\n      -->\r\n\r\n\r\n\r\n\r\n      @if (appMenuOk && engMenuOk) {\r\n        <nav mat-tab-nav-bar mat-stretch-tabs class=\"sidenavMenuNav\"\r\n          >\r\n          <!-- *ngIf=\"!isEngage && isEngageAvailable && applicationMenu.length>0  && (menuVoices | async)?.menu   \"> -->\r\n          <a mat-tab-link (click)=\"activeMobMenu = 'app'\"       [active]=\"appMenuActive\" >Menu App</a>\r\n          <a mat-tab-link (click)=\"activeMobMenu = 'engage'\"    [active]=\"!appMenuActive\" >Menu Engage</a>\r\n        </nav>\r\n      }\r\n\r\n      @if ((appMenuOk && engMenuOk && !appMenuActive) || (engMenuOk && !appMenuOk) ) {\r\n        <!-- <ng-container *ngIf=\"isEngage || (applicationMenu.length==0 && isEngageAvailable && (menuVoices | async)?.menu) || activeMobMenu == 'engage' \"> -->\r\n        <ng-container  *ngTemplateOutlet=\"toolbarMobileMenuTemplate;context:{$implicit: (menuVoices | async)?.menu, isEngageMenu:true}\" >    </ng-container>\r\n      }\r\n\r\n      @if ((appMenuOk && engMenuOk && appMenuActive) ||  (!engMenuOk && appMenuOk) ) {\r\n        <ng-container  *ngTemplateOutlet=\"toolbarMobileMenuTemplate;context:{$implicit: applicationMenu , isEngageMenu:false}\" >    </ng-container>\r\n      }\r\n\r\n\r\n      <li class=\"custom-divider\"></li>\r\n\r\n\r\n      @if (isEngage) {\r\n        <li class=\"sii_toolbar_nav_item \"><a class=\"sii_toolbar_nav_link \" href=\"https://siiweb.eng.it\" target=\"_blank\" title=\"\"><span i18n=\"@@navbar_goToSiiweb\">Go To Siiweb</span> <mat-icon>chevron_right</mat-icon></a></li>\r\n      }\r\n      @if (helPage) {\r\n        <li class=\"sii_toolbar_nav_item \"  ><a class=\"sii_toolbar_nav_link \" (click)=\"goToHelpPage()\" tabindex=\"0\" title=\"\"><span i18n=\"@@navbar_goToHelpPage\">Go To Help Page</span> <mat-icon>chevron_right</mat-icon></a></li>\r\n      }\r\n\r\n      <li class=\"sii_toolbar_nav_item  profile\" >\r\n        <!-- <sii-profile-button (click)=\"toggleSubmenu($event,'profile')\" [mySelf]='mySelf' [hideDetail]=\"true\"></sii-profile-button> -->\r\n        <!-- <mat-icon style=\"margin-left: 10px;\" (click)=\"toggleSubmenu($event,'profile')\" >chevron_right</mat-icon> -->\r\n        <div class=\"sii_toolbar_submenu\" [ngClass]=\"!!subMenuOpenStatus['profile']?'is-open':'is-closed' \">\r\n          <mat-icon  class=\"sii_toolbar_submenu-icon-back\" (click)=\"toggleProfileInfo($event)\">chevron_left</mat-icon>\r\n          <ul class=\"sii_toolbar_subnav notification\">\r\n\r\n            <li><p><b >{{mySelf?.firstName}} {{mySelf?.lastName}}</b></p></li>\r\n            <li class=\"sii_toolbar_subnav-item\">\r\n              <div class=\"profile\">\r\n                <!-- Dettagli utente -->\r\n                <dl class=\"eng-user-details\">\r\n                  <dt  i18n=\"@@toolbar_workerId\">Worker ID</dt>\r\n                  <dd >{{mySelf?.workerId}}</dd>\r\n                  <dt ><abbr i18n-title=\"@@toolbar_cc\" title=\"Competence Center\" i18n=\"@@toolbar_cc_dim\">CC</abbr></dt>\r\n                  <dd>{{mySelf?.costCenterId}}</dd>\r\n                  <dt ><abbr  i18n=\"@@toolbar_manager\">Manager</abbr></dt>\r\n                  <dd >{{mySelf.costCenterResp?.firstName}} {{mySelf.costCenterResp?.lastName}}</dd>\r\n                  @if (!!mySelf.tutorWorkerId) {\r\n                    <dt ><abbr i18n=\"@@toolbar_tutor\">Tutor</abbr></dt>\r\n                    <dd>{{mySelf.tutorFistName}} {{mySelf.tutorLastName}}</dd>\r\n                  }\r\n\r\n                  @if (!!mySelf.evaluatorWorkerId) {\r\n                    <dt ><abbr i18n=\"@@toolbar_evaluator\">Evaluator</abbr></dt>\r\n                    <dd>{{mySelf.evaluatorFistName}} {{mySelf.evaluatorLastName}}</dd>\r\n                  }\r\n                </dl>\r\n              </div>\r\n            </li>\r\n            <ul class=\"list-unstyled user-actions\">\r\n              <li><a (click)=\"goToProfile()\"   tabindex=\"0\"  title=\"\" class=\"\"><b i18n=\"@@navbar_goToProfile\">Go To Profile</b> <mat-icon>navigate_next</mat-icon></a></li>\r\n              <li><a href=\"https://password.eng.it/\" target=\"_blank\" title=\"\" class=\"\"><b i18n=\"@@navbar_changePassford\">Change Password</b> <mat-icon>navigate_next</mat-icon></a></li>\r\n              <li><a href=\"https://mysignins.microsoft.com/security-info\" target=\"_blank\" title=\"\" class=\"\"><b i18n=\"@@navbar_mfaSettings\">MFA Settings</b> <mat-icon>navigate_next</mat-icon></a></li>\r\n              <li><a  (click)=\"doLogout()\" tabindex=\"0\" title=\"\" class=\"\"><b i18n=\"@@navbar_logout\">Logout</b> <mat-icon>navigate_next</mat-icon></a></li>\r\n              @if (!!mySelf.delegatedUsers) {\r\n                <li><a  (click)=\"doDelegation()\"     title=\"\" class=\"\"><b i18n=\"@@DelegateLogin\">Login as delegated</b> <mat-icon>navigate_next</mat-icon></a></li>\r\n              }\r\n              @if (!!mySelf.isInDelegation) {\r\n                <li><a (click)=\"doDelegationLogout()\" title=\"\" class=\"\"><b ii18n=\"@@DelegateLogout\">Logout from delegation</b> <mat-icon>navigate_next</mat-icon></a></li>\r\n              }\r\n\r\n            </ul>\r\n\r\n            <li class=\"custom-divider mr-4 \"></li>\r\n\r\n            @if (corporateItCalendarEventsCount!=0) {\r\n              <li><p><b i18n=\"@@toolbar_deadlines\">Deadlines</b></p></li>\r\n              @for (item of corporateItCalendarEvents | async; track item; let index = $index) {\r\n                @if (!item.hideData && item.status=='SCADENZA_OGGI') {\r\n                  <p style=\"width:100% ; margin-top: 1em;\"><sii-badge style=\"padding: 2px 10px; font-weight: 700;\" [background]=\"'#ff9db4'\" [color]=\"'black'\" i18n=\"@@deadline_today\" >today</sii-badge></p>\r\n                }\r\n                @if (!item.hideData && item.status=='IN_SCADENZA') {\r\n                  <p style=\"width:100% ; margin-top: 1em;\">  <sii-badge style=\"padding: 2px 10px; font-weight: 700;\" [background]=\"'#eabf30'\" [color]=\"'black'\" i18n=\"@@deadline_tomorrow\" >tomorrow</sii-badge></p>\r\n                }\r\n                <li  class=\"sii_toolbar_subnav-item\" >\r\n                  <div class=\"notifPreview\">\r\n                    <div  style=\"margin-bottom:20px;\" class=\"notifLabel\">@if (!item.isAllDay) {\r\n                      <span >{{item.time}} - </span>\r\n                    }{{item.subject}}</div>\r\n                    <!-- <div style=\"margin-bottom:12px;\">{{item.date}}</div> -->\r\n                  </div>\r\n                </li>\r\n              }\r\n              <div  (click)=\"goToDeadlines()\"  class=\"allNotif\"><b i18n=\"@@toolbar_allDeadlines\">See all deadlines</b> <mat-icon>navigate_next</mat-icon></div>\r\n              <li class=\"custom-divider mr-4 \"></li>\r\n            }\r\n            @if (sdacNotificationCount!=0) {\r\n              <li class=\"sdacFieldRef\"><p><b i18n=\"@@toolbar_Notification\">Notification</b></p></li>\r\n              @for (ticket of sdacNotification | async ; track ticket) {\r\n                <li class=\"sii_toolbar_subnav-item\">\r\n                  <div class=\"notifPreview\"  (click)=\"openSdacTiketsByCode(ticket.ssCode)\">\r\n                    <span class=\"notifLabel\">{{ticket.ssDescr}}</span>\r\n                    <div style=\"margin-bottom:12px;\">{{ticket.count}} <span i18n=\"@@ticket_items\">{ticket.count,plural,=1 {Item} other {Items}}</span></div>\r\n                  </div>\r\n                </li>\r\n              }\r\n              <div (click)=\"openSdacNotification()\"  class=\"allNotif\"><b i18n=\"@@toolbar_seeAllNotification\">See all notification</b> <mat-icon>navigate_next</mat-icon></div>\r\n              <li class=\"custom-divider mr-4\"></li>\r\n            }\r\n\r\n            @if (sdacTicketCount!=0) {\r\n              <li class=\"sdacFieldRef\"><p><b i18n=\"@@toolbar_taskManagement\">Task Management</b></p></li>\r\n              @for (ticket of sdacTichet | async ; track ticket) {\r\n                <li class=\"sii_toolbar_subnav-item\">\r\n                  <div class=\"notifPreview\"  (click)=\"openSdacTiketsByCode(ticket.ssCode)\">\r\n                    <span class=\"notifLabel\">{{ticket.ssDescr}}</span>\r\n                    <div style=\"margin-bottom:12px;\">{{ticket.count}} <span i18n=\"@@task_ite\">{ticket.count,plural,=1 {Task} other {Tasks}}</span></div>\r\n                  </div>\r\n                </li>\r\n              }\r\n              <div (click)=\"openSdacTicket()\"  class=\"allNotif\"><b i18n=\"@@toolbar_seeAllTask\">See all tasks</b> <mat-icon>navigate_next</mat-icon></div>\r\n              <li class=\"custom-divider mr-4\"></li>\r\n            }\r\n\r\n\r\n\r\n          </ul>\r\n        </div>\r\n\r\n      </li>\r\n    </ul>\r\n  <!-- </mat-sidenav> -->\r\n<!-- </mat-sidenav-container> -->\r\n</div>\r\n}\r\n\r\n\r\n\r\n<ng-template #toolbarMobileMenuTemplate let-currMenu let-isEngageMenu=\"isEngageMenu\">\r\n\r\n  @for (menu of currMenu; track menu; let menuIndex = $index) {\r\n    <li class=\"sii_toolbar_nav_item\"   >\r\n      @if (!menu.submenu || !menu.submenu.columns) {\r\n        <a class=\"sii_toolbar_nav_link\" [ngClass]=\"{'mobileCurrentPage':router.url==menu.url}\"  tabindex=\"0\" (click)=\"navigateUrl(menu,isEngageMenu)\" [title]=\"menu.label\">{{menu.label}}</a>\r\n      }\r\n      @if (menu.submenu && menu.submenu.columns) {\r\n        <a (click)=\"toggleSubmenu($event,menuIndex)\"  class=\"sii_toolbar_nav_link\" [ngClass]=\"{'mobileCurrentPage':router.url==menu.url}\"  [title]=\"menu.label\">{{menu.label}}\r\n          <mat-icon>chevron_right</mat-icon>\r\n        </a>\r\n        <div class=\"sii_toolbar_submenu \" [ngClass]=\"!!subMenuOpenStatus[menuIndex]?'is-open':'is-closed' \" >\r\n          <mat-icon  class=\"sii_toolbar_submenu-icon-back\" (click)=\"toggleSubmenu($event,menuIndex)\">chevron_left</mat-icon>\r\n          <ul class=\"sii_toolbar_subnav\">\r\n            @for (colMenu of menu.submenu.columns; track colMenu) {\r\n              @for (mv of colMenu.items; track mv) {\r\n                @if (!mv.profiling || !!mv.visibleProfiling) {\r\n                  <li   class=\"sii_toolbar_subnav-item\" >\r\n                    <a  class=\"sii_toolbar_subnav__link\" [ngClass]=\"{'mobileCurrentPage':router.url==mv.url}\" tabindex=\"0\" (click)=\"navigateUrl(mv,isEngageMenu);$event.stopImmediatePropagation()\" [title]=\"mv.label\">{{mv.label}}</a>\r\n                  </li>\r\n                }\r\n              }\r\n              @if (colMenu.items?.length>0) {\r\n                <li class=\"custom-divider\"></li>\r\n              }\r\n            }\r\n          </ul>\r\n        </div>\r\n      }\r\n    </li>\r\n  }\r\n</ng-template>\r\n\r\n<ng-template #toolbarMenuTemplate let-currMenu let-isEngageMenu=\"isEngageMenu\">\r\n  <ul class=\"sii_toolbar_navbar_nav menuNavItem\">\r\n    @for (menu of currMenu; track menu) {\r\n      @if (!menu.submenu || !menu.submenu.columns) {\r\n        <li  class=\"sii_toolbar_nav_item menuVoice\" [ngClass]=\"{'currentPage':router.url==menu.url}\">\r\n          <a class=\"sii_toolbar_nav_link\" tabindex=\"0\" (click)=\"navigateUrl(menu, isEngageMenu)\"   [title]=\"menu.label\">{{menu.label}}</a>\r\n        </li>\r\n      }\r\n      @if (menu.submenu && menu.submenu.columns) {\r\n        <li  class=\"sii_toolbar_nav_item menuVoice\"  data-toggle=\"dropdown\"  [ngClass]=\"{'currentPage':router.url==menu.url}\">\r\n          <a  class=\"sii_toolbar_nav_link \"  [title]=\"menu.label\">{{menu.label}} </a>\r\n          <div class=\"toolbarMenuSubVoices\">\r\n            @for (colMenu of menu.submenu.columns; track colMenu) {\r\n              <ul class=\"toolbarMenuSubVoicesCol\" role=\"menu\">\r\n                @for (mv of colMenu.items; track mv) {\r\n                  @if (!mv.profiling || !!mv.visibleProfiling) {\r\n                    <li   >\r\n                      <a tabindex=\"0\" class=\"sii_toolbar_dropdown__link\"  [ngClass]=\"{'mobileCurrentPage':router.url==mv.url}\" [title]=\"mv.label\" (click)=\"navigateUrl(mv, isEngageMenu)\" >{{mv.label}}</a>\r\n                    </li>\r\n                  }\r\n                }\r\n              </ul>\r\n            }\r\n          </div>\r\n        </li>\r\n      }\r\n    }\r\n  </ul>\r\n</ng-template>\r\n", styles: [":host{box-shadow:0 2px 8px #0003;color:#fff;height:72px;padding:0 10px;display:flex;align-items:center;align-content:center;position:relative}a{color:unset}.sii-toolbar_logo_box{position:relative;display:flex;cursor:pointer}.sii-toolbar_logo_engage{height:42px;width:137px;box-sizing:border-box;margin:0 10px}.sii-toolbar__container{display:flex;flex:1;overflow:hidden;flex-wrap:wrap;height:100%}.sii-toolbar__title{text-transform:uppercase;margin-top:auto;margin-bottom:-2px;letter-spacing:.92px;position:absolute;top:-6.3px;left:56.2px;line-height:8px;height:24px;display:flex;align-items:flex-end;font-family:CocoEng;font-size:9px}.text-uppercase{text-transform:uppercase}.categoryTitle{opacity:.8;font-size:12px}.notificheContainer{display:flex;flex-wrap:wrap}.notificheContainer>div{flex:1 1 270px;padding-right:20px;cursor:pointer}.notificheContainer>div .notificheContainerLabel{font-size:1rem;font-weight:900}.notificheContainer>div .notifSub{margin-bottom:12px;opacity:.8;font-size:12px}.allNotif{cursor:pointer;width:200px;display:flex;align-items:center}.sii-toolbar__content{display:flex;flex:1}.sii-toolbar__icon_button{margin:24px 0 0}ul.sii_toolbar_navbar_nav{list-style:none;display:flex;flex-direction:row;flex:1;padding:0 10px 0 5px;margin:0;max-width:1192px}ul.sii_toolbar_navbar_nav.searchNavItem{padding:0 10px;flex:0}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item{letter-spacing:.03rem;display:flex;justify-content:center}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item.currentPage>.sii_toolbar_nav_link:after,ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item:hover>.sii_toolbar_nav_link:after{width:calc(100% - 16px)}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item.sii_toolbar_profile_link:hover:after{width:40px}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item.sii-toolbar__icon_button .sii_toolbar_nav_link{padding-left:7px;padding-right:7px}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item.sii-toolbar__icon_button .sii_toolbar_nav_link mat-icon{margin-bottom:-5px}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .sii_toolbar_nav_link{color:#fff;font-size:12px;font-weight:700;line-height:12px;text-transform:uppercase;position:relative;display:flex;padding:0 15px 23px;outline:none;text-decoration:none;transition:all .3s ease-in-out;cursor:pointer;height:100%;align-items:flex-end;box-sizing:border-box}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .sii_toolbar_nav_link:after,ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item.sii_toolbar_profile_link:after{content:\"\";display:block;width:0;height:4px;background:#c51b88;transition:width .3s;position:absolute;bottom:0;left:8px}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item.sii_toolbar_profile_link:after{left:unset}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .sii_toolbar_nav_link:hover,ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .sii_toolbar_nav_link:focus,ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .sii_toolbar_dropdown__link:hover,ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .sii_toolbar_dropdown__link:focus{color:#ffffffe6}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item:hover>.toolbarMenuSubVoices,ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item:hover>.toolbarSmallContainer{display:flex}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel{flex-direction:column}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-actions{display:flex;justify-content:flex-end;font-size:13px;color:#fff;outline:none;text-decoration:none;transition:all .3s ease-in-out}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-actions a{display:flex;align-items:center;cursor:pointer}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-actions .mat-icon.advsearchIcon{margin-right:5px;transform:scale(.8)}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-form{position:relative;width:100%;margin-top:1rem;margin-bottom:1.8rem;display:flex}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-form .mat-mdc-icon-button{position:absolute;top:8px;right:0}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-form .mat-mdc-icon-button mat-icon{font-size:32px}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-form .search-form__search-input{background-color:transparent;border:none;border-bottom:1px solid rgba(11,22,2,.4);box-sizing:border-box;height:50px;width:100%;position:relative;color:#ffffffbf;border-color:#ffffff40;text-transform:uppercase;font-size:1.25rem;overflow:visible}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-form .search-form__search-input:focus{outline:none}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-form .search-form__search-input::placeholder{color:#ffffffbf;text-transform:uppercase;font-size:1.25rem}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-form .search-form__search-icon{font-size:24px;color:#fff;position:absolute;top:16px;right:10px;border:0;background:none;cursor:pointer}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .toolbarSmallContainer{display:none;flex-direction:column;width:350px;position:absolute;overflow:auto;max-height:calc(100vh - var(--toolbarHeight));right:0;background-color:#09090917;-webkit-backdrop-filter:blur(12px) brightness(.75);backdrop-filter:blur(12px) brightness(.75);padding:30px;top:100%;z-index:1000;box-sizing:border-box}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .toolbarMenuSubVoices{display:none;width:100%;position:absolute;right:0;background-color:#09090917;-webkit-backdrop-filter:blur(12px) brightness(.75);backdrop-filter:blur(12px) brightness(.75);padding:1.5rem 3rem;top:100%;z-index:1000;box-sizing:border-box}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .toolbarMenuSubVoices .toolbarMenuSubVoicesCol{flex:1;padding-left:0;list-style:none}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .toolbarMenuSubVoices .toolbarMenuSubVoicesCol li{border-left:.07rem solid rgba(255,255,255,.3);padding-left:1rem;cursor:pointer}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .toolbarMenuSubVoices .toolbarMenuSubVoicesCol li a{text-transform:uppercase;padding:.25rem 0;opacity:1;font-size:.75rem;letter-spacing:.02rem}#menuToggle{z-index:1001;display:none;align-items:center;color:#fff;cursor:pointer;height:unset}#menuToggle .sii_toolbar_manu_bar,#menuToggle .sii_toolbar_manu_bar:after,#menuToggle .sii_toolbar_manu_bar:before{width:30px;height:2px}#menuToggle .sii_toolbar_manu_bar{position:relative;background:#fff;transition:all 0 .3s}#menuToggle .sii_toolbar_manu_bar:before{content:\"\";position:absolute;left:0;bottom:9px;background:#fff;transition:bottom .3s .3s cubic-bezier(.23,1,.32,1),transform .3s cubic-bezier(.23,1,.32,1)}#menuToggle .sii_toolbar_manu_bar:after{content:\"\";position:absolute;left:0;top:9px;background:#fff;transition:top .3s .3s cubic-bezier(.23,1,.32,1),transform .3s cubic-bezier(.23,1,.32,1)}#menuToggle .sii_toolbar_manu_bar.animate{background:#fff0}#menuToggle .sii_toolbar_manu_bar.animate:after{top:0;background:#fff;transform:rotate(45deg);transition:top .3s cubic-bezier(.23,1,.32,1),transform .3s .3s cubic-bezier(.23,1,.32,1)}#menuToggle .sii_toolbar_manu_bar.animate:before{bottom:0;background:#fff;transform:rotate(-45deg);transition:bottom .3s cubic-bezier(.23,1,.32,1),transform .3s .3s cubic-bezier(.23,1,.32,1)}.menu-sidebar{border:0px;background-color:#090909;overflow-y:auto;overflow-x:hidden;display:block;width:100vw;position:fixed;top:var(--fixedToolbarHeight);right:0;height:calc(100vh - var(--fixedToolbarHeight));left:var(--safe-area-inset-left)}.menu-sidebar .custom-divider{height:0;margin:.75rem 0;overflow:hidden;border-top:1px solid #F5F5F5;opacity:.25}.menu-sidebar ul.sii_toolbar_mobile-navbar{position:relative;list-style:none;text-align:left;margin-left:30px;display:block;padding-left:0}.menu-sidebar ul.sii_toolbar_mobile-navbar .sidenavMenuNav{color:#fff;margin-left:-30px}.menu-sidebar ul.sii_toolbar_mobile-navbar .sidenavMenuNav ::ng-deep mat-ink-bar{background-color:#c51b88!important}.menu-sidebar ul.sii_toolbar_mobile-navbar li.profile mat-icon{transform:scale(1.5);opacity:.5;color:#fff}.menu-sidebar ul.sii_toolbar_mobile-navbar li.profile .user-actions{list-style:none;padding:0}.menu-sidebar ul.sii_toolbar_mobile-navbar li.profile .user-actions li a{display:flex;align-items:center;padding:.33rem;padding-left:0;font-size:1.16em;color:#fff;outline:none;text-decoration:none;cursor:pointer}.menu-sidebar ul.sii_toolbar_mobile-navbar li.profile .eng-user-details{margin-top:1rem;display:flex;flex-wrap:wrap}.menu-sidebar ul.sii_toolbar_mobile-navbar li.profile .eng-user-details dt{font-weight:700;text-transform:uppercase;font-size:.65rem;flex:0 0 42%;max-width:42%}.menu-sidebar ul.sii_toolbar_mobile-navbar li.profile .eng-user-details dd{text-transform:none;flex:0 0 58%;max-width:58%;margin-bottom:.5rem;margin-left:0}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item{text-transform:uppercase;font-size:.75rem;padding:0;display:block}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item .sii_toolbar_nav_link{font-size:16px;font-weight:700;line-height:1.2;text-transform:none;position:relative;display:flex;align-items:center;padding:.75rem 0;color:#fff;text-decoration:none;cursor:pointer}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item .sii_toolbar_nav_link mat-icon{transform:scale(1.5);opacity:.5}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item .sii_toolbar_submenu{position:absolute;background-color:#090909;color:#fff;top:12px;transition:left .4s ease;z-index:2;margin-left:-60px;width:calc(100% + 60px);margin-top:-16px;height:calc(100vh - 72px)}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item .sii_toolbar_submenu.is-closed{display:none}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item .sii_toolbar_submenu.is-open{display:flex}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item .sii_toolbar_submenu .sii_toolbar_submenu-icon-back{margin:26px 15px 0 10px;transform:scale(1.5);opacity:.5}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item .sii_toolbar_submenu ul.sii_toolbar_subnav{position:relative;list-style:none;text-align:left;margin-left:0;display:block;padding-left:0;overflow:auto;padding-top:1rem;padding-bottom:8rem;flex:1;padding-right:20px}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item .sii_toolbar_submenu ul.sii_toolbar_subnav a.sii_toolbar_subnav__link{font-size:16px;text-transform:none;font-weight:400;display:block;line-height:1.25;padding:.75rem 0}.toolbarSearchLabel{margin-right:.25rem}li.sii_toolbar_nav_item.gotosiiwebButton{width:153px}li.sii_toolbar_nav_item.gotosiiwebButton mat-icon{font-size:15px;padding-left:5px;height:17px}.engageMenuItem .engageMenuItem_link{width:130px}.engageMenuItem .engageMenuItem_box{display:none;justify-content:flex-end;background-color:#041f2ee8;width:100%;position:absolute;right:0;height:60px;top:var(--toolbarHeight)}.engageMenuItem .engageMenuItem_box .sii_toolbar_navbar_nav{justify-content:flex-end}.engageMenuItem:hover .engageMenuItem_box{display:flex}.searchLink{padding-right:7px!important}.search-icon{margin-bottom:-6px}@media screen and (max-width: 576px){.menu-sidebar{height:100vh}.searchPanel{padding:10px!important}}@media screen and (max-width: 1050px){sii-profile-button{margin-bottom:auto!important}#menuToggle{display:flex}.sii-toolbar__container :not(.alwaysVisible).menuNavItem,.sii-toolbar__container :not(.alwaysVisible).sii-toolbar__help,.sii-toolbar__container :not(.alwaysVisible).gotosiiwebButton,.sii-toolbar__container :not(.alwaysVisible).engageMenuItem,.sii-toolbar__container :not(.alwaysVisible).sii-toolbar__icon_button{display:none!important}.toolbarSearchLabel{display:none!important}.search-icon{width:40px;height:40px;font-size:40px;margin-bottom:-5px}}.allNotif{cursor:pointer;display:flex;align-items:center}.notifPreview{padding-bottom:10px;cursor:pointer}.notifPreview .notifLabel{margin:0}.mobileCurrentPage{text-decoration:underline #c51b88!important;text-decoration-thickness:2px!important}.attachmentContainer{display:flex;flex-wrap:wrap}.attachmentContainer .attachmentRow{cursor:pointer;flex:1 1 270px;display:flex;border-bottom:1px solid white;margin-bottom:10px;padding-bottom:10px}.attachmentContainer .attachmentRow .attachmentInfoPanel{display:flex;flex-direction:column;flex:1}.attachmentContainer .attachmentRow .attachmentInfoPanel .attachNameLabel{overflow-wrap:break-word;max-width:240px}.attachmentContainer .attachmentRow .attachmentInfoPanel .attachSubRow{opacity:.8;font-size:12px}.attachmentContainer .attachmentRow .attachment_action{display:flex;flex-direction:column}.attachmentContainer .attachmentRow .attachment_action mat-spinner{margin-left:10px;margin-right:-5px}.attachmentContainer .attachmentRow .attachment_action .attachDeleteButton{margin-right:-12px;margin-top:-11px;margin-bottom:-15px;opacity:.5}.attachmentContainer .attachmentRow .attachment_action .attachDeleteButton:hover{opacity:1}.attachmentContainer .attachmentRow .attachment_action .delete_action_panel{display:flex;margin:-11px -12px -15px -48px}.changeIncoming{animation:pulse 2s infinite}.changeRequired{animation:attention 2s infinite}@keyframes pulse{0%{transform:scale(1.25);fill:gold}70%{transform:scale(1)}to{transform:scale(1.25);fill:gold}}@keyframes attention{0%{transform:scale(4)}to{transform:scale(1)}}\n"], dependencies: [{ kind: "component", type: MatIconButton, selector: "button[mat-icon-button]", exportAs: ["matButton"] }, { kind: "component", type: MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "directive", type: NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "ngmodule", type: FormsModule }, { kind: "directive", type: i9.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { kind: "directive", type: i9.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i9.NgForm, selector: "form:not([ngNoForm]):not([formGroup]),ng-form,[ngForm]", inputs: ["ngFormOptions"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: MatBadge, selector: "[matBadge]", inputs: ["matBadgeColor", "matBadgeOverlap", "matBadgeDisabled", "matBadgePosition", "matBadge", "matBadgeDescription", "matBadgeSize", "matBadgeHidden"] }, { kind: "component", type: MatProgressSpinner, selector: "mat-progress-spinner, mat-spinner", inputs: ["color", "mode", "value", "diameter", "strokeWidth"], exportAs: ["matProgressSpinner"] }, { kind: "directive", type: MatTooltip, selector: "[matTooltip]", inputs: ["matTooltipPosition", "matTooltipPositionAtOrigin", "matTooltipDisabled", "matTooltipShowDelay", "matTooltipHideDelay", "matTooltipTouchGestures", "matTooltip", "matTooltipClass"], exportAs: ["matTooltip"] }, { kind: "component", type: BadgeComponent, selector: "sii-badge", inputs: ["appearance", "background", "color"] }, { kind: "component", type: ProfileButtonComponent, selector: "sii-profile-button", inputs: ["mySelf", "hideDetail"] }, { kind: "component", type: MatTabNav, selector: "[mat-tab-nav-bar]", inputs: ["fitInkBarToContent", "mat-stretch-tabs", "animationDuration", "backgroundColor", "disableRipple", "color", "tabPanel"], exportAs: ["matTabNavBar", "matTabNav"] }, { kind: "component", type: MatTabLink, selector: "[mat-tab-link], [matTabLink]", inputs: ["active", "disabled", "disableRipple", "tabIndex", "id"], exportAs: ["matTabLink"] }, { kind: "pipe", type: AsyncPipe, name: "async" }, { kind: "pipe", type: SiiDatePipe, name: "siiDate" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: ToolbarComponent, decorators: [{
            type: Component,
            args: [{ selector: 'sii-toolbar', standalone: true, imports: [MatIconButton, MatIcon, NgTemplateOutlet, FormsModule, NgClass, MatBadge, MatProgressSpinner, MatTooltip, BadgeComponent, ProfileButtonComponent, MatSidenavContainer, MatSidenav, MatTabNav, MatTabLink, AsyncPipe, SiiDatePipe], providers: [SiiDownloadService, SiiDatePipe], template: "\r\n\r\n@if (showCloseButton) {\r\n  <button mat-icon-button aria-label=\"Close\" (click)=\"closeAct()\">\r\n    <mat-icon>close</mat-icon>\r\n  </button>\r\n}\r\n\r\n<!-- <sii-menu *ngIf=\"(menu && menu.length>0) || enableGlobalMenu\" [voices]=\"menu\" [enableGlobalMenu]=\"enableGlobalMenu\"></sii-menu> -->\r\n<!-- <img class=\"sii-toolbar__logo\" src=\"assets/icons/logo.png\" > -->\r\n<div class=\"sii-toolbar_logo_box\" (click)=\"goToHome()\" >\r\n  <mat-icon class=\"sii-toolbar_logo_engage\" svgIcon=\"logo_engage\"></mat-icon>\r\n  <div class=\"sii-toolbar__title\"> {{toolbarTitle}} </div>\r\n</div>\r\n<div class=\"sii-toolbar__container\" >\r\n  <!-- <div class=\"sii-toolbar__title\"> {{toolbarTitle}} </div> -->\r\n  <div class=\"sii-toolbar__content\">\r\n\r\n    <!--\r\n\r\n    isEngage  |  appMenuOk | engMenuOk |  eng  | app | minEng\r\n    1          1           1         -       1     1\r\n    1          1           0         -       1     -\r\n    1          0           1         1       -     -\r\n    1          0           0         -       -     -\r\n    0          1           1         -       1     1\r\n    0          1           0         -       1     -\r\n    0          0           1         -       -     1\r\n    0          0           0         -       -     -\r\n\r\n    eng     => isEngage && engMenuOk && !appMenuOk\r\n    app     => appMenuOk\r\n    minEng  => (isEngage && appMenuOk && engMenuOk) || (!isEngage && engMenuOk)\r\n\r\n    -->\r\n\r\n\r\n\r\n    @if ( isEngage && engMenuOk && !appMenuOk) {\r\n      <ng-container  *ngTemplateOutlet=\"toolbarMenuTemplate;context:{$implicit: (menuVoices | async)?.menu, isEngageMenu:true}\" >    </ng-container>\r\n    }\r\n\r\n    @if (appMenuOk) {\r\n      <ng-container  *ngTemplateOutlet=\"toolbarMenuTemplate;context:{$implicit: applicationMenu , isEngageMenu:false}\" >    </ng-container>\r\n    }\r\n\r\n\r\n    <span [style.marginLeft]=\"'auto'\"></span>\r\n\r\n    <ng-content></ng-content>\r\n\r\n\r\n\r\n\r\n    <!-- <sii-global-search *ngIf=\"showGlobalSearch\"></sii-global-search> -->\r\n    <ul class=\"sii_toolbar_navbar_nav searchNavItem\" style=\"padding-right: 0;\">\r\n      <!-- search -->\r\n      @if (isEngage || showEngageSearch) {\r\n        <li class=\"sii_toolbar_nav_item\" >\r\n          <a class=\"sii_toolbar_nav_link searchLink\" aria-label=\"Search\"><span class=\"toolbarSearchLabel\" >Search</span> <mat-icon class=\"search-icon\" >search</mat-icon></a>\r\n          <div class=\"toolbarMenuSubVoices searchPanel\">\r\n            <div>\r\n              <form class=\"search-form\"  (submit)=\"performSearch(dsv.value); $event.preventDefault()\">\r\n                <input #dsv id=\"search-form-input\" type=\"text\" name=\"search\" i18n-placeholder=\"@@toolbarSearchMessage\" placeholder=\"What are you looking for?\" class=\"search-form__search-input\">\r\n                <button mat-icon-button   type=\"submit\" aria-label=\"search\" >\r\n                  <mat-icon>search</mat-icon>\r\n                </button>\r\n              </form>\r\n            </div>\r\n            <div class=\"search-actions\">\r\n              <a tabindex=\"0\" (click)=\"performSearch()\"   title=\"\" class=\"top-sii_toolbar_nav_link\">\r\n                <mat-icon class=\"advsearchIcon\">tune</mat-icon> <b i18n=\"@@toolbar_advancedSearch\">Advanced Search</b><mat-icon>chevron_right</mat-icon>\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </li>\r\n      }\r\n      <!-- <li class=\"sii_toolbar_nav_item gotosiiwebButton\" *ngIf=\"isEngage\" >\r\n      <a class=\"sii_toolbar_nav_link \" href=\"https://siiweb.eng.it\" target=\"_blank\" title=\"\">Go To Siiweb  1<mat-icon>launch</mat-icon></a>\r\n    </li> -->\r\n    @if ((isEngage && appMenuOk && engMenuOk) || (!isEngage && engMenuOk)) {\r\n      <li class=\"sii_toolbar_nav_item engageMenuItem\">\r\n        <a class=\"sii_toolbar_nav_link engageMenuItem_link\" aria-label=\"menu engage\">Menu Engage</a>\r\n        <div class=\"engageMenuItem_box\">\r\n          <ng-container  *ngTemplateOutlet=\"toolbarMenuTemplate;context:{$implicit:(menuVoices | async)?.menu , isEngageMenu:true}\" >    </ng-container>\r\n        </div>\r\n      </li>\r\n    }\r\n\r\n    @if (helPage) {\r\n      <li class=\"sii_toolbar_nav_item sii-toolbar__icon_button \" >\r\n        <a class=\"sii_toolbar_nav_link\" aria-label=\"help\" (click)=\"goToHelpPage()\">\r\n          <mat-icon svgIcon=\"sii-help-online\"></mat-icon>\r\n        </a>\r\n      </li>\r\n    }\r\n\r\n\r\n\r\n    @if (!isServerless && siiDownloadService.utils.count>0) {\r\n      <li class=\"sii_toolbar_nav_item sii-toolbar__icon_button alwaysVisible\" >\r\n        <a class=\"sii_toolbar_nav_link\" aria-label=\"Attachments\">\r\n          <mat-icon aria-hidden=\"false\" [ngClass]=\"{'changeIncoming':siiDownloadService.utils.someChanges,'changeRequired':siiDownloadService.utils.countChange}\" [matBadge]=\"siiDownloadService.utils.count\" matBadgeColor=\"primary\" matBadgePosition=\"before\" matBadgeSize=\"small\" svgIcon=\"menu-download\"></mat-icon>\r\n        </a>\r\n        <div class=\"toolbarSmallContainer\">\r\n          <p class=\"text-uppercase categoryTitle\" style=\"display: flex;\">\r\n            <b style=\"margin-right:10px ;\" i18n=\"@@appDownload\">Downloaded files</b>\r\n            @if (siiDownloadService.utils.fetchInProgress>0) {\r\n              <mat-spinner [color]=\"'accent'\" [diameter]=\"20\"></mat-spinner>\r\n            }\r\n            @if (siiDownloadService.utils.fetchInProgress==0) {\r\n              <button style=\"margin: -15px 0 -13px -11px;\" mat-icon-button (click)=\"siiDownloadService._fetchData()\"><mat-icon>refresh</mat-icon></button>\r\n            }\r\n          </p>\r\n          <div class=\" attachmentContainer \"  >\r\n            @for (attach of siiDownloadService.utils.list ; track attach) {\r\n              <div  class=\"attachmentRow\">\r\n                <div class=\"attachmentInfoPanel\">\r\n                  <span class=\"attachNameLabel\">{{attach.fileName}}</span>\r\n                  <div class=\"attachSubRow\">{{attach.createdDate | siiDate:true}}</div>\r\n                </div>\r\n                <div class=\"attachment_action\">\r\n                  @if (attach.status==10) {\r\n                    <mat-spinner [diameter]=\"30\"></mat-spinner>\r\n                  }\r\n                  @if (attach.status==30) {\r\n                    <button  mat-icon-button style=\"margin-right: -12px;    margin-top: -10px;\" (click)=\"siiDownloadService._download(attach.id)\" ><mat-icon>download</mat-icon></button>\r\n                  }\r\n                  @if (attach.status==40) {\r\n                    <mat-icon  style=\"color: red;\" [matTooltip]=\"attach.error\">error_outline</mat-icon>\r\n                  }\r\n                  @if (!attach._readyForDelete) {\r\n                    <button  mat-icon-button class=\"attachDeleteButton\" (click)=\"siiDownloadService._markReadyForDelete(attach)\" ><mat-icon>delete</mat-icon></button>\r\n                  }\r\n                  @if (!!attach._readyForDelete) {\r\n                    <div class=\"delete_action_panel\" >\r\n                      <button  mat-icon-button  (click)=\"siiDownloadService._clearReadyForTimeout(attach)\" ><mat-icon>clear</mat-icon></button>\r\n                      <button  mat-icon-button   (click)=\"siiDownloadService._delete(attach)\" ><mat-icon>check</mat-icon></button>\r\n                    </div>\r\n                  }\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n        </div>\r\n      </li>\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    @if (!isServerless && !!haveNotification) {\r\n      <li class=\"sii_toolbar_nav_item sii-toolbar__icon_button\" >\r\n        <a class=\"sii_toolbar_nav_link\" aria-label=\"Notification\">\r\n          <mat-icon aria-hidden=\"false\" [matBadge]=\"sdacTicketCount+sdacNotificationCount\" matBadgeColor=\"primary\" matBadgePosition=\"before\" matBadgeSize=\"small\" svgIcon=\"menu-notifications\"></mat-icon>\r\n        </a>\r\n        <div class=\"toolbarSmallContainer\">\r\n          @if (sdacNotificationCount!=0) {\r\n            <p class=\"text-uppercase categoryTitle\"><b i18n=\"@@toolbar_Notification\">Notification</b></p>\r\n            <div class=\" notificheContainer \"  >\r\n              @for (ticket of sdacNotification | async ; track ticket) {\r\n                <div  (click)=\"openSdacTiketsByCode(ticket.ssCode)\">\r\n                  <span class=\"notificheContainerLabel\">{{ticket.ssDescr}}</span>\r\n                  <div class=\"notifSub\" >{{ticket.count}} <span i18n=\"@@ticket_items\">{ticket.count,plural,=1 {Item} other {Items}}</span></div>\r\n                </div>\r\n              }\r\n            </div>\r\n            <div (click)=\"openSdacNotification()\"  class=\"allNotif\"><b i18n=\"@@toolbar_seeAllNotification\">See all notification</b> <mat-icon>navigate_next</mat-icon></div>\r\n          }\r\n          @if (sdacTicketCount!=0) {\r\n            <p class=\"text-uppercase categoryTitle\"><b i18n=\"@@toolbar_taskManagement\">Task Management</b></p>\r\n            <div class=\" notificheContainer \"  >\r\n              @for (ticket of sdacTichet | async ; track ticket) {\r\n                <div  (click)=\"openSdacTiketsByCode(ticket.ssCode)\">\r\n                  <span class=\"notificheContainerLabel\">{{ticket.ssDescr}}</span>\r\n                  <div class=\"notifSub\"  >{{ticket.count}} <span i18n=\"@@task_ite\">{ticket.count,plural,=1 {Task} other {Tasks}}</span></div>\r\n                </div>\r\n              }\r\n            </div>\r\n            <div (click)=\"openSdacTicket()\"  class=\"allNotif\"><b i18n=\"@@toolbar_seeAllTask\">See all tasks</b> <mat-icon>navigate_next</mat-icon></div>\r\n          }\r\n        </div>\r\n      </li>\r\n    }\r\n    @if (!isServerless) {\r\n      <li class=\"sii_toolbar_nav_item sii-toolbar__icon_button\" >\r\n        <a class=\"sii_toolbar_nav_link\" aria-label=\"event\">\r\n          <mat-icon aria-hidden=\"false\" [matBadge]=\"corporateItCalendarEventsCount\" matBadgeColor=\"warn\" matBadgePosition=\"before\" matBadgeSize=\"small\" [matBadgeHidden]=\"corporateItCalendarEventsCount==0\" svgIcon=\"menu-calendar\" ></mat-icon>\r\n        </a>\r\n        <div class=\"toolbarSmallContainer\">\r\n          <!-- <ng-container *ngIf=\"corporateItCalendarEventsCount>0\"> -->\r\n          <p class=\"text-uppercase categoryTitle\"><b  i18n=\"@@toolbar_deadlines\">Deadlines</b></p>\r\n          <div  class=\"notificheContainer\">\r\n            @for (item of corporateItCalendarEvents | async; track item; let index = $index) {\r\n              @if (!item.hideData && item.status=='SCADENZA_OGGI') {\r\n                <p style=\"width:100%\"><sii-badge style=\"padding: 2px 10px; font-weight: 700;\" [background]=\"'#ff9db4'\" [color]=\"'black'\" i18n=\"@@deadline_today\">today</sii-badge></p>\r\n              }\r\n              @if (!item.hideData && item.status=='IN_SCADENZA') {\r\n                <p style=\"width:100%\">  <sii-badge style=\"padding: 2px 10px; font-weight: 700;\" [background]=\"'#eabf30'\" [color]=\"'black'\" i18n=\"@@deadline_tomorrow\">tomorrow</sii-badge></p>\r\n              }\r\n              <div >\r\n                <div class=\"notificheContainerLabel\" style=\"margin-bottom:20px;\">@if (!item.isAllDay) {\r\n                  <span>{{item.time}} - </span>\r\n                }{{item.subject}}</div>\r\n              </div>\r\n            }\r\n          </div>\r\n          <div  (click)=\"goToDeadlines()\"  class=\"allNotif\"><b i18n=\"@@toolbar_allDeadlines\">See all deadlines</b> <mat-icon>navigate_next</mat-icon></div>\r\n        </div>\r\n      </li>\r\n    }\r\n\r\n    @if (!isServerless) {\r\n      <li class=\"sii_toolbar_nav_item sii_toolbar_profile_link\" >\r\n        <sii-profile-button style=\"padding-left: 7px;\"   [mySelf]='mySelf' (click)=\"toggleProfileInfo($event)\" [hideDetail]=\"mobileToolbar\"></sii-profile-button>\r\n      </li>\r\n    }\r\n  </ul>\r\n\r\n\r\n\r\n\r\n  <div role=\"button\" aria-label=\"menu\" (click)=\"mobileMenuClick();toggleMenuSidebar();\" id=\"menuToggle\" class=\"hidden-lg-up\">\r\n    <div class=\"sii_toolbar_manu_bar\" [ngClass]=\"{'animate':menuMobileOpen}\"></div>\r\n  </div>\r\n</div>\r\n\r\n</div>\r\n\r\n@if (menuSidebarVisible) {\r\n<div class=\"menu-sidebar\">\r\n<!-- <mat-sidenav-container > -->\r\n  <!-- <mat-sidenav class=\"menuSidenav\" #snav  mode=\"side\" position=\"end\" fixedInViewport=\"true\" fixedTopGap=\"72\"  > -->\r\n\r\n\r\n\r\n\r\n    <ul class=\"sii_toolbar_mobile-navbar\">\r\n\r\n      <!--\r\n\r\n      appMenuActive  |  appMenuOk | engMenuOk |  toolbar | eng  | app\r\n      1          1           1          V       -       V\r\n      1          1           0          -       -       V\r\n      1          0           1          -       V       -\r\n      1          0           0          -       -       -\r\n      0          1           1          V       V       -\r\n      0          1           0          -       -       V\r\n      0          0           1          -       V       -\r\n      0          0           0          -       -       -\r\n\r\n      toolbar => appMenuOk && engMenuOk\r\n      eng     => (appMenuOk && engMenuOk && !appMenuActive) || (engMenuOk && !appMenuOk)\r\n      app     => (appMenuOk && engMenuOk && appMenuActive) ||  (!engMenuOk && appMenuOk)\r\n\r\n      -->\r\n\r\n\r\n\r\n\r\n      @if (appMenuOk && engMenuOk) {\r\n        <nav mat-tab-nav-bar mat-stretch-tabs class=\"sidenavMenuNav\"\r\n          >\r\n          <!-- *ngIf=\"!isEngage && isEngageAvailable && applicationMenu.length>0  && (menuVoices | async)?.menu   \"> -->\r\n          <a mat-tab-link (click)=\"activeMobMenu = 'app'\"       [active]=\"appMenuActive\" >Menu App</a>\r\n          <a mat-tab-link (click)=\"activeMobMenu = 'engage'\"    [active]=\"!appMenuActive\" >Menu Engage</a>\r\n        </nav>\r\n      }\r\n\r\n      @if ((appMenuOk && engMenuOk && !appMenuActive) || (engMenuOk && !appMenuOk) ) {\r\n        <!-- <ng-container *ngIf=\"isEngage || (applicationMenu.length==0 && isEngageAvailable && (menuVoices | async)?.menu) || activeMobMenu == 'engage' \"> -->\r\n        <ng-container  *ngTemplateOutlet=\"toolbarMobileMenuTemplate;context:{$implicit: (menuVoices | async)?.menu, isEngageMenu:true}\" >    </ng-container>\r\n      }\r\n\r\n      @if ((appMenuOk && engMenuOk && appMenuActive) ||  (!engMenuOk && appMenuOk) ) {\r\n        <ng-container  *ngTemplateOutlet=\"toolbarMobileMenuTemplate;context:{$implicit: applicationMenu , isEngageMenu:false}\" >    </ng-container>\r\n      }\r\n\r\n\r\n      <li class=\"custom-divider\"></li>\r\n\r\n\r\n      @if (isEngage) {\r\n        <li class=\"sii_toolbar_nav_item \"><a class=\"sii_toolbar_nav_link \" href=\"https://siiweb.eng.it\" target=\"_blank\" title=\"\"><span i18n=\"@@navbar_goToSiiweb\">Go To Siiweb</span> <mat-icon>chevron_right</mat-icon></a></li>\r\n      }\r\n      @if (helPage) {\r\n        <li class=\"sii_toolbar_nav_item \"  ><a class=\"sii_toolbar_nav_link \" (click)=\"goToHelpPage()\" tabindex=\"0\" title=\"\"><span i18n=\"@@navbar_goToHelpPage\">Go To Help Page</span> <mat-icon>chevron_right</mat-icon></a></li>\r\n      }\r\n\r\n      <li class=\"sii_toolbar_nav_item  profile\" >\r\n        <!-- <sii-profile-button (click)=\"toggleSubmenu($event,'profile')\" [mySelf]='mySelf' [hideDetail]=\"true\"></sii-profile-button> -->\r\n        <!-- <mat-icon style=\"margin-left: 10px;\" (click)=\"toggleSubmenu($event,'profile')\" >chevron_right</mat-icon> -->\r\n        <div class=\"sii_toolbar_submenu\" [ngClass]=\"!!subMenuOpenStatus['profile']?'is-open':'is-closed' \">\r\n          <mat-icon  class=\"sii_toolbar_submenu-icon-back\" (click)=\"toggleProfileInfo($event)\">chevron_left</mat-icon>\r\n          <ul class=\"sii_toolbar_subnav notification\">\r\n\r\n            <li><p><b >{{mySelf?.firstName}} {{mySelf?.lastName}}</b></p></li>\r\n            <li class=\"sii_toolbar_subnav-item\">\r\n              <div class=\"profile\">\r\n                <!-- Dettagli utente -->\r\n                <dl class=\"eng-user-details\">\r\n                  <dt  i18n=\"@@toolbar_workerId\">Worker ID</dt>\r\n                  <dd >{{mySelf?.workerId}}</dd>\r\n                  <dt ><abbr i18n-title=\"@@toolbar_cc\" title=\"Competence Center\" i18n=\"@@toolbar_cc_dim\">CC</abbr></dt>\r\n                  <dd>{{mySelf?.costCenterId}}</dd>\r\n                  <dt ><abbr  i18n=\"@@toolbar_manager\">Manager</abbr></dt>\r\n                  <dd >{{mySelf.costCenterResp?.firstName}} {{mySelf.costCenterResp?.lastName}}</dd>\r\n                  @if (!!mySelf.tutorWorkerId) {\r\n                    <dt ><abbr i18n=\"@@toolbar_tutor\">Tutor</abbr></dt>\r\n                    <dd>{{mySelf.tutorFistName}} {{mySelf.tutorLastName}}</dd>\r\n                  }\r\n\r\n                  @if (!!mySelf.evaluatorWorkerId) {\r\n                    <dt ><abbr i18n=\"@@toolbar_evaluator\">Evaluator</abbr></dt>\r\n                    <dd>{{mySelf.evaluatorFistName}} {{mySelf.evaluatorLastName}}</dd>\r\n                  }\r\n                </dl>\r\n              </div>\r\n            </li>\r\n            <ul class=\"list-unstyled user-actions\">\r\n              <li><a (click)=\"goToProfile()\"   tabindex=\"0\"  title=\"\" class=\"\"><b i18n=\"@@navbar_goToProfile\">Go To Profile</b> <mat-icon>navigate_next</mat-icon></a></li>\r\n              <li><a href=\"https://password.eng.it/\" target=\"_blank\" title=\"\" class=\"\"><b i18n=\"@@navbar_changePassford\">Change Password</b> <mat-icon>navigate_next</mat-icon></a></li>\r\n              <li><a href=\"https://mysignins.microsoft.com/security-info\" target=\"_blank\" title=\"\" class=\"\"><b i18n=\"@@navbar_mfaSettings\">MFA Settings</b> <mat-icon>navigate_next</mat-icon></a></li>\r\n              <li><a  (click)=\"doLogout()\" tabindex=\"0\" title=\"\" class=\"\"><b i18n=\"@@navbar_logout\">Logout</b> <mat-icon>navigate_next</mat-icon></a></li>\r\n              @if (!!mySelf.delegatedUsers) {\r\n                <li><a  (click)=\"doDelegation()\"     title=\"\" class=\"\"><b i18n=\"@@DelegateLogin\">Login as delegated</b> <mat-icon>navigate_next</mat-icon></a></li>\r\n              }\r\n              @if (!!mySelf.isInDelegation) {\r\n                <li><a (click)=\"doDelegationLogout()\" title=\"\" class=\"\"><b ii18n=\"@@DelegateLogout\">Logout from delegation</b> <mat-icon>navigate_next</mat-icon></a></li>\r\n              }\r\n\r\n            </ul>\r\n\r\n            <li class=\"custom-divider mr-4 \"></li>\r\n\r\n            @if (corporateItCalendarEventsCount!=0) {\r\n              <li><p><b i18n=\"@@toolbar_deadlines\">Deadlines</b></p></li>\r\n              @for (item of corporateItCalendarEvents | async; track item; let index = $index) {\r\n                @if (!item.hideData && item.status=='SCADENZA_OGGI') {\r\n                  <p style=\"width:100% ; margin-top: 1em;\"><sii-badge style=\"padding: 2px 10px; font-weight: 700;\" [background]=\"'#ff9db4'\" [color]=\"'black'\" i18n=\"@@deadline_today\" >today</sii-badge></p>\r\n                }\r\n                @if (!item.hideData && item.status=='IN_SCADENZA') {\r\n                  <p style=\"width:100% ; margin-top: 1em;\">  <sii-badge style=\"padding: 2px 10px; font-weight: 700;\" [background]=\"'#eabf30'\" [color]=\"'black'\" i18n=\"@@deadline_tomorrow\" >tomorrow</sii-badge></p>\r\n                }\r\n                <li  class=\"sii_toolbar_subnav-item\" >\r\n                  <div class=\"notifPreview\">\r\n                    <div  style=\"margin-bottom:20px;\" class=\"notifLabel\">@if (!item.isAllDay) {\r\n                      <span >{{item.time}} - </span>\r\n                    }{{item.subject}}</div>\r\n                    <!-- <div style=\"margin-bottom:12px;\">{{item.date}}</div> -->\r\n                  </div>\r\n                </li>\r\n              }\r\n              <div  (click)=\"goToDeadlines()\"  class=\"allNotif\"><b i18n=\"@@toolbar_allDeadlines\">See all deadlines</b> <mat-icon>navigate_next</mat-icon></div>\r\n              <li class=\"custom-divider mr-4 \"></li>\r\n            }\r\n            @if (sdacNotificationCount!=0) {\r\n              <li class=\"sdacFieldRef\"><p><b i18n=\"@@toolbar_Notification\">Notification</b></p></li>\r\n              @for (ticket of sdacNotification | async ; track ticket) {\r\n                <li class=\"sii_toolbar_subnav-item\">\r\n                  <div class=\"notifPreview\"  (click)=\"openSdacTiketsByCode(ticket.ssCode)\">\r\n                    <span class=\"notifLabel\">{{ticket.ssDescr}}</span>\r\n                    <div style=\"margin-bottom:12px;\">{{ticket.count}} <span i18n=\"@@ticket_items\">{ticket.count,plural,=1 {Item} other {Items}}</span></div>\r\n                  </div>\r\n                </li>\r\n              }\r\n              <div (click)=\"openSdacNotification()\"  class=\"allNotif\"><b i18n=\"@@toolbar_seeAllNotification\">See all notification</b> <mat-icon>navigate_next</mat-icon></div>\r\n              <li class=\"custom-divider mr-4\"></li>\r\n            }\r\n\r\n            @if (sdacTicketCount!=0) {\r\n              <li class=\"sdacFieldRef\"><p><b i18n=\"@@toolbar_taskManagement\">Task Management</b></p></li>\r\n              @for (ticket of sdacTichet | async ; track ticket) {\r\n                <li class=\"sii_toolbar_subnav-item\">\r\n                  <div class=\"notifPreview\"  (click)=\"openSdacTiketsByCode(ticket.ssCode)\">\r\n                    <span class=\"notifLabel\">{{ticket.ssDescr}}</span>\r\n                    <div style=\"margin-bottom:12px;\">{{ticket.count}} <span i18n=\"@@task_ite\">{ticket.count,plural,=1 {Task} other {Tasks}}</span></div>\r\n                  </div>\r\n                </li>\r\n              }\r\n              <div (click)=\"openSdacTicket()\"  class=\"allNotif\"><b i18n=\"@@toolbar_seeAllTask\">See all tasks</b> <mat-icon>navigate_next</mat-icon></div>\r\n              <li class=\"custom-divider mr-4\"></li>\r\n            }\r\n\r\n\r\n\r\n          </ul>\r\n        </div>\r\n\r\n      </li>\r\n    </ul>\r\n  <!-- </mat-sidenav> -->\r\n<!-- </mat-sidenav-container> -->\r\n</div>\r\n}\r\n\r\n\r\n\r\n<ng-template #toolbarMobileMenuTemplate let-currMenu let-isEngageMenu=\"isEngageMenu\">\r\n\r\n  @for (menu of currMenu; track menu; let menuIndex = $index) {\r\n    <li class=\"sii_toolbar_nav_item\"   >\r\n      @if (!menu.submenu || !menu.submenu.columns) {\r\n        <a class=\"sii_toolbar_nav_link\" [ngClass]=\"{'mobileCurrentPage':router.url==menu.url}\"  tabindex=\"0\" (click)=\"navigateUrl(menu,isEngageMenu)\" [title]=\"menu.label\">{{menu.label}}</a>\r\n      }\r\n      @if (menu.submenu && menu.submenu.columns) {\r\n        <a (click)=\"toggleSubmenu($event,menuIndex)\"  class=\"sii_toolbar_nav_link\" [ngClass]=\"{'mobileCurrentPage':router.url==menu.url}\"  [title]=\"menu.label\">{{menu.label}}\r\n          <mat-icon>chevron_right</mat-icon>\r\n        </a>\r\n        <div class=\"sii_toolbar_submenu \" [ngClass]=\"!!subMenuOpenStatus[menuIndex]?'is-open':'is-closed' \" >\r\n          <mat-icon  class=\"sii_toolbar_submenu-icon-back\" (click)=\"toggleSubmenu($event,menuIndex)\">chevron_left</mat-icon>\r\n          <ul class=\"sii_toolbar_subnav\">\r\n            @for (colMenu of menu.submenu.columns; track colMenu) {\r\n              @for (mv of colMenu.items; track mv) {\r\n                @if (!mv.profiling || !!mv.visibleProfiling) {\r\n                  <li   class=\"sii_toolbar_subnav-item\" >\r\n                    <a  class=\"sii_toolbar_subnav__link\" [ngClass]=\"{'mobileCurrentPage':router.url==mv.url}\" tabindex=\"0\" (click)=\"navigateUrl(mv,isEngageMenu);$event.stopImmediatePropagation()\" [title]=\"mv.label\">{{mv.label}}</a>\r\n                  </li>\r\n                }\r\n              }\r\n              @if (colMenu.items?.length>0) {\r\n                <li class=\"custom-divider\"></li>\r\n              }\r\n            }\r\n          </ul>\r\n        </div>\r\n      }\r\n    </li>\r\n  }\r\n</ng-template>\r\n\r\n<ng-template #toolbarMenuTemplate let-currMenu let-isEngageMenu=\"isEngageMenu\">\r\n  <ul class=\"sii_toolbar_navbar_nav menuNavItem\">\r\n    @for (menu of currMenu; track menu) {\r\n      @if (!menu.submenu || !menu.submenu.columns) {\r\n        <li  class=\"sii_toolbar_nav_item menuVoice\" [ngClass]=\"{'currentPage':router.url==menu.url}\">\r\n          <a class=\"sii_toolbar_nav_link\" tabindex=\"0\" (click)=\"navigateUrl(menu, isEngageMenu)\"   [title]=\"menu.label\">{{menu.label}}</a>\r\n        </li>\r\n      }\r\n      @if (menu.submenu && menu.submenu.columns) {\r\n        <li  class=\"sii_toolbar_nav_item menuVoice\"  data-toggle=\"dropdown\"  [ngClass]=\"{'currentPage':router.url==menu.url}\">\r\n          <a  class=\"sii_toolbar_nav_link \"  [title]=\"menu.label\">{{menu.label}} </a>\r\n          <div class=\"toolbarMenuSubVoices\">\r\n            @for (colMenu of menu.submenu.columns; track colMenu) {\r\n              <ul class=\"toolbarMenuSubVoicesCol\" role=\"menu\">\r\n                @for (mv of colMenu.items; track mv) {\r\n                  @if (!mv.profiling || !!mv.visibleProfiling) {\r\n                    <li   >\r\n                      <a tabindex=\"0\" class=\"sii_toolbar_dropdown__link\"  [ngClass]=\"{'mobileCurrentPage':router.url==mv.url}\" [title]=\"mv.label\" (click)=\"navigateUrl(mv, isEngageMenu)\" >{{mv.label}}</a>\r\n                    </li>\r\n                  }\r\n                }\r\n              </ul>\r\n            }\r\n          </div>\r\n        </li>\r\n      }\r\n    }\r\n  </ul>\r\n</ng-template>\r\n", styles: [":host{box-shadow:0 2px 8px #0003;color:#fff;height:72px;padding:0 10px;display:flex;align-items:center;align-content:center;position:relative}a{color:unset}.sii-toolbar_logo_box{position:relative;display:flex;cursor:pointer}.sii-toolbar_logo_engage{height:42px;width:137px;box-sizing:border-box;margin:0 10px}.sii-toolbar__container{display:flex;flex:1;overflow:hidden;flex-wrap:wrap;height:100%}.sii-toolbar__title{text-transform:uppercase;margin-top:auto;margin-bottom:-2px;letter-spacing:.92px;position:absolute;top:-6.3px;left:56.2px;line-height:8px;height:24px;display:flex;align-items:flex-end;font-family:CocoEng;font-size:9px}.text-uppercase{text-transform:uppercase}.categoryTitle{opacity:.8;font-size:12px}.notificheContainer{display:flex;flex-wrap:wrap}.notificheContainer>div{flex:1 1 270px;padding-right:20px;cursor:pointer}.notificheContainer>div .notificheContainerLabel{font-size:1rem;font-weight:900}.notificheContainer>div .notifSub{margin-bottom:12px;opacity:.8;font-size:12px}.allNotif{cursor:pointer;width:200px;display:flex;align-items:center}.sii-toolbar__content{display:flex;flex:1}.sii-toolbar__icon_button{margin:24px 0 0}ul.sii_toolbar_navbar_nav{list-style:none;display:flex;flex-direction:row;flex:1;padding:0 10px 0 5px;margin:0;max-width:1192px}ul.sii_toolbar_navbar_nav.searchNavItem{padding:0 10px;flex:0}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item{letter-spacing:.03rem;display:flex;justify-content:center}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item.currentPage>.sii_toolbar_nav_link:after,ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item:hover>.sii_toolbar_nav_link:after{width:calc(100% - 16px)}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item.sii_toolbar_profile_link:hover:after{width:40px}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item.sii-toolbar__icon_button .sii_toolbar_nav_link{padding-left:7px;padding-right:7px}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item.sii-toolbar__icon_button .sii_toolbar_nav_link mat-icon{margin-bottom:-5px}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .sii_toolbar_nav_link{color:#fff;font-size:12px;font-weight:700;line-height:12px;text-transform:uppercase;position:relative;display:flex;padding:0 15px 23px;outline:none;text-decoration:none;transition:all .3s ease-in-out;cursor:pointer;height:100%;align-items:flex-end;box-sizing:border-box}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .sii_toolbar_nav_link:after,ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item.sii_toolbar_profile_link:after{content:\"\";display:block;width:0;height:4px;background:#c51b88;transition:width .3s;position:absolute;bottom:0;left:8px}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item.sii_toolbar_profile_link:after{left:unset}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .sii_toolbar_nav_link:hover,ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .sii_toolbar_nav_link:focus,ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .sii_toolbar_dropdown__link:hover,ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .sii_toolbar_dropdown__link:focus{color:#ffffffe6}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item:hover>.toolbarMenuSubVoices,ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item:hover>.toolbarSmallContainer{display:flex}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel{flex-direction:column}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-actions{display:flex;justify-content:flex-end;font-size:13px;color:#fff;outline:none;text-decoration:none;transition:all .3s ease-in-out}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-actions a{display:flex;align-items:center;cursor:pointer}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-actions .mat-icon.advsearchIcon{margin-right:5px;transform:scale(.8)}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-form{position:relative;width:100%;margin-top:1rem;margin-bottom:1.8rem;display:flex}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-form .mat-mdc-icon-button{position:absolute;top:8px;right:0}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-form .mat-mdc-icon-button mat-icon{font-size:32px}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-form .search-form__search-input{background-color:transparent;border:none;border-bottom:1px solid rgba(11,22,2,.4);box-sizing:border-box;height:50px;width:100%;position:relative;color:#ffffffbf;border-color:#ffffff40;text-transform:uppercase;font-size:1.25rem;overflow:visible}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-form .search-form__search-input:focus{outline:none}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-form .search-form__search-input::placeholder{color:#ffffffbf;text-transform:uppercase;font-size:1.25rem}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .searchPanel .search-form .search-form__search-icon{font-size:24px;color:#fff;position:absolute;top:16px;right:10px;border:0;background:none;cursor:pointer}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .toolbarSmallContainer{display:none;flex-direction:column;width:350px;position:absolute;overflow:auto;max-height:calc(100vh - var(--toolbarHeight));right:0;background-color:#09090917;-webkit-backdrop-filter:blur(12px) brightness(.75);backdrop-filter:blur(12px) brightness(.75);padding:30px;top:100%;z-index:1000;box-sizing:border-box}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .toolbarMenuSubVoices{display:none;width:100%;position:absolute;right:0;background-color:#09090917;-webkit-backdrop-filter:blur(12px) brightness(.75);backdrop-filter:blur(12px) brightness(.75);padding:1.5rem 3rem;top:100%;z-index:1000;box-sizing:border-box}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .toolbarMenuSubVoices .toolbarMenuSubVoicesCol{flex:1;padding-left:0;list-style:none}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .toolbarMenuSubVoices .toolbarMenuSubVoicesCol li{border-left:.07rem solid rgba(255,255,255,.3);padding-left:1rem;cursor:pointer}ul.sii_toolbar_navbar_nav li.sii_toolbar_nav_item .toolbarMenuSubVoices .toolbarMenuSubVoicesCol li a{text-transform:uppercase;padding:.25rem 0;opacity:1;font-size:.75rem;letter-spacing:.02rem}#menuToggle{z-index:1001;display:none;align-items:center;color:#fff;cursor:pointer;height:unset}#menuToggle .sii_toolbar_manu_bar,#menuToggle .sii_toolbar_manu_bar:after,#menuToggle .sii_toolbar_manu_bar:before{width:30px;height:2px}#menuToggle .sii_toolbar_manu_bar{position:relative;background:#fff;transition:all 0 .3s}#menuToggle .sii_toolbar_manu_bar:before{content:\"\";position:absolute;left:0;bottom:9px;background:#fff;transition:bottom .3s .3s cubic-bezier(.23,1,.32,1),transform .3s cubic-bezier(.23,1,.32,1)}#menuToggle .sii_toolbar_manu_bar:after{content:\"\";position:absolute;left:0;top:9px;background:#fff;transition:top .3s .3s cubic-bezier(.23,1,.32,1),transform .3s cubic-bezier(.23,1,.32,1)}#menuToggle .sii_toolbar_manu_bar.animate{background:#fff0}#menuToggle .sii_toolbar_manu_bar.animate:after{top:0;background:#fff;transform:rotate(45deg);transition:top .3s cubic-bezier(.23,1,.32,1),transform .3s .3s cubic-bezier(.23,1,.32,1)}#menuToggle .sii_toolbar_manu_bar.animate:before{bottom:0;background:#fff;transform:rotate(-45deg);transition:bottom .3s cubic-bezier(.23,1,.32,1),transform .3s .3s cubic-bezier(.23,1,.32,1)}.menu-sidebar{border:0px;background-color:#090909;overflow-y:auto;overflow-x:hidden;display:block;width:100vw;position:fixed;top:var(--fixedToolbarHeight);right:0;height:calc(100vh - var(--fixedToolbarHeight));left:var(--safe-area-inset-left)}.menu-sidebar .custom-divider{height:0;margin:.75rem 0;overflow:hidden;border-top:1px solid #F5F5F5;opacity:.25}.menu-sidebar ul.sii_toolbar_mobile-navbar{position:relative;list-style:none;text-align:left;margin-left:30px;display:block;padding-left:0}.menu-sidebar ul.sii_toolbar_mobile-navbar .sidenavMenuNav{color:#fff;margin-left:-30px}.menu-sidebar ul.sii_toolbar_mobile-navbar .sidenavMenuNav ::ng-deep mat-ink-bar{background-color:#c51b88!important}.menu-sidebar ul.sii_toolbar_mobile-navbar li.profile mat-icon{transform:scale(1.5);opacity:.5;color:#fff}.menu-sidebar ul.sii_toolbar_mobile-navbar li.profile .user-actions{list-style:none;padding:0}.menu-sidebar ul.sii_toolbar_mobile-navbar li.profile .user-actions li a{display:flex;align-items:center;padding:.33rem;padding-left:0;font-size:1.16em;color:#fff;outline:none;text-decoration:none;cursor:pointer}.menu-sidebar ul.sii_toolbar_mobile-navbar li.profile .eng-user-details{margin-top:1rem;display:flex;flex-wrap:wrap}.menu-sidebar ul.sii_toolbar_mobile-navbar li.profile .eng-user-details dt{font-weight:700;text-transform:uppercase;font-size:.65rem;flex:0 0 42%;max-width:42%}.menu-sidebar ul.sii_toolbar_mobile-navbar li.profile .eng-user-details dd{text-transform:none;flex:0 0 58%;max-width:58%;margin-bottom:.5rem;margin-left:0}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item{text-transform:uppercase;font-size:.75rem;padding:0;display:block}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item .sii_toolbar_nav_link{font-size:16px;font-weight:700;line-height:1.2;text-transform:none;position:relative;display:flex;align-items:center;padding:.75rem 0;color:#fff;text-decoration:none;cursor:pointer}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item .sii_toolbar_nav_link mat-icon{transform:scale(1.5);opacity:.5}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item .sii_toolbar_submenu{position:absolute;background-color:#090909;color:#fff;top:12px;transition:left .4s ease;z-index:2;margin-left:-60px;width:calc(100% + 60px);margin-top:-16px;height:calc(100vh - 72px)}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item .sii_toolbar_submenu.is-closed{display:none}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item .sii_toolbar_submenu.is-open{display:flex}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item .sii_toolbar_submenu .sii_toolbar_submenu-icon-back{margin:26px 15px 0 10px;transform:scale(1.5);opacity:.5}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item .sii_toolbar_submenu ul.sii_toolbar_subnav{position:relative;list-style:none;text-align:left;margin-left:0;display:block;padding-left:0;overflow:auto;padding-top:1rem;padding-bottom:8rem;flex:1;padding-right:20px}.menu-sidebar ul.sii_toolbar_mobile-navbar li.sii_toolbar_nav_item .sii_toolbar_submenu ul.sii_toolbar_subnav a.sii_toolbar_subnav__link{font-size:16px;text-transform:none;font-weight:400;display:block;line-height:1.25;padding:.75rem 0}.toolbarSearchLabel{margin-right:.25rem}li.sii_toolbar_nav_item.gotosiiwebButton{width:153px}li.sii_toolbar_nav_item.gotosiiwebButton mat-icon{font-size:15px;padding-left:5px;height:17px}.engageMenuItem .engageMenuItem_link{width:130px}.engageMenuItem .engageMenuItem_box{display:none;justify-content:flex-end;background-color:#041f2ee8;width:100%;position:absolute;right:0;height:60px;top:var(--toolbarHeight)}.engageMenuItem .engageMenuItem_box .sii_toolbar_navbar_nav{justify-content:flex-end}.engageMenuItem:hover .engageMenuItem_box{display:flex}.searchLink{padding-right:7px!important}.search-icon{margin-bottom:-6px}@media screen and (max-width: 576px){.menu-sidebar{height:100vh}.searchPanel{padding:10px!important}}@media screen and (max-width: 1050px){sii-profile-button{margin-bottom:auto!important}#menuToggle{display:flex}.sii-toolbar__container :not(.alwaysVisible).menuNavItem,.sii-toolbar__container :not(.alwaysVisible).sii-toolbar__help,.sii-toolbar__container :not(.alwaysVisible).gotosiiwebButton,.sii-toolbar__container :not(.alwaysVisible).engageMenuItem,.sii-toolbar__container :not(.alwaysVisible).sii-toolbar__icon_button{display:none!important}.toolbarSearchLabel{display:none!important}.search-icon{width:40px;height:40px;font-size:40px;margin-bottom:-5px}}.allNotif{cursor:pointer;display:flex;align-items:center}.notifPreview{padding-bottom:10px;cursor:pointer}.notifPreview .notifLabel{margin:0}.mobileCurrentPage{text-decoration:underline #c51b88!important;text-decoration-thickness:2px!important}.attachmentContainer{display:flex;flex-wrap:wrap}.attachmentContainer .attachmentRow{cursor:pointer;flex:1 1 270px;display:flex;border-bottom:1px solid white;margin-bottom:10px;padding-bottom:10px}.attachmentContainer .attachmentRow .attachmentInfoPanel{display:flex;flex-direction:column;flex:1}.attachmentContainer .attachmentRow .attachmentInfoPanel .attachNameLabel{overflow-wrap:break-word;max-width:240px}.attachmentContainer .attachmentRow .attachmentInfoPanel .attachSubRow{opacity:.8;font-size:12px}.attachmentContainer .attachmentRow .attachment_action{display:flex;flex-direction:column}.attachmentContainer .attachmentRow .attachment_action mat-spinner{margin-left:10px;margin-right:-5px}.attachmentContainer .attachmentRow .attachment_action .attachDeleteButton{margin-right:-12px;margin-top:-11px;margin-bottom:-15px;opacity:.5}.attachmentContainer .attachmentRow .attachment_action .attachDeleteButton:hover{opacity:1}.attachmentContainer .attachmentRow .attachment_action .delete_action_panel{display:flex;margin:-11px -12px -15px -48px}.changeIncoming{animation:pulse 2s infinite}.changeRequired{animation:attention 2s infinite}@keyframes pulse{0%{transform:scale(1.25);fill:gold}70%{transform:scale(1)}to{transform:scale(1.25);fill:gold}}@keyframes attention{0%{transform:scale(4)}to{transform:scale(1)}}\n"] }]
        }], ctorParameters: () => [{ type: i1.SiiToolkitService }, { type: i0.ElementRef }, { type: i2.SiiEngageService }, { type: i3.SdacPreviewService }, { type: i4.Router }, { type: i5.BreakpointObserver }, { type: i6.SiiBreadcrumbService }, { type: i7.DelegationService }, { type: i8.SiiDownloadService }], propDecorators: { autoHide: [{
                type: Input
            }], toolbarTitle: [{
                type: Input
            }], menu: [{
                type: Input
            }], applicationMenu: [{
                type: Input
            }], helpId: [{
                type: Input
            }], showEngageSearch: [{
                type: Input
            }], showEngageMenu: [{
                type: Input
            }], showCloseButton: [{
                type: Input
            }], closeAction: [{
                type: Output
            }], boxShadow: [{
                type: HostBinding,
                args: ['style.box-shadow']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9vbGJhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9zaWktdG9vbGtpdC9zcmMvbGliL2NvbXBvbmVudHMvdG9vbGJhci90b29sYmFyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3NpaS10b29sa2l0L3NyYy9saWIvY29tcG9uZW50cy90b29sYmFyL3Rvb2xiYXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBcUIsS0FBSyxFQUFFLFdBQVcsRUFBNkIsTUFBTSxFQUFFLFlBQVksRUFBNEIsTUFBTSxlQUFlLENBQUM7QUFHNUosT0FBTyxFQUFFLGVBQWUsRUFBYyxZQUFZLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFLakUsT0FBTyxFQUF1Qyx3QkFBd0IsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzNHLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUkzQyxPQUFPLEVBQUUsVUFBVSxFQUFFLG1CQUFtQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFHNUUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFFeEUsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3BELE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDL0QsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sNENBQTRDLENBQUM7QUFDcEYsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQzFELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUN2RCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUN4RSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDbkQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzdDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDdkUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ2pELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQzs7Ozs7Ozs7Ozs7QUFVekQsTUFBTSxPQUFPLGdCQUFnQjtJQXVCM0IsaUJBQWlCLENBQUMsV0FBcUI7UUFDckMsSUFBRyxXQUFXLElBQUUsU0FBUyxFQUFDLENBQUM7WUFDekIsSUFBSSxDQUFDLGtCQUFrQixHQUFHLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDO1FBQ3JELENBQUM7YUFBSSxDQUFDO1lBQ0osSUFBSSxDQUFDLGtCQUFrQixHQUFHLFdBQVcsQ0FBQztRQUN4QyxDQUFDO1FBQ0QsQ0FBQyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ25JLENBQUM7SUFFRCxxQkFBcUI7SUFDckIsSUFBSSxNQUFNO1FBQ1IsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQztJQUNqRCxDQUFDO0lBRUQsSUFBSSxnQkFBZ0I7UUFDbEIsT0FBTyxJQUFJLENBQUMscUJBQXFCLEdBQUMsSUFBSSxDQUFDLGVBQWUsR0FBQyxDQUFDLENBQUE7SUFDMUQsQ0FBQztJQUVELElBQUksZ0JBQWdCO1FBQ2xCLE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDLG1CQUFtQixDQUFDO0lBQ3JELENBQUM7SUFDRCxJQUFJLFVBQVU7UUFDWixPQUFPLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxhQUFhLENBQUM7SUFDL0MsQ0FBQztJQUNELElBQUksZUFBZTtRQUNqQixPQUFPLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLENBQUM7SUFDN0MsQ0FBQztJQUNELElBQUkscUJBQXFCO1FBQ3ZCLE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDLGlCQUFpQixDQUFDO0lBQ25ELENBQUM7SUFDRCxJQUFJLHlCQUF5QjtRQUMzQixPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsdUJBQXVCLENBQUM7SUFDakQsQ0FBQztJQUNELElBQUksOEJBQThCO1FBQ2hDLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyw0QkFBNEIsQ0FBQztJQUN0RCxDQUFDO0lBRUQsSUFBSSxZQUFZLEtBQUcsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsWUFBWSxDQUFFLENBQUMsQ0FBQztJQUNqRSxJQUFJLFFBQVEsS0FBRyxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFFLENBQUMsQ0FBQztJQUNsRCxJQUFJLGlCQUFpQixLQUFHLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUUsQ0FBQyxDQUFDO0lBR2xFLElBQUksU0FBUztRQUNYLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUM7SUFDakUsQ0FBQztJQUVELElBQUksU0FBUztRQUNYLE9BQU8sSUFBSSxDQUFDLGVBQWUsRUFBRSxNQUFNLEtBQUssQ0FBQyxDQUFFO0lBQzdDLENBQUM7SUFFRCxJQUFJLGFBQWE7UUFDZixPQUFPLElBQUksQ0FBQyxhQUFhLEtBQUssS0FBSyxDQUFDO0lBQ3RDLENBQUM7SUFJRCwwREFBMEQ7SUFDMUQsSUFBcUMsU0FBUztRQUM1QyxPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLFdBQVcsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3RGLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLFdBQVcsR0FBRywwQkFBMEIsQ0FBQztJQUNuRixDQUFDO0lBSUQsWUFBb0IsaUJBQW9DLEVBQ3BDLEVBQWMsRUFDZCxVQUE0QixFQUM1QixrQkFBc0MsRUFDdkMsTUFBYyxFQUNkLGtCQUFzQyxFQUNyQyxpQkFBdUMsRUFDeEMsaUJBQW9DLEVBQ3RDLGtCQUFxQztRQVJsQyxzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FBQ3BDLE9BQUUsR0FBRixFQUFFLENBQVk7UUFDZCxlQUFVLEdBQVYsVUFBVSxDQUFrQjtRQUM1Qix1QkFBa0IsR0FBbEIsa0JBQWtCLENBQW9CO1FBQ3ZDLFdBQU0sR0FBTixNQUFNLENBQVE7UUFDZCx1QkFBa0IsR0FBbEIsa0JBQWtCLENBQW9CO1FBQ3JDLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBc0I7UUFDeEMsc0JBQWlCLEdBQWpCLGlCQUFpQixDQUFtQjtRQUN0Qyx1QkFBa0IsR0FBbEIsa0JBQWtCLENBQW1CO1FBN0Y3QyxhQUFRLEdBQUcsSUFBSSxDQUFDO1FBR2hCLG9CQUFlLEdBQTBCLEVBQUUsQ0FBQztRQUc1QyxxQkFBZ0IsR0FBRyxLQUFLLENBQUM7UUFDekIsbUJBQWMsR0FBRyxJQUFJLENBQUM7UUFDL0IscUNBQXFDO1FBQ3JDLHFDQUFxQztRQUM1QixvQkFBZSxHQUFHLEtBQUssQ0FBQztRQUN2QixnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFRLENBQUM7UUFHakQsZUFBVSxHQUFvQyxJQUFJLGVBQWUsQ0FBaUIsRUFBb0IsQ0FBQyxDQUFDO1FBQ3hHLG1CQUFjLEdBQUcsS0FBSyxDQUFDO1FBQ3ZCLHNCQUFpQixHQUFHLEVBQVMsQ0FBRTtRQUMvQixrQkFBYSxHQUFHLEtBQUssQ0FBQztRQUN0QixrQkFBYSxHQUFHLEtBQUssQ0FBQztRQUV0Qix1QkFBa0IsR0FBRyxLQUFLLENBQUM7UUF1RFYsa0JBQWEsR0FBa0IsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQXVCL0QsSUFBSSxDQUFDLGtCQUFrQjthQUN4QixPQUFPLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO2FBQ2hDLFNBQVMsQ0FBQyxDQUFDLEtBQXNCLEVBQUUsRUFBRSxHQUFVLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFNLENBQUMsQ0FBQyxDQUFDO0lBRTlGLENBQUM7SUFDRCxXQUFXLENBQUMsT0FBc0I7UUFDaEMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksRUFBQyxDQUFDO1lBQ2xCLElBQUksQ0FBQyxlQUFlLEdBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxZQUErQixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDL0UsS0FBSyxFQUFFLENBQUMsQ0FBQyxLQUFLO2dCQUNkLFFBQVEsRUFBRSxTQUFTO2dCQUNuQixHQUFHLEVBQUUsQ0FBQyxDQUFDLElBQUk7YUFDYSxDQUFBLENBQUMsQ0FBQztRQUM5QixDQUFDO0lBQ0gsQ0FBQztJQUVELGVBQWU7UUFFYixJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBQyxDQUFDO1lBQ3hDLElBQUksQ0FBQyxVQUFVLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRTtnQkFDekQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzFCLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7cUJBQzdFLFNBQVMsQ0FBQyxDQUFDLFVBQVUsRUFBRSxFQUFFO29CQUN4QixJQUFJLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFDLENBQUM7d0JBQ3pCLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztvQkFDdkMsQ0FBQztnQkFDSCxDQUFDLENBQUMsQ0FBQztZQUNMLENBQUMsQ0FBQyxDQUFDO1FBQ0gsQ0FBQztRQUVELElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxTQUFTLEVBQUMsQ0FBQztZQUM3QixJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FDcEIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxDQUFFLENBQUMsT0FBTyxFQUFFLEVBQUU7Z0JBQ3JFLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1lBQ3pCLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDUixDQUFDO0lBQ0gsQ0FBQztJQUVELFFBQVE7SUFDUixDQUFDO0lBRUQsV0FBVztRQUNULDREQUE0RDtRQUM1RCxJQUFJLENBQUMsYUFBYSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ2pDLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ3JELENBQUM7SUFFRCxZQUFZO1FBQ1YsSUFBSSxJQUFJLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDckMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2hDLENBQUM7SUFDSCxDQUFDO0lBRUQsUUFBUTtRQUNOLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVILGVBQWUsQ0FBQyxHQUFVLEVBQUUsTUFBZ0M7UUFHekQsSUFBRyxNQUFNLElBQUUsd0JBQXdCLENBQUMsSUFBSSxFQUFDLENBQUM7WUFDekMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUMsT0FBTyxDQUFDLENBQUM7UUFDM0IsQ0FBQzthQUFLLElBQUcsTUFBTSxJQUFFLHdCQUF3QixDQUFDLEdBQUcsRUFBQyxDQUFDO1lBQzdDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzVCLENBQUM7YUFBSSxDQUFDO1lBQ0gsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUMsUUFBUSxFQUFDLHNDQUFzQyxDQUFDLENBQUE7UUFDbkUsQ0FBQztJQUdILENBQUM7SUFFQyxXQUFXLENBQUMsS0FBVSxFQUFFLFdBQVcsR0FBRSxLQUFLO1FBQ3hDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUMvQixJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxJQUFJLEtBQUssQ0FBQyxRQUFRLEtBQUssU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLFdBQVcsSUFBSSxLQUFLLENBQUMsUUFBUSxLQUFLLFNBQVMsQ0FBRSxFQUFDLENBQUM7WUFDaEksTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDbEMsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDO1lBQ1osSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUM7Z0JBQ2IsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxHQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUNuSCxDQUFDO1lBQ0QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLFdBQVcsRUFBRSxFQUFFLEVBQUMsQ0FBQyxDQUFDO1FBQ3RELENBQUM7YUFBSSxDQUFDO1lBQ1YsV0FBVztZQUNMLGdDQUFnQztZQUNoQyxNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3RGLElBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBQyxDQUFDO2dCQUNSLElBQUksU0FBUyxHQUFFLEtBQUssQ0FBQyxHQUFHLENBQUM7Z0JBQ3pCLElBQUksU0FBUyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQztvQkFDL0IsU0FBUyxJQUFJLEdBQUcsQ0FBQztnQkFDbkIsQ0FBQztnQkFDRCxTQUFTLElBQUksbUJBQW1CLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztnQkFDbkUsU0FBUyxJQUFJLGFBQWEsR0FBRyxHQUFHLENBQUM7Z0JBQ2pDLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNoRCxDQUFDO2lCQUFJLENBQUM7Z0JBQ0osSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNoRCxDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7SUFFRCxhQUFhLENBQUMsU0FBa0I7UUFDOUIsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLGVBQWUsRUFBQyxDQUFDO1lBQ25DLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUMsQ0FBQztnQkFDNUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUUsRUFBQyxDQUFDLENBQUM7WUFDaEcsQ0FBQztpQkFBSSxDQUFDO2dCQUNKLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFFLENBQUM7WUFDaEgsQ0FBQztRQUNILENBQUM7YUFBSSxDQUFDO1lBQ0osS0FBSyxDQUFDLHFCQUFxQixDQUFDLENBQUM7UUFDL0IsQ0FBQztJQUNILENBQUM7SUFFRCxtQkFBbUIsQ0FBQyxNQUF1QjtRQUN6QyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQzNDLDREQUE0RDtRQUM1RCxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQ3hCLFFBQVEsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUM5QixPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRTtvQkFBRSxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUU7d0JBQzNELEVBQUUsQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFOzRCQUNwQixJQUFJLENBQUMsQ0FBQyxTQUFTLEtBQUssS0FBSyxDQUFDLEVBQUUsRUFBQyxDQUFDO2dDQUFBLENBQUMsQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7NEJBQUMsQ0FBQzt3QkFBQSxDQUFDLENBQUMsQ0FBQztvQkFBQyxDQUFDLENBQUMsQ0FBQztnQkFDbkUsQ0FBQyxDQUFDLENBQUM7WUFDUCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFaEMsQ0FBQztJQUVELFFBQVE7UUFDTixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUdELGVBQWU7UUFDYixJQUFJLENBQUMsaUJBQWlCLEdBQUcsRUFBRSxDQUFDO1FBQzVCLElBQUksQ0FBQyxjQUFjLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDO0lBQzdDLENBQUM7SUFDRCxhQUFhLENBQUMsS0FBVSxFQUFFLE9BQXNCO1FBQzlDLEtBQUssQ0FBQyx3QkFBd0IsRUFBRSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRUQsUUFBUTtRQUNOLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFdBQVcsQ0FBQyxNQUFNLG9CQUFvQixDQUFDO0lBQzNGLENBQUM7SUFFRCxZQUFZO1FBQ1gsSUFBSSxDQUFDLGlCQUFpQixDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ3pDLENBQUM7SUFFRCxrQkFBa0I7UUFDaEIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2xDLENBQUM7SUFJRCxvQkFBb0IsQ0FBQyxJQUFLO1FBQ3pCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBQ0Qsb0JBQW9CO1FBQ2xCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0MsQ0FBQztJQUNELGNBQWM7UUFDWixJQUFJLENBQUMsa0JBQWtCLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFFRCxhQUFhO1FBQ1gsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsRUFBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3pDLENBQUM7YUFBSSxDQUFDO1lBQ04sSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUUsQ0FBQztRQUNuRSxDQUFDO0lBQ0gsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFDLENBQUM7WUFDNUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDdkMsQ0FBQzthQUFJLENBQUM7WUFDSixJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBWSxHQUFHLFVBQVUsQ0FBRSxDQUFDO1FBQ25FLENBQUM7SUFDSCxDQUFDO0lBRUMsMENBQTBDO0lBQzFDLCtEQUErRDtJQUMvRCxvSEFBb0g7SUFDcEgsSUFBSTtJQUVKLGlCQUFpQixDQUFHLEtBQVU7UUFDNUIsTUFBTSxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDO1FBQy9DLElBQUksSUFBSSxDQUFDLGFBQWEsRUFBQyxDQUFDO1lBQ3RCLEtBQUssQ0FBQyx3QkFBd0IsRUFBRSxDQUFDO1lBQ2pDLElBQUksQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDO1lBQzdCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUMvQixJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztRQUMxQyxDQUFDO0lBQ0gsQ0FBQzsrR0FuU1UsZ0JBQWdCO21HQUFoQixnQkFBZ0IsbVpBRmYsQ0FBQyxrQkFBa0IsRUFBQyxXQUFXLENBQUMsK0NDcEM5Qywwd3lCQWlkQSxndmFEOWFjLGFBQWEsNkZBQUUsT0FBTywySUFBRSxnQkFBZ0IsbUpBQUUsV0FBVyx3ZEFBRSxPQUFPLG9GQUFFLFFBQVEsa05BQUUsa0JBQWtCLCtLQUFFLFVBQVUsaVJBQUUsY0FBYyxxR0FBRSxzQkFBc0IsaUdBQW1DLFNBQVMseU9BQUUsVUFBVSxpS0FBRSxTQUFTLHlDQUFFLFdBQVc7OzRGQUdqTyxnQkFBZ0I7a0JBUjVCLFNBQVM7K0JBQ0ksYUFBYSxjQUdYLElBQUksV0FDUCxDQUFDLGFBQWEsRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsV0FBVyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsa0JBQWtCLEVBQUUsVUFBVSxFQUFFLGNBQWMsRUFBRSxzQkFBc0IsRUFBRSxtQkFBbUIsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsV0FBVyxDQUFDLGFBQ2pPLENBQUMsa0JBQWtCLEVBQUMsV0FBVyxDQUFDO3lVQUluQyxRQUFRO3NCQUFoQixLQUFLO2dCQUNHLFlBQVk7c0JBQXBCLEtBQUs7Z0JBQ0csSUFBSTtzQkFBWixLQUFLO2dCQUNHLGVBQWU7c0JBQXZCLEtBQUs7Z0JBRUcsTUFBTTtzQkFBZCxLQUFLO2dCQUNHLGdCQUFnQjtzQkFBeEIsS0FBSztnQkFDRyxjQUFjO3NCQUF0QixLQUFLO2dCQUdHLGVBQWU7c0JBQXZCLEtBQUs7Z0JBQ0ksV0FBVztzQkFBcEIsTUFBTTtnQkFtRThCLFNBQVM7c0JBQTdDLFdBQVc7dUJBQUMsa0JBQWtCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIE9uRGVzdHJveSwgSW5wdXQsIEhvc3RCaW5kaW5nLCBFbGVtZW50UmVmLCBBZnRlclZpZXdJbml0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE15c2VsZkRUTyB9IGZyb20gJy4uLy4uL2R0by9teXNlbGYuZHRvJztcclxuaW1wb3J0IHsgSGVscFBhZ2VEVE8gfSBmcm9tICcuLi8uLi9kdG8vaGVscC1wYWdlLmR0byc7XHJcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgT2JzZXJ2YWJsZSwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IFNpaVRvb2xraXRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2lpLXRvb2xraXQuc2VydmljZSc7XHJcbmltcG9ydCB7IFNpaU1lbnVWb2ljZSB9IGZyb20gJy4uL21lbnUvZ2xvYmFsLW1lbnUvZHRvL21lbnUtdm9pY2UnO1xyXG5pbXBvcnQgeyBTaWlFbmdhZ2VTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZS9zaWktZW5nYWdlLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xyXG5pbXBvcnQgeyBUb29sYmFyTWVudUNhdGVnb3J5LCBUb29sYmFyTWVudUR0bywgVG9vbGJhclN1Ym1lbnVJdGVtT3BlbkluIH0gZnJvbSAnLi4vLi4vZHRvL3Rvb2xiYXItbWVudS5kdG8nO1xyXG5pbXBvcnQgeyBzdGFydFdpdGggfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IFNpaU1lbnVGb2xkZXIgfSBmcm9tICcuLi9tZW51L2dsb2JhbC1tZW51L2R0by9tZW51LWZvbGRlcic7XHJcbmltcG9ydCB7IFNkYWNQcmV2aWV3U2VydmljZSB9IGZyb20gJy4uL2RzaWktY29tcG9uZW50cy9zZGFjLXByZXZpZXcvc2VydmljZS9zZGFjLXByZXZpZXcuc2VydmljZSc7XHJcbmltcG9ydCB7IEJyZWFrcG9pbnRPYnNlcnZlciwgQnJlYWtwb2ludFN0YXRlIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2xheW91dCc7XHJcbmltcG9ydCB7IE1hdFNpZGVuYXYsIE1hdFNpZGVuYXZDb250YWluZXIgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9zaWRlbmF2JztcclxuaW1wb3J0IHsgU2lpQnJlYWRjcnVtYlNlcnZpY2UgfSBmcm9tICcuLi9icmVhZGNydW1iL3NlcnZpY2VzL2JyZWFkY3J1bWIuc2VydmljZSc7XHJcbmltcG9ydCB7IERlbGVnYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vZHNpaS1jb21wb25lbnRzL2RlbGVnYXRpb24vZGVsZWdhdGlvbi5zZXJ2aWNlJztcclxuaW1wb3J0IHsgU2lpRG93bmxvYWRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZS9zaWktZG93bmxvYWQtc2VydmljZSc7XHJcbmltcG9ydCB7IFNpaURvd25sb2FkSXRlbURUTyB9IGZyb20gJy4uLy4uL2R0by9pLXNpaS1kb3dubG9hZC5kdG8nO1xyXG5pbXBvcnQgeyBTaWlEYXRlUGlwZSB9IGZyb20gJy4uL3V0aWwvc2lpLWRhdGUucGlwZSc7XHJcbmltcG9ydCB7IE1hdFRhYk5hdiwgTWF0VGFiTGluayB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3RhYnMnO1xyXG5pbXBvcnQgeyBQcm9maWxlQnV0dG9uQ29tcG9uZW50IH0gZnJvbSAnLi4vcHJvZmlsZS1idXR0b24vcHJvZmlsZS1idXR0b24uY29tcG9uZW50JztcclxuaW1wb3J0IHsgQmFkZ2VDb21wb25lbnQgfSBmcm9tICcuLi9iYWRnZS9iYWRnZS5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBNYXRUb29sdGlwIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvdG9vbHRpcCc7XHJcbmltcG9ydCB7IE1hdFByb2dyZXNzU3Bpbm5lciB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3Byb2dyZXNzLXNwaW5uZXInO1xyXG5pbXBvcnQgeyBNYXRCYWRnZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2JhZGdlJztcclxuaW1wb3J0IHsgRm9ybXNNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IE5nVGVtcGxhdGVPdXRsZXQsIE5nQ2xhc3MsIEFzeW5jUGlwZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7IE1hdEljb24gfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9pY29uJztcclxuaW1wb3J0IHsgTWF0SWNvbkJ1dHRvbiB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2J1dHRvbic7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnc2lpLXRvb2xiYXInLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL3Rvb2xiYXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vdG9vbGJhci5jb21wb25lbnQuc2NzcyddLFxyXG4gICAgc3RhbmRhbG9uZTogdHJ1ZSxcclxuICAgIGltcG9ydHM6IFtNYXRJY29uQnV0dG9uLCBNYXRJY29uLCBOZ1RlbXBsYXRlT3V0bGV0LCBGb3Jtc01vZHVsZSwgTmdDbGFzcywgTWF0QmFkZ2UsIE1hdFByb2dyZXNzU3Bpbm5lciwgTWF0VG9vbHRpcCwgQmFkZ2VDb21wb25lbnQsIFByb2ZpbGVCdXR0b25Db21wb25lbnQsIE1hdFNpZGVuYXZDb250YWluZXIsIE1hdFNpZGVuYXYsIE1hdFRhYk5hdiwgTWF0VGFiTGluaywgQXN5bmNQaXBlLCBTaWlEYXRlUGlwZV0sXHJcbiAgICBwcm92aWRlcnM6W1NpaURvd25sb2FkU2VydmljZSxTaWlEYXRlUGlwZV1cclxufSlcclxuZXhwb3J0IGNsYXNzIFRvb2xiYXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSwgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzIHtcclxuXHJcbiAgQElucHV0KCkgYXV0b0hpZGUgPSB0cnVlO1xyXG4gIEBJbnB1dCgpIHRvb2xiYXJUaXRsZTogc3RyaW5nO1xyXG4gIEBJbnB1dCgpIG1lbnU6IFNpaU1lbnVWb2ljZVtdO1xyXG4gIEBJbnB1dCgpIGFwcGxpY2F0aW9uTWVudTogVG9vbGJhck1lbnVDYXRlZ29yeVtdID0gW107XHJcblxyXG4gIEBJbnB1dCgpIGhlbHBJZDogc3RyaW5nO1xyXG4gIEBJbnB1dCgpIHNob3dFbmdhZ2VTZWFyY2ggPSBmYWxzZTtcclxuICBASW5wdXQoKSBzaG93RW5nYWdlTWVudSA9IHRydWU7XHJcbiAgLy8gQElucHV0KCkgc2hvd0dsb2JhbFNlYXJjaCA9IGZhbHNlO1xyXG4gIC8vIEBJbnB1dCgpIGVuYWJsZUdsb2JhbE1lbnUgPSBmYWxzZTtcclxuICBASW5wdXQoKSBzaG93Q2xvc2VCdXR0b24gPSBmYWxzZTtcclxuICBAT3V0cHV0KCkgY2xvc2VBY3Rpb24gPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XHJcblxyXG4gIGhlbFBhZ2U6IEhlbHBQYWdlRFRPO1xyXG4gIG1lbnVWb2ljZXM6IEJlaGF2aW9yU3ViamVjdDxUb29sYmFyTWVudUR0bz4gPSBuZXcgQmVoYXZpb3JTdWJqZWN0PFRvb2xiYXJNZW51RHRvPih7fSBhcyBUb29sYmFyTWVudUR0byk7XHJcbiAgbWVudU1vYmlsZU9wZW4gPSBmYWxzZTtcclxuICBzdWJNZW51T3BlblN0YXR1cyA9IHt9IGFzIGFueSA7XHJcbiAgbW9iaWxlVG9vbGJhciA9IGZhbHNlO1xyXG4gIGFjdGl2ZU1vYk1lbnUgPSAnYXBwJztcclxuXHJcbiAgbWVudVNpZGViYXJWaXNpYmxlID0gZmFsc2U7XHJcbiAgdG9nZ2xlTWVudVNpZGViYXIoZm9yY2VTdGF0dXM/OiBib29sZWFuKXsgIFxyXG4gICAgaWYoZm9yY2VTdGF0dXM9PXVuZGVmaW5lZCl7XHJcbiAgICAgIHRoaXMubWVudVNpZGViYXJWaXNpYmxlID0gIXRoaXMubWVudVNpZGViYXJWaXNpYmxlO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgIHRoaXMubWVudVNpZGViYXJWaXNpYmxlID0gZm9yY2VTdGF0dXM7XHJcbiAgICB9XHJcbiAgICAhIXRoaXMubWVudVNpZGViYXJWaXNpYmxlID8gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCd1bnNjcm9sbGFibGVCb2R5JykgOiBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3Vuc2Nyb2xsYWJsZUJvZHknKTtcclxuICB9XHJcblxyXG4gIC8vIG15U2VsZjogTXlzZWxmRFRPO1xyXG4gIGdldCBteVNlbGYoKTogTXlzZWxmRFRPe1xyXG4gICAgcmV0dXJuIHRoaXMuc2lpVG9vbGtpdFNlcnZpY2UubG9nZ2VkVXNlci52YWx1ZTtcclxuICB9XHJcblxyXG4gIGdldCBoYXZlTm90aWZpY2F0aW9uKCl7XHJcbiAgICByZXR1cm4gdGhpcy5zZGFjTm90aWZpY2F0aW9uQ291bnQrdGhpcy5zZGFjVGlja2V0Q291bnQ+MFxyXG4gIH1cclxuXHJcbiAgZ2V0IHNkYWNOb3RpZmljYXRpb24oKXtcclxuICAgIHJldHVybiB0aGlzLnNkYWNQcmV2aWV3U2VydmljZS5ub3RpZmljYXRpb25QcmV2aWV3O1xyXG4gIH1cclxuICBnZXQgc2RhY1RpY2hldCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuc2RhY1ByZXZpZXdTZXJ2aWNlLnRpY2tldFByZXZpZXc7XHJcbiAgfVxyXG4gIGdldCBzZGFjVGlja2V0Q291bnQoKXtcclxuICAgIHJldHVybiB0aGlzLnNkYWNQcmV2aWV3U2VydmljZS50aWNrZXRDb3VudDtcclxuICB9XHJcbiAgZ2V0IHNkYWNOb3RpZmljYXRpb25Db3VudCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuc2RhY1ByZXZpZXdTZXJ2aWNlLm5vdGlmaWNhdGlvbkNvdW50O1xyXG4gIH1cclxuICBnZXQgY29ycG9yYXRlSXRDYWxlbmRhckV2ZW50cygpe1xyXG4gICAgcmV0dXJuIHRoaXMuZW5nYWdlU2Vydi5jb3Jwb3JhdGVDYWxlbmRhckV2ZW50cztcclxuICB9XHJcbiAgZ2V0IGNvcnBvcmF0ZUl0Q2FsZW5kYXJFdmVudHNDb3VudCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuZW5nYWdlU2Vydi5jb3Jwb3JhdGVDYWxlbmRhckV2ZW50c0NvdW50O1xyXG4gIH1cclxuXHJcbiAgZ2V0IGlzU2VydmVybGVzcygpe3JldHVybiB0aGlzLnNpaVRvb2xraXRTZXJ2aWNlLmlzU2VydmVybGVzcyA7IH1cclxuICBnZXQgaXNFbmdhZ2UoKXtyZXR1cm4gdGhpcy5lbmdhZ2VTZXJ2LmlzRW5nYWdlIDsgfVxyXG4gIGdldCBpc0VuZ2FnZUF2YWlsYWJsZSgpe3JldHVybiB0aGlzLmVuZ2FnZVNlcnYuZW5nYWdlQXZhaWxhYmxlIDsgfVxyXG5cclxuXHJcbiAgZ2V0IGVuZ01lbnVPaygpe1xyXG4gICAgcmV0dXJuIHRoaXMuaXNFbmdhZ2VBdmFpbGFibGUgJiYgISF0aGlzLm1lbnVWb2ljZXMudmFsdWU/Lm1lbnU7XHJcbiAgfVxyXG5cclxuICBnZXQgYXBwTWVudU9rKCl7XHJcbiAgICByZXR1cm4gdGhpcy5hcHBsaWNhdGlvbk1lbnU/Lmxlbmd0aCAhPT0gMCA7XHJcbiAgfVxyXG5cclxuICBnZXQgYXBwTWVudUFjdGl2ZSgpe1xyXG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlTW9iTWVudSA9PT0gJ2FwcCc7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlYWRvbmx5IHN1YnNjcmlwdGlvbnM6IFN1YnNjcmlwdGlvbiAgPSBuZXcgU3Vic2NyaXB0aW9uKCk7XHJcblxyXG4gIC8vIEBIb3N0QmluZGluZygnc3R5bGUuYm94LXNoYWRvdycpIGJveFNoYWRvdyA9ICdpbml0aWFsJztcclxuICBASG9zdEJpbmRpbmcoJ3N0eWxlLmJveC1zaGFkb3cnKSBnZXQgYm94U2hhZG93KCl7XHJcbiAgICByZXR1cm4gdGhpcy5zaWlUb29sa2l0U2VydmljZS5sb2dnZWRVc2VyLnZhbHVlLnRvb2xiYXJNb2RlID09PSB1bmRlZmluZWQgPyAnaW5pdGlhbCcgOlxyXG4gICAgdGhpcy5zaWlUb29sa2l0U2VydmljZS5sb2dnZWRVc2VyLnZhbHVlLnRvb2xiYXJNb2RlICsgJyAwcHggMnB4IDIwcHggMTZweCBpbnNldCc7XHJcbiAgfVxyXG5cclxuXHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgc2lpVG9vbGtpdFNlcnZpY2U6IFNpaVRvb2xraXRTZXJ2aWNlLFxyXG4gICAgICAgICAgICAgIHB1YmxpYyAgZWw6IEVsZW1lbnRSZWYsXHJcbiAgICAgICAgICAgICAgcHJpdmF0ZSBlbmdhZ2VTZXJ2OiBTaWlFbmdhZ2VTZXJ2aWNlLFxyXG4gICAgICAgICAgICAgIHByaXZhdGUgc2RhY1ByZXZpZXdTZXJ2aWNlOiBTZGFjUHJldmlld1NlcnZpY2UsXHJcbiAgICAgICAgICAgICAgcHVibGljIHJvdXRlcjogUm91dGVyLFxyXG4gICAgICAgICAgICAgIHB1YmxpYyBicmVha3BvaW50T2JzZXJ2ZXI6IEJyZWFrcG9pbnRPYnNlcnZlciwgXHJcbiAgICAgICAgICAgICAgcHJpdmF0ZSBzaWlCcmVhZGNydW1iU2VydjogU2lpQnJlYWRjcnVtYlNlcnZpY2UsXHJcbiAgICAgICAgICAgICAgcHVibGljIGRlbGVnYXRpb25TZXJ2aWNlOiBEZWxlZ2F0aW9uU2VydmljZSxcclxuICAgICAgICAgICAgcHVibGljIHNpaURvd25sb2FkU2VydmljZTpTaWlEb3dubG9hZFNlcnZpY2UpIHtcclxuXHJcblxyXG5cclxuXHJcbiAgICAgIHRoaXMuYnJlYWtwb2ludE9ic2VydmVyXHJcbiAgICAub2JzZXJ2ZShbJyhtYXgtd2lkdGg6IDEwNTBweCknXSlcclxuICAgIC5zdWJzY3JpYmUoKHN0YXRlOiBCcmVha3BvaW50U3RhdGUpID0+IHsgICAgICAgIHRoaXMubW9iaWxlVG9vbGJhciA9IHN0YXRlLm1hdGNoZXM7ICAgICAgfSk7XHJcblxyXG4gIH1cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgICBpZiAoISFjaGFuZ2VzLm1lbnUpe1xyXG4gICAgICB0aGlzLmFwcGxpY2F0aW9uTWVudSA9IChjaGFuZ2VzLm1lbnUuY3VycmVudFZhbHVlIGFzIFNpaU1lbnVWb2ljZVtdKS5tYXAoKG0pID0+ICh7XHJcbiAgICAgICAgbGFiZWw6IG0udGl0bGUsXHJcbiAgICAgICAgbG9jYXRpb246ICdpbnRlcm5hJyxcclxuICAgICAgICB1cmw6IG0ubGlua1xyXG4gICAgICB9IGFzIFRvb2xiYXJNZW51Q2F0ZWdvcnkgKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNFbmdhZ2UgfHwgdGhpcy5zaG93RW5nYWdlTWVudSl7XHJcbiAgICAgIHRoaXMuZW5nYWdlU2Vydi5nZXRUb29sYmFyTWVudVZvaWNlcygpLnN1YnNjcmliZSgocmVzKSA9PiB7XHJcbiAgICAgIHRoaXMubWVudVZvaWNlcy5uZXh0KHJlcyk7XHJcbiAgICAgIHRoaXMuZW5nYWdlU2Vydi5jdXJyZW50TWVudS5waXBlKHN0YXJ0V2l0aCh0aGlzLmVuZ2FnZVNlcnYuY3VycmVudE1lbnUudmFsdWUpKVxyXG4gICAgICAuc3Vic2NyaWJlKChjdXJyTWVuUmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKGN1cnJNZW5SZXMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICB0aGlzLmNoZWNrUHJvZmlsZWRWb2ljZXMoY3Vyck1lblJlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmhlbHBJZCAhPT0gdW5kZWZpbmVkKXtcclxuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZChcclxuICAgICAgICB0aGlzLnNpaVRvb2xraXRTZXJ2aWNlLmdldEhlbHBQYWdlKHRoaXMuaGVscElkKS5zdWJzY3JpYmUoIChoZWxQYWdlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmhlbFBhZ2UgPSBoZWxQYWdlO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAvLyBub3QgbmVlZGVkIHNpbmNlIGl0J3MgYSBjb2xkIG9ic2VydmFibGUgYnV0IGdvb2QgcHJhY3RpY2VcclxuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy51bnN1YnNjcmliZSgpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCd1bnNjcm9sbGFibGVCb2R5Jyk7XHJcbiAgfVxyXG5cclxuICBnb1RvSGVscFBhZ2UoKSB7XHJcbiAgICBpZiAodGhpcy5oZWxQYWdlICYmIHRoaXMuaGVsUGFnZS51cmwpIHtcclxuICAgICAgd2luZG93Lm9wZW4odGhpcy5oZWxQYWdlLnVybCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbG9zZUFjdCgpe1xyXG4gICAgdGhpcy5jbG9zZUFjdGlvbi5uZXh0KCk7XHJcbiAgfVxyXG5cclxub3BlblVybEluV2luZG93KHVybDpzdHJpbmcsIG9wZW5Jbj86VG9vbGJhclN1Ym1lbnVJdGVtT3BlbkluKXtcclxuXHJcblxyXG4gICBpZihvcGVuSW49PVRvb2xiYXJTdWJtZW51SXRlbU9wZW5Jbi5zZWxmKXtcclxuICAgIHdpbmRvdy5vcGVuKHVybCwnX3NlbGYnKTtcclxuICB9ZWxzZSBpZihvcGVuSW49PVRvb2xiYXJTdWJtZW51SXRlbU9wZW5Jbi50YWIpe1xyXG4gICAgd2luZG93Lm9wZW4odXJsLCdfYmxhbmsnKTtcclxuICB9ZWxzZXtcclxuICAgICB3aW5kb3cub3Blbih1cmwsJ19ibGFuaycsYHRhcmdldD1fYmxhbmssd2lkdGg9NDAwMCxoZWlnaHQ9NDAwMGApXHJcbiAgfVxyXG5cclxuXHJcbn1cclxuXHJcbiAgbmF2aWdhdGVVcmwodm9pY2U6IGFueSwgZW5nYWdlVm9pY2U9IGZhbHNlKXtcclxuICAgIHRoaXMuc2lpQnJlYWRjcnVtYlNlcnYucmVzZXQoKTtcclxuICAgIGlmICgoZW5nYWdlVm9pY2UgJiYgdGhpcy5lbmdhZ2VTZXJ2LmlzRW5nYWdlICYmIHZvaWNlLmxvY2F0aW9uID09PSAnaW50ZXJuYScpIHx8ICghZW5nYWdlVm9pY2UgJiYgdm9pY2UubG9jYXRpb24gIT09ICdlc3Rlcm5hJyApKXtcclxuICAgICAgY29uc3Qgc3BsdSA9IHZvaWNlLnVybC5zcGxpdCgnPycpO1xyXG4gICAgICBsZXQgcXAgPSB7fTtcclxuICAgICAgaWYgKCEhc3BsdVsxXSl7XHJcbiAgICAgICAgcXAgPSBzcGx1WzFdLnNwbGl0KCcmJykubWFwKGkgPT4gaS5zcGxpdCgnPScpKS5yZWR1Y2UoKGFjYywgaXRlbSkgPT4ge2FjY1tpdGVtWzBdXSA9IGl0ZW1bMV07IHJldHVybiBhY2M7IH0sIHt9KTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbc3BsdVswXV0sIHsgcXVlcnlQYXJhbXM6IHFwfSk7XHJcbiAgICB9ZWxzZXtcclxuLy8gZGVidWdnZXJcclxuICAgICAgLy9hZ2dpdW5nbyBsYSBjb21wYW55IGRpIGRlZmF1bHRcclxuICAgICAgY29uc3QgZHVjID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkZWZhdWx0VXNlckNvbXBhbnktJyArIHRoaXMubXlTZWxmLndvcmtlcklkKTtcclxuICAgICAgaWYoISFkdWMpe1xyXG4gICAgICAgIGxldCB1cmxUb0NhbGw9IHZvaWNlLnVybDtcclxuICAgICAgICBpZiAodXJsVG9DYWxsLmluZGV4T2YoJz8nKSA8IDApIHtcclxuICAgICAgICAgIHVybFRvQ2FsbCArPSAnPyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVybFRvQ2FsbCArPSAnJldlYkNhY2hlTG9jYWxJZD0nICsgbmV3IERhdGUoKS5nZXRUaW1lKCkudG9TdHJpbmcoKTtcclxuICAgICAgICB1cmxUb0NhbGwgKz0gJyZzb2Njb2RpY2U9JyArIGR1YztcclxuICAgICAgICB0aGlzLm9wZW5VcmxJbldpbmRvdyh1cmxUb0NhbGwsIHZvaWNlLm9wZW5Jbik7XHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIHRoaXMub3BlblVybEluV2luZG93KHZvaWNlLnVybCwgdm9pY2Uub3BlbkluKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcGVyZm9ybVNlYXJjaCh0eHRTZWFyY2g/OiBzdHJpbmcpe1xyXG4gICAgaWYgKHRoaXMuZW5nYWdlU2Vydi5lbmdhZ2VBdmFpbGFibGUpe1xyXG4gICAgICBpZiAodGhpcy5lbmdhZ2VTZXJ2LmlzRW5nYWdlKXtcclxuICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbJ3NlYXJjaCddLCB7IHF1ZXJ5UGFyYW1zOiAoISF0eHRTZWFyY2ggPyB7IHNlYXJjaDogdHh0U2VhcmNoIH0gOiB7fSApfSk7XHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIHRoaXMub3BlblVybEluV2luZG93KHRoaXMuZW5nYWdlU2Vydi5lbmdhZ2VEb21haW4gKyAoISF0eHRTZWFyY2ggPyBgc2VhcmNoP3NlYXJjaD0ke3R4dFNlYXJjaH1gIDogJ3NlYXJjaCcpICk7XHJcbiAgICAgIH1cclxuICAgIH1lbHNle1xyXG4gICAgICBhbGVydCgnZW5hZ2FnZSB1bmF2YWlsYWJsZScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2hlY2tQcm9maWxlZFZvaWNlcyh2b2ljZXM6IFNpaU1lbnVGb2xkZXJbXSl7XHJcbiAgICBjb25zdCB0bXBNZW51ID0gdGhpcy5tZW51Vm9pY2VzLmdldFZhbHVlKCk7XHJcbiAgICAvLyBtb3N0cm8gbGUgdm9jaSBkZWxsYSBuYXZiYXIgc2UgbCB1dGVudGUgIG5lIGhhIHZpc2liaWxpdMOgXHJcbiAgICB2b2ljZXMuZm9yRWFjaChjYXRlZ29yeSA9PiB7XHJcbiAgICAgIGNhdGVnb3J5LnZvaWNlcy5mb3JFYWNoKHZvaWNlID0+IHtcclxuICAgICAgICB0bXBNZW51Lm1lbnUuZm9yRWFjaChtdiA9PiB7bXYuc3VibWVudT8uY29sdW1ucy5mb3JFYWNoKHNjID0+IHtcclxuICAgICAgICAgIHNjLml0ZW1zPy5mb3JFYWNoKHYgPT4ge1xyXG4gICAgICAgICAgICBpZiAodi5wcm9maWxpbmcgPT09IHZvaWNlLmlkKXt2LnZpc2libGVQcm9maWxpbmcgPSB0cnVlOyB9fSk7IH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLm1lbnVWb2ljZXMubmV4dCh0bXBNZW51KTtcclxuXHJcbiAgfVxyXG5cclxuICBnb1RvSG9tZSgpe1xyXG4gICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoWycvJ10pO1xyXG4gIH1cclxuXHJcblxyXG4gIG1vYmlsZU1lbnVDbGljaygpe1xyXG4gICAgdGhpcy5zdWJNZW51T3BlblN0YXR1cyA9IHt9O1xyXG4gICAgdGhpcy5tZW51TW9iaWxlT3BlbiA9ICF0aGlzLm1lbnVNb2JpbGVPcGVuO1xyXG4gIH1cclxuICB0b2dnbGVTdWJtZW51KGV2ZW50OiBhbnksIHNtSW5kZXg6IG51bWJlcnxzdHJpbmcpe1xyXG4gICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICB0aGlzLnN1Yk1lbnVPcGVuU3RhdHVzW3NtSW5kZXhdID0gIXRoaXMuc3ViTWVudU9wZW5TdGF0dXNbc21JbmRleF07XHJcbiAgfVxyXG5cclxuICBkb0xvZ291dCgpIHtcclxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYCR7dGhpcy5zaWlUb29sa2l0U2VydmljZS5lbnZpcm9ubWVudC5kb21haW59L3NpaV9jb21tb24vbG9nb3V0YDtcclxuIH1cclxuXHJcbiBkb0RlbGVnYXRpb24oKSB7XHJcbiAgdGhpcy5kZWxlZ2F0aW9uU2VydmljZS5vcGVuRGVsZWdhdGlvbigpO1xyXG4gfVxyXG5cclxuIGRvRGVsZWdhdGlvbkxvZ291dCgpe1xyXG4gICB0aGlzLmRlbGVnYXRpb25TZXJ2aWNlLmxvZ291dCgpO1xyXG4gfVxyXG5cclxuXHJcblxyXG4gb3BlblNkYWNUaWtldHNCeUNvZGUoY29kZT8pe1xyXG4gIHRoaXMuc2RhY1ByZXZpZXdTZXJ2aWNlLm9wZW5TZGFjVGlrZXRzQnlDb2RlKGNvZGUpO1xyXG59XHJcbm9wZW5TZGFjTm90aWZpY2F0aW9uKCl7XHJcbiAgdGhpcy5zZGFjUHJldmlld1NlcnZpY2Uub3BlblNkYWNUeXBlKHRydWUpO1xyXG59XHJcbm9wZW5TZGFjVGlja2V0KCl7XHJcbiAgdGhpcy5zZGFjUHJldmlld1NlcnZpY2Uub3BlblNkYWNUeXBlKGZhbHNlKTtcclxufVxyXG5cclxuZ29Ub0RlYWRsaW5lcygpe1xyXG4gIGlmICh0aGlzLmVuZ2FnZVNlcnYuaXNFbmdhZ2Upe1xyXG4gICAgdGhpcy5yb3V0ZXIubmF2aWdhdGVCeVVybCgnZGVhZGxpbmVzJyk7XHJcbiAgfWVsc2V7XHJcbiAgdGhpcy5vcGVuVXJsSW5XaW5kb3codGhpcy5lbmdhZ2VTZXJ2LmVuZ2FnZURvbWFpbiArICcvZGVhZGxpbmVzJyApO1xyXG4gIH1cclxufVxyXG5cclxuZ29Ub1Byb2ZpbGUoKXtcclxuICBpZiAodGhpcy5lbmdhZ2VTZXJ2LmlzRW5nYWdlKXtcclxuICAgIHRoaXMucm91dGVyLm5hdmlnYXRlQnlVcmwoJ3Byb2ZpbGUnKTtcclxuICB9ZWxzZXtcclxuICAgIHRoaXMub3BlblVybEluV2luZG93KHRoaXMuZW5nYWdlU2Vydi5lbmdhZ2VEb21haW4gKyAnL3Byb2ZpbGUnICk7XHJcbiAgfVxyXG59XHJcblxyXG4gIC8vIHNpZGVuYXZWaXNpYmxlQ2hhbmdlKHZpc2libGU6IGJvb2xlYW4pe1xyXG4gIC8vICAgLy8gZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IHZpc2libGUgPyAnaGlkZGVuJyA6ICcnO1xyXG4gIC8vICAgdmlzaWJsZSA/IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgndW5zY3JvbGxhYmxlQm9keScpIDogZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCd1bnNjcm9sbGFibGVCb2R5Jyk7XHJcbiAgLy8gfVxyXG5cclxuICB0b2dnbGVQcm9maWxlSW5mbyggIGV2ZW50OiBhbnkpe1xyXG4gICAgY29uc3Qgc3RhdHVzID0gIXRoaXMuc3ViTWVudU9wZW5TdGF0dXMucHJvZmlsZTtcclxuICAgIGlmICh0aGlzLm1vYmlsZVRvb2xiYXIpe1xyXG4gICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgdGhpcy5tZW51TW9iaWxlT3BlbiA9IHN0YXR1cztcclxuICAgICAgdGhpcy50b2dnbGVNZW51U2lkZWJhcihzdGF0dXMpO1xyXG4gICAgICB0aGlzLnN1Yk1lbnVPcGVuU3RhdHVzLnByb2ZpbGUgPSBzdGF0dXM7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuIFxyXG59XHJcbiIsIlxyXG5cclxuQGlmIChzaG93Q2xvc2VCdXR0b24pIHtcclxuICA8YnV0dG9uIG1hdC1pY29uLWJ1dHRvbiBhcmlhLWxhYmVsPVwiQ2xvc2VcIiAoY2xpY2spPVwiY2xvc2VBY3QoKVwiPlxyXG4gICAgPG1hdC1pY29uPmNsb3NlPC9tYXQtaWNvbj5cclxuICA8L2J1dHRvbj5cclxufVxyXG5cclxuPCEtLSA8c2lpLW1lbnUgKm5nSWY9XCIobWVudSAmJiBtZW51Lmxlbmd0aD4wKSB8fCBlbmFibGVHbG9iYWxNZW51XCIgW3ZvaWNlc109XCJtZW51XCIgW2VuYWJsZUdsb2JhbE1lbnVdPVwiZW5hYmxlR2xvYmFsTWVudVwiPjwvc2lpLW1lbnU+IC0tPlxyXG48IS0tIDxpbWcgY2xhc3M9XCJzaWktdG9vbGJhcl9fbG9nb1wiIHNyYz1cImFzc2V0cy9pY29ucy9sb2dvLnBuZ1wiID4gLS0+XHJcbjxkaXYgY2xhc3M9XCJzaWktdG9vbGJhcl9sb2dvX2JveFwiIChjbGljayk9XCJnb1RvSG9tZSgpXCIgPlxyXG4gIDxtYXQtaWNvbiBjbGFzcz1cInNpaS10b29sYmFyX2xvZ29fZW5nYWdlXCIgc3ZnSWNvbj1cImxvZ29fZW5nYWdlXCI+PC9tYXQtaWNvbj5cclxuICA8ZGl2IGNsYXNzPVwic2lpLXRvb2xiYXJfX3RpdGxlXCI+IHt7dG9vbGJhclRpdGxlfX0gPC9kaXY+XHJcbjwvZGl2PlxyXG48ZGl2IGNsYXNzPVwic2lpLXRvb2xiYXJfX2NvbnRhaW5lclwiID5cclxuICA8IS0tIDxkaXYgY2xhc3M9XCJzaWktdG9vbGJhcl9fdGl0bGVcIj4ge3t0b29sYmFyVGl0bGV9fSA8L2Rpdj4gLS0+XHJcbiAgPGRpdiBjbGFzcz1cInNpaS10b29sYmFyX19jb250ZW50XCI+XHJcblxyXG4gICAgPCEtLVxyXG5cclxuICAgIGlzRW5nYWdlICB8ICBhcHBNZW51T2sgfCBlbmdNZW51T2sgfCAgZW5nICB8IGFwcCB8IG1pbkVuZ1xyXG4gICAgMSAgICAgICAgICAxICAgICAgICAgICAxICAgICAgICAgLSAgICAgICAxICAgICAxXHJcbiAgICAxICAgICAgICAgIDEgICAgICAgICAgIDAgICAgICAgICAtICAgICAgIDEgICAgIC1cclxuICAgIDEgICAgICAgICAgMCAgICAgICAgICAgMSAgICAgICAgIDEgICAgICAgLSAgICAgLVxyXG4gICAgMSAgICAgICAgICAwICAgICAgICAgICAwICAgICAgICAgLSAgICAgICAtICAgICAtXHJcbiAgICAwICAgICAgICAgIDEgICAgICAgICAgIDEgICAgICAgICAtICAgICAgIDEgICAgIDFcclxuICAgIDAgICAgICAgICAgMSAgICAgICAgICAgMCAgICAgICAgIC0gICAgICAgMSAgICAgLVxyXG4gICAgMCAgICAgICAgICAwICAgICAgICAgICAxICAgICAgICAgLSAgICAgICAtICAgICAxXHJcbiAgICAwICAgICAgICAgIDAgICAgICAgICAgIDAgICAgICAgICAtICAgICAgIC0gICAgIC1cclxuXHJcbiAgICBlbmcgICAgID0+IGlzRW5nYWdlICYmIGVuZ01lbnVPayAmJiAhYXBwTWVudU9rXHJcbiAgICBhcHAgICAgID0+IGFwcE1lbnVPa1xyXG4gICAgbWluRW5nICA9PiAoaXNFbmdhZ2UgJiYgYXBwTWVudU9rICYmIGVuZ01lbnVPaykgfHwgKCFpc0VuZ2FnZSAmJiBlbmdNZW51T2spXHJcblxyXG4gICAgLS0+XHJcblxyXG5cclxuXHJcbiAgICBAaWYgKCBpc0VuZ2FnZSAmJiBlbmdNZW51T2sgJiYgIWFwcE1lbnVPaykge1xyXG4gICAgICA8bmctY29udGFpbmVyICAqbmdUZW1wbGF0ZU91dGxldD1cInRvb2xiYXJNZW51VGVtcGxhdGU7Y29udGV4dDp7JGltcGxpY2l0OiAobWVudVZvaWNlcyB8IGFzeW5jKT8ubWVudSwgaXNFbmdhZ2VNZW51OnRydWV9XCIgPiAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgIH1cclxuXHJcbiAgICBAaWYgKGFwcE1lbnVPaykge1xyXG4gICAgICA8bmctY29udGFpbmVyICAqbmdUZW1wbGF0ZU91dGxldD1cInRvb2xiYXJNZW51VGVtcGxhdGU7Y29udGV4dDp7JGltcGxpY2l0OiBhcHBsaWNhdGlvbk1lbnUgLCBpc0VuZ2FnZU1lbnU6ZmFsc2V9XCIgPiAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgIH1cclxuXHJcblxyXG4gICAgPHNwYW4gW3N0eWxlLm1hcmdpbkxlZnRdPVwiJ2F1dG8nXCI+PC9zcGFuPlxyXG5cclxuICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cclxuXHJcblxyXG5cclxuXHJcbiAgICA8IS0tIDxzaWktZ2xvYmFsLXNlYXJjaCAqbmdJZj1cInNob3dHbG9iYWxTZWFyY2hcIj48L3NpaS1nbG9iYWwtc2VhcmNoPiAtLT5cclxuICAgIDx1bCBjbGFzcz1cInNpaV90b29sYmFyX25hdmJhcl9uYXYgc2VhcmNoTmF2SXRlbVwiIHN0eWxlPVwicGFkZGluZy1yaWdodDogMDtcIj5cclxuICAgICAgPCEtLSBzZWFyY2ggLS0+XHJcbiAgICAgIEBpZiAoaXNFbmdhZ2UgfHwgc2hvd0VuZ2FnZVNlYXJjaCkge1xyXG4gICAgICAgIDxsaSBjbGFzcz1cInNpaV90b29sYmFyX25hdl9pdGVtXCIgPlxyXG4gICAgICAgICAgPGEgY2xhc3M9XCJzaWlfdG9vbGJhcl9uYXZfbGluayBzZWFyY2hMaW5rXCIgYXJpYS1sYWJlbD1cIlNlYXJjaFwiPjxzcGFuIGNsYXNzPVwidG9vbGJhclNlYXJjaExhYmVsXCIgPlNlYXJjaDwvc3Bhbj4gPG1hdC1pY29uIGNsYXNzPVwic2VhcmNoLWljb25cIiA+c2VhcmNoPC9tYXQtaWNvbj48L2E+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9vbGJhck1lbnVTdWJWb2ljZXMgc2VhcmNoUGFuZWxcIj5cclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICA8Zm9ybSBjbGFzcz1cInNlYXJjaC1mb3JtXCIgIChzdWJtaXQpPVwicGVyZm9ybVNlYXJjaChkc3YudmFsdWUpOyAkZXZlbnQucHJldmVudERlZmF1bHQoKVwiPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0ICNkc3YgaWQ9XCJzZWFyY2gtZm9ybS1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInNlYXJjaFwiIGkxOG4tcGxhY2Vob2xkZXI9XCJAQHRvb2xiYXJTZWFyY2hNZXNzYWdlXCIgcGxhY2Vob2xkZXI9XCJXaGF0IGFyZSB5b3UgbG9va2luZyBmb3I/XCIgY2xhc3M9XCJzZWFyY2gtZm9ybV9fc2VhcmNoLWlucHV0XCI+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIG1hdC1pY29uLWJ1dHRvbiAgIHR5cGU9XCJzdWJtaXRcIiBhcmlhLWxhYmVsPVwic2VhcmNoXCIgPlxyXG4gICAgICAgICAgICAgICAgICA8bWF0LWljb24+c2VhcmNoPC9tYXQtaWNvbj5cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZWFyY2gtYWN0aW9uc1wiPlxyXG4gICAgICAgICAgICAgIDxhIHRhYmluZGV4PVwiMFwiIChjbGljayk9XCJwZXJmb3JtU2VhcmNoKClcIiAgIHRpdGxlPVwiXCIgY2xhc3M9XCJ0b3Atc2lpX3Rvb2xiYXJfbmF2X2xpbmtcIj5cclxuICAgICAgICAgICAgICAgIDxtYXQtaWNvbiBjbGFzcz1cImFkdnNlYXJjaEljb25cIj50dW5lPC9tYXQtaWNvbj4gPGIgaTE4bj1cIkBAdG9vbGJhcl9hZHZhbmNlZFNlYXJjaFwiPkFkdmFuY2VkIFNlYXJjaDwvYj48bWF0LWljb24+Y2hldnJvbl9yaWdodDwvbWF0LWljb24+XHJcbiAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvbGk+XHJcbiAgICAgIH1cclxuICAgICAgPCEtLSA8bGkgY2xhc3M9XCJzaWlfdG9vbGJhcl9uYXZfaXRlbSBnb3Rvc2lpd2ViQnV0dG9uXCIgKm5nSWY9XCJpc0VuZ2FnZVwiID5cclxuICAgICAgPGEgY2xhc3M9XCJzaWlfdG9vbGJhcl9uYXZfbGluayBcIiBocmVmPVwiaHR0cHM6Ly9zaWl3ZWIuZW5nLml0XCIgdGFyZ2V0PVwiX2JsYW5rXCIgdGl0bGU9XCJcIj5HbyBUbyBTaWl3ZWIgIDE8bWF0LWljb24+bGF1bmNoPC9tYXQtaWNvbj48L2E+XHJcbiAgICA8L2xpPiAtLT5cclxuICAgIEBpZiAoKGlzRW5nYWdlICYmIGFwcE1lbnVPayAmJiBlbmdNZW51T2spIHx8ICghaXNFbmdhZ2UgJiYgZW5nTWVudU9rKSkge1xyXG4gICAgICA8bGkgY2xhc3M9XCJzaWlfdG9vbGJhcl9uYXZfaXRlbSBlbmdhZ2VNZW51SXRlbVwiPlxyXG4gICAgICAgIDxhIGNsYXNzPVwic2lpX3Rvb2xiYXJfbmF2X2xpbmsgZW5nYWdlTWVudUl0ZW1fbGlua1wiIGFyaWEtbGFiZWw9XCJtZW51IGVuZ2FnZVwiPk1lbnUgRW5nYWdlPC9hPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJlbmdhZ2VNZW51SXRlbV9ib3hcIj5cclxuICAgICAgICAgIDxuZy1jb250YWluZXIgICpuZ1RlbXBsYXRlT3V0bGV0PVwidG9vbGJhck1lbnVUZW1wbGF0ZTtjb250ZXh0OnskaW1wbGljaXQ6KG1lbnVWb2ljZXMgfCBhc3luYyk/Lm1lbnUgLCBpc0VuZ2FnZU1lbnU6dHJ1ZX1cIiA+ICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2xpPlxyXG4gICAgfVxyXG5cclxuICAgIEBpZiAoaGVsUGFnZSkge1xyXG4gICAgICA8bGkgY2xhc3M9XCJzaWlfdG9vbGJhcl9uYXZfaXRlbSBzaWktdG9vbGJhcl9faWNvbl9idXR0b24gXCIgPlxyXG4gICAgICAgIDxhIGNsYXNzPVwic2lpX3Rvb2xiYXJfbmF2X2xpbmtcIiBhcmlhLWxhYmVsPVwiaGVscFwiIChjbGljayk9XCJnb1RvSGVscFBhZ2UoKVwiPlxyXG4gICAgICAgICAgPG1hdC1pY29uIHN2Z0ljb249XCJzaWktaGVscC1vbmxpbmVcIj48L21hdC1pY29uPlxyXG4gICAgICAgIDwvYT5cclxuICAgICAgPC9saT5cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIEBpZiAoIWlzU2VydmVybGVzcyAmJiBzaWlEb3dubG9hZFNlcnZpY2UudXRpbHMuY291bnQ+MCkge1xyXG4gICAgICA8bGkgY2xhc3M9XCJzaWlfdG9vbGJhcl9uYXZfaXRlbSBzaWktdG9vbGJhcl9faWNvbl9idXR0b24gYWx3YXlzVmlzaWJsZVwiID5cclxuICAgICAgICA8YSBjbGFzcz1cInNpaV90b29sYmFyX25hdl9saW5rXCIgYXJpYS1sYWJlbD1cIkF0dGFjaG1lbnRzXCI+XHJcbiAgICAgICAgICA8bWF0LWljb24gYXJpYS1oaWRkZW49XCJmYWxzZVwiIFtuZ0NsYXNzXT1cInsnY2hhbmdlSW5jb21pbmcnOnNpaURvd25sb2FkU2VydmljZS51dGlscy5zb21lQ2hhbmdlcywnY2hhbmdlUmVxdWlyZWQnOnNpaURvd25sb2FkU2VydmljZS51dGlscy5jb3VudENoYW5nZX1cIiBbbWF0QmFkZ2VdPVwic2lpRG93bmxvYWRTZXJ2aWNlLnV0aWxzLmNvdW50XCIgbWF0QmFkZ2VDb2xvcj1cInByaW1hcnlcIiBtYXRCYWRnZVBvc2l0aW9uPVwiYmVmb3JlXCIgbWF0QmFkZ2VTaXplPVwic21hbGxcIiBzdmdJY29uPVwibWVudS1kb3dubG9hZFwiPjwvbWF0LWljb24+XHJcbiAgICAgICAgPC9hPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0b29sYmFyU21hbGxDb250YWluZXJcIj5cclxuICAgICAgICAgIDxwIGNsYXNzPVwidGV4dC11cHBlcmNhc2UgY2F0ZWdvcnlUaXRsZVwiIHN0eWxlPVwiZGlzcGxheTogZmxleDtcIj5cclxuICAgICAgICAgICAgPGIgc3R5bGU9XCJtYXJnaW4tcmlnaHQ6MTBweCA7XCIgaTE4bj1cIkBAYXBwRG93bmxvYWRcIj5Eb3dubG9hZGVkIGZpbGVzPC9iPlxyXG4gICAgICAgICAgICBAaWYgKHNpaURvd25sb2FkU2VydmljZS51dGlscy5mZXRjaEluUHJvZ3Jlc3M+MCkge1xyXG4gICAgICAgICAgICAgIDxtYXQtc3Bpbm5lciBbY29sb3JdPVwiJ2FjY2VudCdcIiBbZGlhbWV0ZXJdPVwiMjBcIj48L21hdC1zcGlubmVyPlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIEBpZiAoc2lpRG93bmxvYWRTZXJ2aWNlLnV0aWxzLmZldGNoSW5Qcm9ncmVzcz09MCkge1xyXG4gICAgICAgICAgICAgIDxidXR0b24gc3R5bGU9XCJtYXJnaW46IC0xNXB4IDAgLTEzcHggLTExcHg7XCIgbWF0LWljb24tYnV0dG9uIChjbGljayk9XCJzaWlEb3dubG9hZFNlcnZpY2UuX2ZldGNoRGF0YSgpXCI+PG1hdC1pY29uPnJlZnJlc2g8L21hdC1pY29uPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiIGF0dGFjaG1lbnRDb250YWluZXIgXCIgID5cclxuICAgICAgICAgICAgQGZvciAoYXR0YWNoIG9mIHNpaURvd25sb2FkU2VydmljZS51dGlscy5saXN0IDsgdHJhY2sgYXR0YWNoKSB7XHJcbiAgICAgICAgICAgICAgPGRpdiAgY2xhc3M9XCJhdHRhY2htZW50Um93XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYXR0YWNobWVudEluZm9QYW5lbFwiPlxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImF0dGFjaE5hbWVMYWJlbFwiPnt7YXR0YWNoLmZpbGVOYW1lfX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhdHRhY2hTdWJSb3dcIj57e2F0dGFjaC5jcmVhdGVkRGF0ZSB8IHNpaURhdGU6dHJ1ZX19PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhdHRhY2htZW50X2FjdGlvblwiPlxyXG4gICAgICAgICAgICAgICAgICBAaWYgKGF0dGFjaC5zdGF0dXM9PTEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgPG1hdC1zcGlubmVyIFtkaWFtZXRlcl09XCIzMFwiPjwvbWF0LXNwaW5uZXI+XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgQGlmIChhdHRhY2guc3RhdHVzPT0zMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gIG1hdC1pY29uLWJ1dHRvbiBzdHlsZT1cIm1hcmdpbi1yaWdodDogLTEycHg7ICAgIG1hcmdpbi10b3A6IC0xMHB4O1wiIChjbGljayk9XCJzaWlEb3dubG9hZFNlcnZpY2UuX2Rvd25sb2FkKGF0dGFjaC5pZClcIiA+PG1hdC1pY29uPmRvd25sb2FkPC9tYXQtaWNvbj48L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBAaWYgKGF0dGFjaC5zdGF0dXM9PTQwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgPG1hdC1pY29uICBzdHlsZT1cImNvbG9yOiByZWQ7XCIgW21hdFRvb2x0aXBdPVwiYXR0YWNoLmVycm9yXCI+ZXJyb3Jfb3V0bGluZTwvbWF0LWljb24+XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgQGlmICghYXR0YWNoLl9yZWFkeUZvckRlbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gIG1hdC1pY29uLWJ1dHRvbiBjbGFzcz1cImF0dGFjaERlbGV0ZUJ1dHRvblwiIChjbGljayk9XCJzaWlEb3dubG9hZFNlcnZpY2UuX21hcmtSZWFkeUZvckRlbGV0ZShhdHRhY2gpXCIgPjxtYXQtaWNvbj5kZWxldGU8L21hdC1pY29uPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIEBpZiAoISFhdHRhY2guX3JlYWR5Rm9yRGVsZXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlbGV0ZV9hY3Rpb25fcGFuZWxcIiA+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uICBtYXQtaWNvbi1idXR0b24gIChjbGljayk9XCJzaWlEb3dubG9hZFNlcnZpY2UuX2NsZWFyUmVhZHlGb3JUaW1lb3V0KGF0dGFjaClcIiA+PG1hdC1pY29uPmNsZWFyPC9tYXQtaWNvbj48L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gIG1hdC1pY29uLWJ1dHRvbiAgIChjbGljayk9XCJzaWlEb3dubG9hZFNlcnZpY2UuX2RlbGV0ZShhdHRhY2gpXCIgPjxtYXQtaWNvbj5jaGVjazwvbWF0LWljb24+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9saT5cclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIEBpZiAoIWlzU2VydmVybGVzcyAmJiAhIWhhdmVOb3RpZmljYXRpb24pIHtcclxuICAgICAgPGxpIGNsYXNzPVwic2lpX3Rvb2xiYXJfbmF2X2l0ZW0gc2lpLXRvb2xiYXJfX2ljb25fYnV0dG9uXCIgPlxyXG4gICAgICAgIDxhIGNsYXNzPVwic2lpX3Rvb2xiYXJfbmF2X2xpbmtcIiBhcmlhLWxhYmVsPVwiTm90aWZpY2F0aW9uXCI+XHJcbiAgICAgICAgICA8bWF0LWljb24gYXJpYS1oaWRkZW49XCJmYWxzZVwiIFttYXRCYWRnZV09XCJzZGFjVGlja2V0Q291bnQrc2RhY05vdGlmaWNhdGlvbkNvdW50XCIgbWF0QmFkZ2VDb2xvcj1cInByaW1hcnlcIiBtYXRCYWRnZVBvc2l0aW9uPVwiYmVmb3JlXCIgbWF0QmFkZ2VTaXplPVwic21hbGxcIiBzdmdJY29uPVwibWVudS1ub3RpZmljYXRpb25zXCI+PC9tYXQtaWNvbj5cclxuICAgICAgICA8L2E+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRvb2xiYXJTbWFsbENvbnRhaW5lclwiPlxyXG4gICAgICAgICAgQGlmIChzZGFjTm90aWZpY2F0aW9uQ291bnQhPTApIHtcclxuICAgICAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LXVwcGVyY2FzZSBjYXRlZ29yeVRpdGxlXCI+PGIgaTE4bj1cIkBAdG9vbGJhcl9Ob3RpZmljYXRpb25cIj5Ob3RpZmljYXRpb248L2I+PC9wPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiIG5vdGlmaWNoZUNvbnRhaW5lciBcIiAgPlxyXG4gICAgICAgICAgICAgIEBmb3IgKHRpY2tldCBvZiBzZGFjTm90aWZpY2F0aW9uIHwgYXN5bmMgOyB0cmFjayB0aWNrZXQpIHtcclxuICAgICAgICAgICAgICAgIDxkaXYgIChjbGljayk9XCJvcGVuU2RhY1Rpa2V0c0J5Q29kZSh0aWNrZXQuc3NDb2RlKVwiPlxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm5vdGlmaWNoZUNvbnRhaW5lckxhYmVsXCI+e3t0aWNrZXQuc3NEZXNjcn19PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibm90aWZTdWJcIiA+e3t0aWNrZXQuY291bnR9fSA8c3BhbiBpMThuPVwiQEB0aWNrZXRfaXRlbXNcIj57dGlja2V0LmNvdW50LHBsdXJhbCw9MSB7SXRlbX0gb3RoZXIge0l0ZW1zfX08L3NwYW4+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IChjbGljayk9XCJvcGVuU2RhY05vdGlmaWNhdGlvbigpXCIgIGNsYXNzPVwiYWxsTm90aWZcIj48YiBpMThuPVwiQEB0b29sYmFyX3NlZUFsbE5vdGlmaWNhdGlvblwiPlNlZSBhbGwgbm90aWZpY2F0aW9uPC9iPiA8bWF0LWljb24+bmF2aWdhdGVfbmV4dDwvbWF0LWljb24+PC9kaXY+XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBAaWYgKHNkYWNUaWNrZXRDb3VudCE9MCkge1xyXG4gICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtdXBwZXJjYXNlIGNhdGVnb3J5VGl0bGVcIj48YiBpMThuPVwiQEB0b29sYmFyX3Rhc2tNYW5hZ2VtZW50XCI+VGFzayBNYW5hZ2VtZW50PC9iPjwvcD5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIiBub3RpZmljaGVDb250YWluZXIgXCIgID5cclxuICAgICAgICAgICAgICBAZm9yICh0aWNrZXQgb2Ygc2RhY1RpY2hldCB8IGFzeW5jIDsgdHJhY2sgdGlja2V0KSB7XHJcbiAgICAgICAgICAgICAgICA8ZGl2ICAoY2xpY2spPVwib3BlblNkYWNUaWtldHNCeUNvZGUodGlja2V0LnNzQ29kZSlcIj5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJub3RpZmljaGVDb250YWluZXJMYWJlbFwiPnt7dGlja2V0LnNzRGVzY3J9fTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5vdGlmU3ViXCIgID57e3RpY2tldC5jb3VudH19IDxzcGFuIGkxOG49XCJAQHRhc2tfaXRlXCI+e3RpY2tldC5jb3VudCxwbHVyYWwsPTEge1Rhc2t9IG90aGVyIHtUYXNrc319PC9zcGFuPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiAoY2xpY2spPVwib3BlblNkYWNUaWNrZXQoKVwiICBjbGFzcz1cImFsbE5vdGlmXCI+PGIgaTE4bj1cIkBAdG9vbGJhcl9zZWVBbGxUYXNrXCI+U2VlIGFsbCB0YXNrczwvYj4gPG1hdC1pY29uPm5hdmlnYXRlX25leHQ8L21hdC1pY29uPjwvZGl2PlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2xpPlxyXG4gICAgfVxyXG4gICAgQGlmICghaXNTZXJ2ZXJsZXNzKSB7XHJcbiAgICAgIDxsaSBjbGFzcz1cInNpaV90b29sYmFyX25hdl9pdGVtIHNpaS10b29sYmFyX19pY29uX2J1dHRvblwiID5cclxuICAgICAgICA8YSBjbGFzcz1cInNpaV90b29sYmFyX25hdl9saW5rXCIgYXJpYS1sYWJlbD1cImV2ZW50XCI+XHJcbiAgICAgICAgICA8bWF0LWljb24gYXJpYS1oaWRkZW49XCJmYWxzZVwiIFttYXRCYWRnZV09XCJjb3Jwb3JhdGVJdENhbGVuZGFyRXZlbnRzQ291bnRcIiBtYXRCYWRnZUNvbG9yPVwid2FyblwiIG1hdEJhZGdlUG9zaXRpb249XCJiZWZvcmVcIiBtYXRCYWRnZVNpemU9XCJzbWFsbFwiIFttYXRCYWRnZUhpZGRlbl09XCJjb3Jwb3JhdGVJdENhbGVuZGFyRXZlbnRzQ291bnQ9PTBcIiBzdmdJY29uPVwibWVudS1jYWxlbmRhclwiID48L21hdC1pY29uPlxyXG4gICAgICAgIDwvYT5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidG9vbGJhclNtYWxsQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICA8IS0tIDxuZy1jb250YWluZXIgKm5nSWY9XCJjb3Jwb3JhdGVJdENhbGVuZGFyRXZlbnRzQ291bnQ+MFwiPiAtLT5cclxuICAgICAgICAgIDxwIGNsYXNzPVwidGV4dC11cHBlcmNhc2UgY2F0ZWdvcnlUaXRsZVwiPjxiICBpMThuPVwiQEB0b29sYmFyX2RlYWRsaW5lc1wiPkRlYWRsaW5lczwvYj48L3A+XHJcbiAgICAgICAgICA8ZGl2ICBjbGFzcz1cIm5vdGlmaWNoZUNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICBAZm9yIChpdGVtIG9mIGNvcnBvcmF0ZUl0Q2FsZW5kYXJFdmVudHMgfCBhc3luYzsgdHJhY2sgaXRlbTsgbGV0IGluZGV4ID0gJGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgQGlmICghaXRlbS5oaWRlRGF0YSAmJiBpdGVtLnN0YXR1cz09J1NDQURFTlpBX09HR0knKSB7XHJcbiAgICAgICAgICAgICAgICA8cCBzdHlsZT1cIndpZHRoOjEwMCVcIj48c2lpLWJhZGdlIHN0eWxlPVwicGFkZGluZzogMnB4IDEwcHg7IGZvbnQtd2VpZ2h0OiA3MDA7XCIgW2JhY2tncm91bmRdPVwiJyNmZjlkYjQnXCIgW2NvbG9yXT1cIidibGFjaydcIiBpMThuPVwiQEBkZWFkbGluZV90b2RheVwiPnRvZGF5PC9zaWktYmFkZ2U+PC9wPlxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBAaWYgKCFpdGVtLmhpZGVEYXRhICYmIGl0ZW0uc3RhdHVzPT0nSU5fU0NBREVOWkEnKSB7XHJcbiAgICAgICAgICAgICAgICA8cCBzdHlsZT1cIndpZHRoOjEwMCVcIj4gIDxzaWktYmFkZ2Ugc3R5bGU9XCJwYWRkaW5nOiAycHggMTBweDsgZm9udC13ZWlnaHQ6IDcwMDtcIiBbYmFja2dyb3VuZF09XCInI2VhYmYzMCdcIiBbY29sb3JdPVwiJ2JsYWNrJ1wiIGkxOG49XCJAQGRlYWRsaW5lX3RvbW9ycm93XCI+dG9tb3Jyb3c8L3NpaS1iYWRnZT48L3A+XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIDxkaXYgPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5vdGlmaWNoZUNvbnRhaW5lckxhYmVsXCIgc3R5bGU9XCJtYXJnaW4tYm90dG9tOjIwcHg7XCI+QGlmICghaXRlbS5pc0FsbERheSkge1xyXG4gICAgICAgICAgICAgICAgICA8c3Bhbj57e2l0ZW0udGltZX19IC0gPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgfXt7aXRlbS5zdWJqZWN0fX08L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2ICAoY2xpY2spPVwiZ29Ub0RlYWRsaW5lcygpXCIgIGNsYXNzPVwiYWxsTm90aWZcIj48YiBpMThuPVwiQEB0b29sYmFyX2FsbERlYWRsaW5lc1wiPlNlZSBhbGwgZGVhZGxpbmVzPC9iPiA8bWF0LWljb24+bmF2aWdhdGVfbmV4dDwvbWF0LWljb24+PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvbGk+XHJcbiAgICB9XHJcblxyXG4gICAgQGlmICghaXNTZXJ2ZXJsZXNzKSB7XHJcbiAgICAgIDxsaSBjbGFzcz1cInNpaV90b29sYmFyX25hdl9pdGVtIHNpaV90b29sYmFyX3Byb2ZpbGVfbGlua1wiID5cclxuICAgICAgICA8c2lpLXByb2ZpbGUtYnV0dG9uIHN0eWxlPVwicGFkZGluZy1sZWZ0OiA3cHg7XCIgICBbbXlTZWxmXT0nbXlTZWxmJyAoY2xpY2spPVwidG9nZ2xlUHJvZmlsZUluZm8oJGV2ZW50KVwiIFtoaWRlRGV0YWlsXT1cIm1vYmlsZVRvb2xiYXJcIj48L3NpaS1wcm9maWxlLWJ1dHRvbj5cclxuICAgICAgPC9saT5cclxuICAgIH1cclxuICA8L3VsPlxyXG5cclxuXHJcblxyXG5cclxuICA8ZGl2IHJvbGU9XCJidXR0b25cIiBhcmlhLWxhYmVsPVwibWVudVwiIChjbGljayk9XCJtb2JpbGVNZW51Q2xpY2soKTt0b2dnbGVNZW51U2lkZWJhcigpO1wiIGlkPVwibWVudVRvZ2dsZVwiIGNsYXNzPVwiaGlkZGVuLWxnLXVwXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwic2lpX3Rvb2xiYXJfbWFudV9iYXJcIiBbbmdDbGFzc109XCJ7J2FuaW1hdGUnOm1lbnVNb2JpbGVPcGVufVwiPjwvZGl2PlxyXG4gIDwvZGl2PlxyXG48L2Rpdj5cclxuXHJcbjwvZGl2PlxyXG5cclxuQGlmIChtZW51U2lkZWJhclZpc2libGUpIHtcclxuPGRpdiBjbGFzcz1cIm1lbnUtc2lkZWJhclwiPlxyXG48IS0tIDxtYXQtc2lkZW5hdi1jb250YWluZXIgPiAtLT5cclxuICA8IS0tIDxtYXQtc2lkZW5hdiBjbGFzcz1cIm1lbnVTaWRlbmF2XCIgI3NuYXYgIG1vZGU9XCJzaWRlXCIgcG9zaXRpb249XCJlbmRcIiBmaXhlZEluVmlld3BvcnQ9XCJ0cnVlXCIgZml4ZWRUb3BHYXA9XCI3MlwiICA+IC0tPlxyXG5cclxuXHJcblxyXG5cclxuICAgIDx1bCBjbGFzcz1cInNpaV90b29sYmFyX21vYmlsZS1uYXZiYXJcIj5cclxuXHJcbiAgICAgIDwhLS1cclxuXHJcbiAgICAgIGFwcE1lbnVBY3RpdmUgIHwgIGFwcE1lbnVPayB8IGVuZ01lbnVPayB8ICB0b29sYmFyIHwgZW5nICB8IGFwcFxyXG4gICAgICAxICAgICAgICAgIDEgICAgICAgICAgIDEgICAgICAgICAgViAgICAgICAtICAgICAgIFZcclxuICAgICAgMSAgICAgICAgICAxICAgICAgICAgICAwICAgICAgICAgIC0gICAgICAgLSAgICAgICBWXHJcbiAgICAgIDEgICAgICAgICAgMCAgICAgICAgICAgMSAgICAgICAgICAtICAgICAgIFYgICAgICAgLVxyXG4gICAgICAxICAgICAgICAgIDAgICAgICAgICAgIDAgICAgICAgICAgLSAgICAgICAtICAgICAgIC1cclxuICAgICAgMCAgICAgICAgICAxICAgICAgICAgICAxICAgICAgICAgIFYgICAgICAgViAgICAgICAtXHJcbiAgICAgIDAgICAgICAgICAgMSAgICAgICAgICAgMCAgICAgICAgICAtICAgICAgIC0gICAgICAgVlxyXG4gICAgICAwICAgICAgICAgIDAgICAgICAgICAgIDEgICAgICAgICAgLSAgICAgICBWICAgICAgIC1cclxuICAgICAgMCAgICAgICAgICAwICAgICAgICAgICAwICAgICAgICAgIC0gICAgICAgLSAgICAgICAtXHJcblxyXG4gICAgICB0b29sYmFyID0+IGFwcE1lbnVPayAmJiBlbmdNZW51T2tcclxuICAgICAgZW5nICAgICA9PiAoYXBwTWVudU9rICYmIGVuZ01lbnVPayAmJiAhYXBwTWVudUFjdGl2ZSkgfHwgKGVuZ01lbnVPayAmJiAhYXBwTWVudU9rKVxyXG4gICAgICBhcHAgICAgID0+IChhcHBNZW51T2sgJiYgZW5nTWVudU9rICYmIGFwcE1lbnVBY3RpdmUpIHx8ICAoIWVuZ01lbnVPayAmJiBhcHBNZW51T2spXHJcblxyXG4gICAgICAtLT5cclxuXHJcblxyXG5cclxuXHJcbiAgICAgIEBpZiAoYXBwTWVudU9rICYmIGVuZ01lbnVPaykge1xyXG4gICAgICAgIDxuYXYgbWF0LXRhYi1uYXYtYmFyIG1hdC1zdHJldGNoLXRhYnMgY2xhc3M9XCJzaWRlbmF2TWVudU5hdlwiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICA8IS0tICpuZ0lmPVwiIWlzRW5nYWdlICYmIGlzRW5nYWdlQXZhaWxhYmxlICYmIGFwcGxpY2F0aW9uTWVudS5sZW5ndGg+MCAgJiYgKG1lbnVWb2ljZXMgfCBhc3luYyk/Lm1lbnUgICBcIj4gLS0+XHJcbiAgICAgICAgICA8YSBtYXQtdGFiLWxpbmsgKGNsaWNrKT1cImFjdGl2ZU1vYk1lbnUgPSAnYXBwJ1wiICAgICAgIFthY3RpdmVdPVwiYXBwTWVudUFjdGl2ZVwiID5NZW51IEFwcDwvYT5cclxuICAgICAgICAgIDxhIG1hdC10YWItbGluayAoY2xpY2spPVwiYWN0aXZlTW9iTWVudSA9ICdlbmdhZ2UnXCIgICAgW2FjdGl2ZV09XCIhYXBwTWVudUFjdGl2ZVwiID5NZW51IEVuZ2FnZTwvYT5cclxuICAgICAgICA8L25hdj5cclxuICAgICAgfVxyXG5cclxuICAgICAgQGlmICgoYXBwTWVudU9rICYmIGVuZ01lbnVPayAmJiAhYXBwTWVudUFjdGl2ZSkgfHwgKGVuZ01lbnVPayAmJiAhYXBwTWVudU9rKSApIHtcclxuICAgICAgICA8IS0tIDxuZy1jb250YWluZXIgKm5nSWY9XCJpc0VuZ2FnZSB8fCAoYXBwbGljYXRpb25NZW51Lmxlbmd0aD09MCAmJiBpc0VuZ2FnZUF2YWlsYWJsZSAmJiAobWVudVZvaWNlcyB8IGFzeW5jKT8ubWVudSkgfHwgYWN0aXZlTW9iTWVudSA9PSAnZW5nYWdlJyBcIj4gLS0+XHJcbiAgICAgICAgPG5nLWNvbnRhaW5lciAgKm5nVGVtcGxhdGVPdXRsZXQ9XCJ0b29sYmFyTW9iaWxlTWVudVRlbXBsYXRlO2NvbnRleHQ6eyRpbXBsaWNpdDogKG1lbnVWb2ljZXMgfCBhc3luYyk/Lm1lbnUsIGlzRW5nYWdlTWVudTp0cnVlfVwiID4gICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIEBpZiAoKGFwcE1lbnVPayAmJiBlbmdNZW51T2sgJiYgYXBwTWVudUFjdGl2ZSkgfHwgICghZW5nTWVudU9rICYmIGFwcE1lbnVPaykgKSB7XHJcbiAgICAgICAgPG5nLWNvbnRhaW5lciAgKm5nVGVtcGxhdGVPdXRsZXQ9XCJ0b29sYmFyTW9iaWxlTWVudVRlbXBsYXRlO2NvbnRleHQ6eyRpbXBsaWNpdDogYXBwbGljYXRpb25NZW51ICwgaXNFbmdhZ2VNZW51OmZhbHNlfVwiID4gICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICA8bGkgY2xhc3M9XCJjdXN0b20tZGl2aWRlclwiPjwvbGk+XHJcblxyXG5cclxuICAgICAgQGlmIChpc0VuZ2FnZSkge1xyXG4gICAgICAgIDxsaSBjbGFzcz1cInNpaV90b29sYmFyX25hdl9pdGVtIFwiPjxhIGNsYXNzPVwic2lpX3Rvb2xiYXJfbmF2X2xpbmsgXCIgaHJlZj1cImh0dHBzOi8vc2lpd2ViLmVuZy5pdFwiIHRhcmdldD1cIl9ibGFua1wiIHRpdGxlPVwiXCI+PHNwYW4gaTE4bj1cIkBAbmF2YmFyX2dvVG9TaWl3ZWJcIj5HbyBUbyBTaWl3ZWI8L3NwYW4+IDxtYXQtaWNvbj5jaGV2cm9uX3JpZ2h0PC9tYXQtaWNvbj48L2E+PC9saT5cclxuICAgICAgfVxyXG4gICAgICBAaWYgKGhlbFBhZ2UpIHtcclxuICAgICAgICA8bGkgY2xhc3M9XCJzaWlfdG9vbGJhcl9uYXZfaXRlbSBcIiAgPjxhIGNsYXNzPVwic2lpX3Rvb2xiYXJfbmF2X2xpbmsgXCIgKGNsaWNrKT1cImdvVG9IZWxwUGFnZSgpXCIgdGFiaW5kZXg9XCIwXCIgdGl0bGU9XCJcIj48c3BhbiBpMThuPVwiQEBuYXZiYXJfZ29Ub0hlbHBQYWdlXCI+R28gVG8gSGVscCBQYWdlPC9zcGFuPiA8bWF0LWljb24+Y2hldnJvbl9yaWdodDwvbWF0LWljb24+PC9hPjwvbGk+XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIDxsaSBjbGFzcz1cInNpaV90b29sYmFyX25hdl9pdGVtICBwcm9maWxlXCIgPlxyXG4gICAgICAgIDwhLS0gPHNpaS1wcm9maWxlLWJ1dHRvbiAoY2xpY2spPVwidG9nZ2xlU3VibWVudSgkZXZlbnQsJ3Byb2ZpbGUnKVwiIFtteVNlbGZdPSdteVNlbGYnIFtoaWRlRGV0YWlsXT1cInRydWVcIj48L3NpaS1wcm9maWxlLWJ1dHRvbj4gLS0+XHJcbiAgICAgICAgPCEtLSA8bWF0LWljb24gc3R5bGU9XCJtYXJnaW4tbGVmdDogMTBweDtcIiAoY2xpY2spPVwidG9nZ2xlU3VibWVudSgkZXZlbnQsJ3Byb2ZpbGUnKVwiID5jaGV2cm9uX3JpZ2h0PC9tYXQtaWNvbj4gLS0+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInNpaV90b29sYmFyX3N1Ym1lbnVcIiBbbmdDbGFzc109XCIhIXN1Yk1lbnVPcGVuU3RhdHVzWydwcm9maWxlJ10/J2lzLW9wZW4nOidpcy1jbG9zZWQnIFwiPlxyXG4gICAgICAgICAgPG1hdC1pY29uICBjbGFzcz1cInNpaV90b29sYmFyX3N1Ym1lbnUtaWNvbi1iYWNrXCIgKGNsaWNrKT1cInRvZ2dsZVByb2ZpbGVJbmZvKCRldmVudClcIj5jaGV2cm9uX2xlZnQ8L21hdC1pY29uPlxyXG4gICAgICAgICAgPHVsIGNsYXNzPVwic2lpX3Rvb2xiYXJfc3VibmF2IG5vdGlmaWNhdGlvblwiPlxyXG5cclxuICAgICAgICAgICAgPGxpPjxwPjxiID57e215U2VsZj8uZmlyc3ROYW1lfX0ge3tteVNlbGY/Lmxhc3ROYW1lfX08L2I+PC9wPjwvbGk+XHJcbiAgICAgICAgICAgIDxsaSBjbGFzcz1cInNpaV90b29sYmFyX3N1Ym5hdi1pdGVtXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2ZpbGVcIj5cclxuICAgICAgICAgICAgICAgIDwhLS0gRGV0dGFnbGkgdXRlbnRlIC0tPlxyXG4gICAgICAgICAgICAgICAgPGRsIGNsYXNzPVwiZW5nLXVzZXItZGV0YWlsc1wiPlxyXG4gICAgICAgICAgICAgICAgICA8ZHQgIGkxOG49XCJAQHRvb2xiYXJfd29ya2VySWRcIj5Xb3JrZXIgSUQ8L2R0PlxyXG4gICAgICAgICAgICAgICAgICA8ZGQgPnt7bXlTZWxmPy53b3JrZXJJZH19PC9kZD5cclxuICAgICAgICAgICAgICAgICAgPGR0ID48YWJiciBpMThuLXRpdGxlPVwiQEB0b29sYmFyX2NjXCIgdGl0bGU9XCJDb21wZXRlbmNlIENlbnRlclwiIGkxOG49XCJAQHRvb2xiYXJfY2NfZGltXCI+Q0M8L2FiYnI+PC9kdD5cclxuICAgICAgICAgICAgICAgICAgPGRkPnt7bXlTZWxmPy5jb3N0Q2VudGVySWR9fTwvZGQ+XHJcbiAgICAgICAgICAgICAgICAgIDxkdCA+PGFiYnIgIGkxOG49XCJAQHRvb2xiYXJfbWFuYWdlclwiPk1hbmFnZXI8L2FiYnI+PC9kdD5cclxuICAgICAgICAgICAgICAgICAgPGRkID57e215U2VsZi5jb3N0Q2VudGVyUmVzcD8uZmlyc3ROYW1lfX0ge3tteVNlbGYuY29zdENlbnRlclJlc3A/Lmxhc3ROYW1lfX08L2RkPlxyXG4gICAgICAgICAgICAgICAgICBAaWYgKCEhbXlTZWxmLnR1dG9yV29ya2VySWQpIHtcclxuICAgICAgICAgICAgICAgICAgICA8ZHQgPjxhYmJyIGkxOG49XCJAQHRvb2xiYXJfdHV0b3JcIj5UdXRvcjwvYWJicj48L2R0PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkZD57e215U2VsZi50dXRvckZpc3ROYW1lfX0ge3tteVNlbGYudHV0b3JMYXN0TmFtZX19PC9kZD5cclxuICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgQGlmICghIW15U2VsZi5ldmFsdWF0b3JXb3JrZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIDxkdCA+PGFiYnIgaTE4bj1cIkBAdG9vbGJhcl9ldmFsdWF0b3JcIj5FdmFsdWF0b3I8L2FiYnI+PC9kdD5cclxuICAgICAgICAgICAgICAgICAgICA8ZGQ+e3tteVNlbGYuZXZhbHVhdG9yRmlzdE5hbWV9fSB7e215U2VsZi5ldmFsdWF0b3JMYXN0TmFtZX19PC9kZD5cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgPC9kbD5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgPHVsIGNsYXNzPVwibGlzdC11bnN0eWxlZCB1c2VyLWFjdGlvbnNcIj5cclxuICAgICAgICAgICAgICA8bGk+PGEgKGNsaWNrKT1cImdvVG9Qcm9maWxlKClcIiAgIHRhYmluZGV4PVwiMFwiICB0aXRsZT1cIlwiIGNsYXNzPVwiXCI+PGIgaTE4bj1cIkBAbmF2YmFyX2dvVG9Qcm9maWxlXCI+R28gVG8gUHJvZmlsZTwvYj4gPG1hdC1pY29uPm5hdmlnYXRlX25leHQ8L21hdC1pY29uPjwvYT48L2xpPlxyXG4gICAgICAgICAgICAgIDxsaT48YSBocmVmPVwiaHR0cHM6Ly9wYXNzd29yZC5lbmcuaXQvXCIgdGFyZ2V0PVwiX2JsYW5rXCIgdGl0bGU9XCJcIiBjbGFzcz1cIlwiPjxiIGkxOG49XCJAQG5hdmJhcl9jaGFuZ2VQYXNzZm9yZFwiPkNoYW5nZSBQYXNzd29yZDwvYj4gPG1hdC1pY29uPm5hdmlnYXRlX25leHQ8L21hdC1pY29uPjwvYT48L2xpPlxyXG4gICAgICAgICAgICAgIDxsaT48YSBocmVmPVwiaHR0cHM6Ly9teXNpZ25pbnMubWljcm9zb2Z0LmNvbS9zZWN1cml0eS1pbmZvXCIgdGFyZ2V0PVwiX2JsYW5rXCIgdGl0bGU9XCJcIiBjbGFzcz1cIlwiPjxiIGkxOG49XCJAQG5hdmJhcl9tZmFTZXR0aW5nc1wiPk1GQSBTZXR0aW5nczwvYj4gPG1hdC1pY29uPm5hdmlnYXRlX25leHQ8L21hdC1pY29uPjwvYT48L2xpPlxyXG4gICAgICAgICAgICAgIDxsaT48YSAgKGNsaWNrKT1cImRvTG9nb3V0KClcIiB0YWJpbmRleD1cIjBcIiB0aXRsZT1cIlwiIGNsYXNzPVwiXCI+PGIgaTE4bj1cIkBAbmF2YmFyX2xvZ291dFwiPkxvZ291dDwvYj4gPG1hdC1pY29uPm5hdmlnYXRlX25leHQ8L21hdC1pY29uPjwvYT48L2xpPlxyXG4gICAgICAgICAgICAgIEBpZiAoISFteVNlbGYuZGVsZWdhdGVkVXNlcnMpIHtcclxuICAgICAgICAgICAgICAgIDxsaT48YSAgKGNsaWNrKT1cImRvRGVsZWdhdGlvbigpXCIgICAgIHRpdGxlPVwiXCIgY2xhc3M9XCJcIj48YiBpMThuPVwiQEBEZWxlZ2F0ZUxvZ2luXCI+TG9naW4gYXMgZGVsZWdhdGVkPC9iPiA8bWF0LWljb24+bmF2aWdhdGVfbmV4dDwvbWF0LWljb24+PC9hPjwvbGk+XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIEBpZiAoISFteVNlbGYuaXNJbkRlbGVnYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIDxsaT48YSAoY2xpY2spPVwiZG9EZWxlZ2F0aW9uTG9nb3V0KClcIiB0aXRsZT1cIlwiIGNsYXNzPVwiXCI+PGIgaWkxOG49XCJAQERlbGVnYXRlTG9nb3V0XCI+TG9nb3V0IGZyb20gZGVsZWdhdGlvbjwvYj4gPG1hdC1pY29uPm5hdmlnYXRlX25leHQ8L21hdC1pY29uPjwvYT48L2xpPlxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIDwvdWw+XHJcblxyXG4gICAgICAgICAgICA8bGkgY2xhc3M9XCJjdXN0b20tZGl2aWRlciBtci00IFwiPjwvbGk+XHJcblxyXG4gICAgICAgICAgICBAaWYgKGNvcnBvcmF0ZUl0Q2FsZW5kYXJFdmVudHNDb3VudCE9MCkge1xyXG4gICAgICAgICAgICAgIDxsaT48cD48YiBpMThuPVwiQEB0b29sYmFyX2RlYWRsaW5lc1wiPkRlYWRsaW5lczwvYj48L3A+PC9saT5cclxuICAgICAgICAgICAgICBAZm9yIChpdGVtIG9mIGNvcnBvcmF0ZUl0Q2FsZW5kYXJFdmVudHMgfCBhc3luYzsgdHJhY2sgaXRlbTsgbGV0IGluZGV4ID0gJGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBAaWYgKCFpdGVtLmhpZGVEYXRhICYmIGl0ZW0uc3RhdHVzPT0nU0NBREVOWkFfT0dHSScpIHtcclxuICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9XCJ3aWR0aDoxMDAlIDsgbWFyZ2luLXRvcDogMWVtO1wiPjxzaWktYmFkZ2Ugc3R5bGU9XCJwYWRkaW5nOiAycHggMTBweDsgZm9udC13ZWlnaHQ6IDcwMDtcIiBbYmFja2dyb3VuZF09XCInI2ZmOWRiNCdcIiBbY29sb3JdPVwiJ2JsYWNrJ1wiIGkxOG49XCJAQGRlYWRsaW5lX3RvZGF5XCIgPnRvZGF5PC9zaWktYmFkZ2U+PC9wPlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgQGlmICghaXRlbS5oaWRlRGF0YSAmJiBpdGVtLnN0YXR1cz09J0lOX1NDQURFTlpBJykge1xyXG4gICAgICAgICAgICAgICAgICA8cCBzdHlsZT1cIndpZHRoOjEwMCUgOyBtYXJnaW4tdG9wOiAxZW07XCI+ICA8c2lpLWJhZGdlIHN0eWxlPVwicGFkZGluZzogMnB4IDEwcHg7IGZvbnQtd2VpZ2h0OiA3MDA7XCIgW2JhY2tncm91bmRdPVwiJyNlYWJmMzAnXCIgW2NvbG9yXT1cIidibGFjaydcIiBpMThuPVwiQEBkZWFkbGluZV90b21vcnJvd1wiID50b21vcnJvdzwvc2lpLWJhZGdlPjwvcD5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIDxsaSAgY2xhc3M9XCJzaWlfdG9vbGJhcl9zdWJuYXYtaXRlbVwiID5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5vdGlmUHJldmlld1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgIHN0eWxlPVwibWFyZ2luLWJvdHRvbToyMHB4O1wiIGNsYXNzPVwibm90aWZMYWJlbFwiPkBpZiAoIWl0ZW0uaXNBbGxEYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuID57e2l0ZW0udGltZX19IC0gPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIH17e2l0ZW0uc3ViamVjdH19PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPCEtLSA8ZGl2IHN0eWxlPVwibWFyZ2luLWJvdHRvbToxMnB4O1wiPnt7aXRlbS5kYXRlfX08L2Rpdj4gLS0+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgPGRpdiAgKGNsaWNrKT1cImdvVG9EZWFkbGluZXMoKVwiICBjbGFzcz1cImFsbE5vdGlmXCI+PGIgaTE4bj1cIkBAdG9vbGJhcl9hbGxEZWFkbGluZXNcIj5TZWUgYWxsIGRlYWRsaW5lczwvYj4gPG1hdC1pY29uPm5hdmlnYXRlX25leHQ8L21hdC1pY29uPjwvZGl2PlxyXG4gICAgICAgICAgICAgIDxsaSBjbGFzcz1cImN1c3RvbS1kaXZpZGVyIG1yLTQgXCI+PC9saT5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBAaWYgKHNkYWNOb3RpZmljYXRpb25Db3VudCE9MCkge1xyXG4gICAgICAgICAgICAgIDxsaSBjbGFzcz1cInNkYWNGaWVsZFJlZlwiPjxwPjxiIGkxOG49XCJAQHRvb2xiYXJfTm90aWZpY2F0aW9uXCI+Tm90aWZpY2F0aW9uPC9iPjwvcD48L2xpPlxyXG4gICAgICAgICAgICAgIEBmb3IgKHRpY2tldCBvZiBzZGFjTm90aWZpY2F0aW9uIHwgYXN5bmMgOyB0cmFjayB0aWNrZXQpIHtcclxuICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInNpaV90b29sYmFyX3N1Ym5hdi1pdGVtXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJub3RpZlByZXZpZXdcIiAgKGNsaWNrKT1cIm9wZW5TZGFjVGlrZXRzQnlDb2RlKHRpY2tldC5zc0NvZGUpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJub3RpZkxhYmVsXCI+e3t0aWNrZXQuc3NEZXNjcn19PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tYm90dG9tOjEycHg7XCI+e3t0aWNrZXQuY291bnR9fSA8c3BhbiBpMThuPVwiQEB0aWNrZXRfaXRlbXNcIj57dGlja2V0LmNvdW50LHBsdXJhbCw9MSB7SXRlbX0gb3RoZXIge0l0ZW1zfX08L3NwYW4+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgPGRpdiAoY2xpY2spPVwib3BlblNkYWNOb3RpZmljYXRpb24oKVwiICBjbGFzcz1cImFsbE5vdGlmXCI+PGIgaTE4bj1cIkBAdG9vbGJhcl9zZWVBbGxOb3RpZmljYXRpb25cIj5TZWUgYWxsIG5vdGlmaWNhdGlvbjwvYj4gPG1hdC1pY29uPm5hdmlnYXRlX25leHQ8L21hdC1pY29uPjwvZGl2PlxyXG4gICAgICAgICAgICAgIDxsaSBjbGFzcz1cImN1c3RvbS1kaXZpZGVyIG1yLTRcIj48L2xpPlxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBAaWYgKHNkYWNUaWNrZXRDb3VudCE9MCkge1xyXG4gICAgICAgICAgICAgIDxsaSBjbGFzcz1cInNkYWNGaWVsZFJlZlwiPjxwPjxiIGkxOG49XCJAQHRvb2xiYXJfdGFza01hbmFnZW1lbnRcIj5UYXNrIE1hbmFnZW1lbnQ8L2I+PC9wPjwvbGk+XHJcbiAgICAgICAgICAgICAgQGZvciAodGlja2V0IG9mIHNkYWNUaWNoZXQgfCBhc3luYyA7IHRyYWNrIHRpY2tldCkge1xyXG4gICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwic2lpX3Rvb2xiYXJfc3VibmF2LWl0ZW1cIj5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5vdGlmUHJldmlld1wiICAoY2xpY2spPVwib3BlblNkYWNUaWtldHNCeUNvZGUodGlja2V0LnNzQ29kZSlcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm5vdGlmTGFiZWxcIj57e3RpY2tldC5zc0Rlc2NyfX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1ib3R0b206MTJweDtcIj57e3RpY2tldC5jb3VudH19IDxzcGFuIGkxOG49XCJAQHRhc2tfaXRlXCI+e3RpY2tldC5jb3VudCxwbHVyYWwsPTEge1Rhc2t9IG90aGVyIHtUYXNrc319PC9zcGFuPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIDxkaXYgKGNsaWNrKT1cIm9wZW5TZGFjVGlja2V0KClcIiAgY2xhc3M9XCJhbGxOb3RpZlwiPjxiIGkxOG49XCJAQHRvb2xiYXJfc2VlQWxsVGFza1wiPlNlZSBhbGwgdGFza3M8L2I+IDxtYXQtaWNvbj5uYXZpZ2F0ZV9uZXh0PC9tYXQtaWNvbj48L2Rpdj5cclxuICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJjdXN0b20tZGl2aWRlciBtci00XCI+PC9saT5cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgICAgPC91bD5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIDwvbGk+XHJcbiAgICA8L3VsPlxyXG4gIDwhLS0gPC9tYXQtc2lkZW5hdj4gLS0+XHJcbjwhLS0gPC9tYXQtc2lkZW5hdi1jb250YWluZXI+IC0tPlxyXG48L2Rpdj5cclxufVxyXG5cclxuXHJcblxyXG48bmctdGVtcGxhdGUgI3Rvb2xiYXJNb2JpbGVNZW51VGVtcGxhdGUgbGV0LWN1cnJNZW51IGxldC1pc0VuZ2FnZU1lbnU9XCJpc0VuZ2FnZU1lbnVcIj5cclxuXHJcbiAgQGZvciAobWVudSBvZiBjdXJyTWVudTsgdHJhY2sgbWVudTsgbGV0IG1lbnVJbmRleCA9ICRpbmRleCkge1xyXG4gICAgPGxpIGNsYXNzPVwic2lpX3Rvb2xiYXJfbmF2X2l0ZW1cIiAgID5cclxuICAgICAgQGlmICghbWVudS5zdWJtZW51IHx8ICFtZW51LnN1Ym1lbnUuY29sdW1ucykge1xyXG4gICAgICAgIDxhIGNsYXNzPVwic2lpX3Rvb2xiYXJfbmF2X2xpbmtcIiBbbmdDbGFzc109XCJ7J21vYmlsZUN1cnJlbnRQYWdlJzpyb3V0ZXIudXJsPT1tZW51LnVybH1cIiAgdGFiaW5kZXg9XCIwXCIgKGNsaWNrKT1cIm5hdmlnYXRlVXJsKG1lbnUsaXNFbmdhZ2VNZW51KVwiIFt0aXRsZV09XCJtZW51LmxhYmVsXCI+e3ttZW51LmxhYmVsfX08L2E+XHJcbiAgICAgIH1cclxuICAgICAgQGlmIChtZW51LnN1Ym1lbnUgJiYgbWVudS5zdWJtZW51LmNvbHVtbnMpIHtcclxuICAgICAgICA8YSAoY2xpY2spPVwidG9nZ2xlU3VibWVudSgkZXZlbnQsbWVudUluZGV4KVwiICBjbGFzcz1cInNpaV90b29sYmFyX25hdl9saW5rXCIgW25nQ2xhc3NdPVwieydtb2JpbGVDdXJyZW50UGFnZSc6cm91dGVyLnVybD09bWVudS51cmx9XCIgIFt0aXRsZV09XCJtZW51LmxhYmVsXCI+e3ttZW51LmxhYmVsfX1cclxuICAgICAgICAgIDxtYXQtaWNvbj5jaGV2cm9uX3JpZ2h0PC9tYXQtaWNvbj5cclxuICAgICAgICA8L2E+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInNpaV90b29sYmFyX3N1Ym1lbnUgXCIgW25nQ2xhc3NdPVwiISFzdWJNZW51T3BlblN0YXR1c1ttZW51SW5kZXhdPydpcy1vcGVuJzonaXMtY2xvc2VkJyBcIiA+XHJcbiAgICAgICAgICA8bWF0LWljb24gIGNsYXNzPVwic2lpX3Rvb2xiYXJfc3VibWVudS1pY29uLWJhY2tcIiAoY2xpY2spPVwidG9nZ2xlU3VibWVudSgkZXZlbnQsbWVudUluZGV4KVwiPmNoZXZyb25fbGVmdDwvbWF0LWljb24+XHJcbiAgICAgICAgICA8dWwgY2xhc3M9XCJzaWlfdG9vbGJhcl9zdWJuYXZcIj5cclxuICAgICAgICAgICAgQGZvciAoY29sTWVudSBvZiBtZW51LnN1Ym1lbnUuY29sdW1uczsgdHJhY2sgY29sTWVudSkge1xyXG4gICAgICAgICAgICAgIEBmb3IgKG12IG9mIGNvbE1lbnUuaXRlbXM7IHRyYWNrIG12KSB7XHJcbiAgICAgICAgICAgICAgICBAaWYgKCFtdi5wcm9maWxpbmcgfHwgISFtdi52aXNpYmxlUHJvZmlsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgIDxsaSAgIGNsYXNzPVwic2lpX3Rvb2xiYXJfc3VibmF2LWl0ZW1cIiA+XHJcbiAgICAgICAgICAgICAgICAgICAgPGEgIGNsYXNzPVwic2lpX3Rvb2xiYXJfc3VibmF2X19saW5rXCIgW25nQ2xhc3NdPVwieydtb2JpbGVDdXJyZW50UGFnZSc6cm91dGVyLnVybD09bXYudXJsfVwiIHRhYmluZGV4PVwiMFwiIChjbGljayk9XCJuYXZpZ2F0ZVVybChtdixpc0VuZ2FnZU1lbnUpOyRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKVwiIFt0aXRsZV09XCJtdi5sYWJlbFwiPnt7bXYubGFiZWx9fTwvYT5cclxuICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgQGlmIChjb2xNZW51Lml0ZW1zPy5sZW5ndGg+MCkge1xyXG4gICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwiY3VzdG9tLWRpdmlkZXJcIj48L2xpPlxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgPC91bD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgfVxyXG4gICAgPC9saT5cclxuICB9XHJcbjwvbmctdGVtcGxhdGU+XHJcblxyXG48bmctdGVtcGxhdGUgI3Rvb2xiYXJNZW51VGVtcGxhdGUgbGV0LWN1cnJNZW51IGxldC1pc0VuZ2FnZU1lbnU9XCJpc0VuZ2FnZU1lbnVcIj5cclxuICA8dWwgY2xhc3M9XCJzaWlfdG9vbGJhcl9uYXZiYXJfbmF2IG1lbnVOYXZJdGVtXCI+XHJcbiAgICBAZm9yIChtZW51IG9mIGN1cnJNZW51OyB0cmFjayBtZW51KSB7XHJcbiAgICAgIEBpZiAoIW1lbnUuc3VibWVudSB8fCAhbWVudS5zdWJtZW51LmNvbHVtbnMpIHtcclxuICAgICAgICA8bGkgIGNsYXNzPVwic2lpX3Rvb2xiYXJfbmF2X2l0ZW0gbWVudVZvaWNlXCIgW25nQ2xhc3NdPVwieydjdXJyZW50UGFnZSc6cm91dGVyLnVybD09bWVudS51cmx9XCI+XHJcbiAgICAgICAgICA8YSBjbGFzcz1cInNpaV90b29sYmFyX25hdl9saW5rXCIgdGFiaW5kZXg9XCIwXCIgKGNsaWNrKT1cIm5hdmlnYXRlVXJsKG1lbnUsIGlzRW5nYWdlTWVudSlcIiAgIFt0aXRsZV09XCJtZW51LmxhYmVsXCI+e3ttZW51LmxhYmVsfX08L2E+XHJcbiAgICAgICAgPC9saT5cclxuICAgICAgfVxyXG4gICAgICBAaWYgKG1lbnUuc3VibWVudSAmJiBtZW51LnN1Ym1lbnUuY29sdW1ucykge1xyXG4gICAgICAgIDxsaSAgY2xhc3M9XCJzaWlfdG9vbGJhcl9uYXZfaXRlbSBtZW51Vm9pY2VcIiAgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiICBbbmdDbGFzc109XCJ7J2N1cnJlbnRQYWdlJzpyb3V0ZXIudXJsPT1tZW51LnVybH1cIj5cclxuICAgICAgICAgIDxhICBjbGFzcz1cInNpaV90b29sYmFyX25hdl9saW5rIFwiICBbdGl0bGVdPVwibWVudS5sYWJlbFwiPnt7bWVudS5sYWJlbH19IDwvYT5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b29sYmFyTWVudVN1YlZvaWNlc1wiPlxyXG4gICAgICAgICAgICBAZm9yIChjb2xNZW51IG9mIG1lbnUuc3VibWVudS5jb2x1bW5zOyB0cmFjayBjb2xNZW51KSB7XHJcbiAgICAgICAgICAgICAgPHVsIGNsYXNzPVwidG9vbGJhck1lbnVTdWJWb2ljZXNDb2xcIiByb2xlPVwibWVudVwiPlxyXG4gICAgICAgICAgICAgICAgQGZvciAobXYgb2YgY29sTWVudS5pdGVtczsgdHJhY2sgbXYpIHtcclxuICAgICAgICAgICAgICAgICAgQGlmICghbXYucHJvZmlsaW5nIHx8ICEhbXYudmlzaWJsZVByb2ZpbGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIDxsaSAgID5cclxuICAgICAgICAgICAgICAgICAgICAgIDxhIHRhYmluZGV4PVwiMFwiIGNsYXNzPVwic2lpX3Rvb2xiYXJfZHJvcGRvd25fX2xpbmtcIiAgW25nQ2xhc3NdPVwieydtb2JpbGVDdXJyZW50UGFnZSc6cm91dGVyLnVybD09bXYudXJsfVwiIFt0aXRsZV09XCJtdi5sYWJlbFwiIChjbGljayk9XCJuYXZpZ2F0ZVVybChtdiwgaXNFbmdhZ2VNZW51KVwiID57e212LmxhYmVsfX08L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvbGk+XHJcbiAgICAgIH1cclxuICAgIH1cclxuICA8L3VsPlxyXG48L25nLXRlbXBsYXRlPlxyXG4iXX0=