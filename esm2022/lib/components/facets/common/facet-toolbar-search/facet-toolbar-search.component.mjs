import { Component, ViewChild, HostBinding } from '@angular/core';
import { fromEvent } from 'rxjs';
import { map, debounceTime, distinctUntilChanged } from 'rxjs/operators';
import { MatSuffix } from '@angular/material/form-field';
import { MatIcon } from '@angular/material/icon';
import { MatInput } from '@angular/material/input';
import * as i0 from "@angular/core";
import * as i1 from "../service/sii-facet.service";
export class FacetToolbarSearchComponent {
    get haveValue() {
        return this.siiFacetService.haveSearchText;
    }
    constructor(siiFacetService) {
        this.siiFacetService = siiFacetService;
        this.siiFacetService.removeAllFacetSelection$.subscribe(() => {
            this.changeTxt('', false);
            // this.inputElement.nativeElement.value='';
            // this.siiFacetService.searchFilterChange('',false)
        });
        this.siiFacetService.changeSearchTextRequestObs.subscribe((req) => {
            this.changeTxt(req, true);
        });
        // siiListController.textSearchChangeObs.subscribe((txt)=>{
        //   this.inputElement.nativeElement.value=txt;
        // })
    }
    changeTxt(txt, propagateChange) {
        this.inputElement.nativeElement.value = txt;
        this.siiFacetService.searchFilterChange(txt, propagateChange);
    }
    ngAfterViewInit() {
        if (this.siiFacetService._initFacetToSet.searchText.length != null && this.siiFacetService._initFacetToSet.searchText.length > 0) {
            Promise.resolve().then(() => {
                this.changeTxt(this.siiFacetService._initFacetToSet.searchText, false);
            });
        }
        fromEvent(this.inputElement.nativeElement, 'keyup')
            .pipe(map((i) => i.currentTarget.value), distinctUntilChanged(), debounceTime(500))
            .subscribe((txt) => {
            this.siiFacetService.searchFilterChange(txt);
        });
    }
    reset() {
        this.changeTxt('', true);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: FacetToolbarSearchComponent, deps: [{ token: i1.SiiFacetService }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.13", type: FacetToolbarSearchComponent, isStandalone: true, selector: "sii-facet-toolbar-search", host: { properties: { "class.searchWithValue": "this.haveValue" } }, viewQueries: [{ propertyName: "inputElement", first: true, predicate: ["ftSearchBox"], descendants: true }], ngImport: i0, template: "<!-- <div>\r\n<input   #ftSearchBox id=\"search-box\"\r\n  i18n-placeholder=\"@@Full_text_search\"\r\n  placeholder=\"search...\"\r\n  type=\"text\">\r\n\r\n  <mat-icon class=\"search-icon\" (click)=\"focusInput()\">search</mat-icon>\r\n</div> -->\r\n\r\n\r\n\r\n<!-- <mat-form-field appearance=\"outline\" > -->\r\n<input  id=\"ftSearchBox\" #ftSearchBox matInput i18n-placeholder=\"@@Full_text_search\"  placeholder=\"search...\">\r\n@if (!ftSearchBox.value) {\r\n  <mat-icon matSuffix>search</mat-icon>\r\n}\r\n@if (ftSearchBox.value) {\r\n  <mat-icon matSuffix   aria-label=\"Clear\" (click)=\"reset()\" style=\"cursor: pointer;\">close</mat-icon>\r\n}\r\n\r\n<!-- </mat-form-field> -->\r\n", styles: [":host{background-color:#fff;display:flex;padding:8px;border-radius:5px;color:#004191}input#ftSearchBox{outline:none;border:0;background:transparent;width:100%;font-size:1.1em;color:#00000080}input#ftSearchBox::placeholder{color:#090909;font-size:11px;opacity:1;text-transform:capitalize}input#ftSearchBox:-ms-input-placeholder{color:#090909}input#ftSearchBox::-ms-input-placeholder{color:#090909}:host:focus-within input#ftSearchBox,:host.searchWithValue input#ftSearchBox{color:#004191!important}\n"], dependencies: [{ kind: "directive", type: MatInput, selector: "input[matInput], textarea[matInput], select[matNativeControl],      input[matNativeControl], textarea[matNativeControl]", inputs: ["disabled", "id", "placeholder", "name", "required", "type", "errorStateMatcher", "aria-describedby", "value", "readonly"], exportAs: ["matInput"] }, { kind: "component", type: MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "directive", type: MatSuffix, selector: "[matSuffix], [matIconSuffix], [matTextSuffix]", inputs: ["matTextSuffix"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: FacetToolbarSearchComponent, decorators: [{
            type: Component,
            args: [{ selector: 'sii-facet-toolbar-search', standalone: true, imports: [MatInput, MatIcon, MatSuffix], template: "<!-- <div>\r\n<input   #ftSearchBox id=\"search-box\"\r\n  i18n-placeholder=\"@@Full_text_search\"\r\n  placeholder=\"search...\"\r\n  type=\"text\">\r\n\r\n  <mat-icon class=\"search-icon\" (click)=\"focusInput()\">search</mat-icon>\r\n</div> -->\r\n\r\n\r\n\r\n<!-- <mat-form-field appearance=\"outline\" > -->\r\n<input  id=\"ftSearchBox\" #ftSearchBox matInput i18n-placeholder=\"@@Full_text_search\"  placeholder=\"search...\">\r\n@if (!ftSearchBox.value) {\r\n  <mat-icon matSuffix>search</mat-icon>\r\n}\r\n@if (ftSearchBox.value) {\r\n  <mat-icon matSuffix   aria-label=\"Clear\" (click)=\"reset()\" style=\"cursor: pointer;\">close</mat-icon>\r\n}\r\n\r\n<!-- </mat-form-field> -->\r\n", styles: [":host{background-color:#fff;display:flex;padding:8px;border-radius:5px;color:#004191}input#ftSearchBox{outline:none;border:0;background:transparent;width:100%;font-size:1.1em;color:#00000080}input#ftSearchBox::placeholder{color:#090909;font-size:11px;opacity:1;text-transform:capitalize}input#ftSearchBox:-ms-input-placeholder{color:#090909}input#ftSearchBox::-ms-input-placeholder{color:#090909}:host:focus-within input#ftSearchBox,:host.searchWithValue input#ftSearchBox{color:#004191!important}\n"] }]
        }], ctorParameters: () => [{ type: i1.SiiFacetService }], propDecorators: { inputElement: [{
                type: ViewChild,
                args: ['ftSearchBox', { static: false }]
            }], haveValue: [{
                type: HostBinding,
                args: ['class.searchWithValue']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFjZXQtdG9vbGJhci1zZWFyY2guY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvc2lpLXRvb2xraXQvc3JjL2xpYi9jb21wb25lbnRzL2ZhY2V0cy9jb21tb24vZmFjZXQtdG9vbGJhci1zZWFyY2gvZmFjZXQtdG9vbGJhci1zZWFyY2guY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvc2lpLXRvb2xraXQvc3JjL2xpYi9jb21wb25lbnRzL2ZhY2V0cy9jb21tb24vZmFjZXQtdG9vbGJhci1zZWFyY2gvZmFjZXQtdG9vbGJhci1zZWFyY2guY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxTQUFTLEVBQTZCLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUlyRyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ2pDLE9BQU8sRUFBRSxHQUFHLEVBQUUsWUFBWSxFQUFFLG9CQUFvQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDekUsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQ3pELE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUNqRCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0seUJBQXlCLENBQUM7OztBQVNuRCxNQUFNLE9BQU8sMkJBQTJCO0lBR3RDLElBQTBDLFNBQVM7UUFDakQsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLGNBQWMsQ0FBQztJQUM3QyxDQUFDO0lBR0QsWUFBbUIsZUFBK0I7UUFBL0Isb0JBQWUsR0FBZixlQUFlLENBQWdCO1FBQ2hELElBQUksQ0FBQyxlQUFlLENBQUMsd0JBQXdCLENBQUMsU0FBUyxDQUFDLEdBQUUsRUFBRTtZQUMxRCxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUMxQiw0Q0FBNEM7WUFDNUMsb0RBQW9EO1FBQ3RELENBQUMsQ0FBQyxDQUFBO1FBRUYsSUFBSSxDQUFDLGVBQWUsQ0FBQywwQkFBMEIsQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLEVBQUMsRUFBRTtZQUMvRCxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUM1QixDQUFDLENBQUMsQ0FBQTtRQUNGLDJEQUEyRDtRQUMzRCwrQ0FBK0M7UUFDL0MsS0FBSztJQUNQLENBQUM7SUFFTyxTQUFTLENBQUMsR0FBVSxFQUFFLGVBQXVCO1FBQ25ELElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLEtBQUssR0FBRSxHQUFHLENBQUM7UUFDM0MsSUFBSSxDQUFDLGVBQWUsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUcsZUFBZSxDQUFDLENBQUM7SUFDakUsQ0FBQztJQUVELGVBQWU7UUFDYixJQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxNQUFNLElBQUUsSUFBSSxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUMsQ0FBQyxFQUFDLENBQUM7WUFDM0gsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUU7Z0JBQzFCLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxlQUFlLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ3pFLENBQUMsQ0FBQyxDQUFBO1FBRUosQ0FBQztRQUVELFNBQVMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsRUFBRSxPQUFPLENBQUM7YUFDbEQsSUFBSSxDQUNILEdBQUcsQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsRUFDdEMsb0JBQW9CLEVBQUUsRUFDdEIsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUNsQjthQUNBLFNBQVMsQ0FBQyxDQUFDLEdBQUcsRUFBQyxFQUFFO1lBQ2hCLElBQUksQ0FBQyxlQUFlLENBQUMsa0JBQWtCLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDOUMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsS0FBSztRQUNILElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzNCLENBQUM7K0dBakRVLDJCQUEyQjttR0FBM0IsMkJBQTJCLHNRQ2pCeEMsd3JCQXFCQSw2aUJETmMsUUFBUSxpVUFBRSxPQUFPLDJJQUFFLFNBQVM7OzRGQUU3QiwyQkFBMkI7a0JBUHZDLFNBQVM7K0JBQ0ksMEJBQTBCLGNBR3hCLElBQUksV0FDUCxDQUFDLFFBQVEsRUFBRSxPQUFPLEVBQUUsU0FBUyxDQUFDO29GQUdNLFlBQVk7c0JBQTFELFNBQVM7dUJBQUMsYUFBYSxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTtnQkFFRCxTQUFTO3NCQUFsRCxXQUFXO3VCQUFDLHVCQUF1QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIEFmdGVyVmlld0luaXQsIEhvc3RCaW5kaW5nIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFNpaUZhY2V0U2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2Uvc2lpLWZhY2V0LnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBTaWlGYWNldE9wdGlvbkR0byB9IGZyb20gJy4uL2R0by9pLXNpaS1mYWNldC1vcHRpb24uZHRvJztcclxuaW1wb3J0IHsgU2lpRmFjZXREdG8gfSBmcm9tICcuLi9kdG8vaS1zaWktZmFjZXQuZHRvJztcclxuaW1wb3J0IHsgZnJvbUV2ZW50IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IG1hcCwgZGVib3VuY2VUaW1lLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgTWF0U3VmZml4IH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvZm9ybS1maWVsZCc7XHJcbmltcG9ydCB7IE1hdEljb24gfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9pY29uJztcclxuaW1wb3J0IHsgTWF0SW5wdXQgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9pbnB1dCc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnc2lpLWZhY2V0LXRvb2xiYXItc2VhcmNoJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9mYWNldC10b29sYmFyLXNlYXJjaC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZVVybHM6IFsnLi9mYWNldC10b29sYmFyLXNlYXJjaC5jb21wb25lbnQuY3NzJ10sXHJcbiAgICBzdGFuZGFsb25lOiB0cnVlLFxyXG4gICAgaW1wb3J0czogW01hdElucHV0LCBNYXRJY29uLCBNYXRTdWZmaXhdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGYWNldFRvb2xiYXJTZWFyY2hDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0IHtcclxuICBAVmlld0NoaWxkKCdmdFNlYXJjaEJveCcsIHsgc3RhdGljOiBmYWxzZSB9KSAgIGlucHV0RWxlbWVudDogRWxlbWVudFJlZjtcclxuXHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5zZWFyY2hXaXRoVmFsdWUnKSBnZXQgaGF2ZVZhbHVlKCl7XHJcbiAgICByZXR1cm4gdGhpcy5zaWlGYWNldFNlcnZpY2UuaGF2ZVNlYXJjaFRleHQ7XHJcbiAgfVxyXG5cclxuXHJcbiAgY29uc3RydWN0b3IocHVibGljIHNpaUZhY2V0U2VydmljZTpTaWlGYWNldFNlcnZpY2UpIHtcclxuICAgIHRoaXMuc2lpRmFjZXRTZXJ2aWNlLnJlbW92ZUFsbEZhY2V0U2VsZWN0aW9uJC5zdWJzY3JpYmUoKCk9PntcclxuICAgICAgdGhpcy5jaGFuZ2VUeHQoJycsIGZhbHNlKTtcclxuICAgICAgLy8gdGhpcy5pbnB1dEVsZW1lbnQubmF0aXZlRWxlbWVudC52YWx1ZT0nJztcclxuICAgICAgLy8gdGhpcy5zaWlGYWNldFNlcnZpY2Uuc2VhcmNoRmlsdGVyQ2hhbmdlKCcnLGZhbHNlKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLnNpaUZhY2V0U2VydmljZS5jaGFuZ2VTZWFyY2hUZXh0UmVxdWVzdE9icy5zdWJzY3JpYmUoKHJlcSk9PntcclxuICAgICAgdGhpcy5jaGFuZ2VUeHQocmVxLCB0cnVlKTtcclxuICAgIH0pXHJcbiAgICAvLyBzaWlMaXN0Q29udHJvbGxlci50ZXh0U2VhcmNoQ2hhbmdlT2JzLnN1YnNjcmliZSgodHh0KT0+e1xyXG4gICAgLy8gICB0aGlzLmlucHV0RWxlbWVudC5uYXRpdmVFbGVtZW50LnZhbHVlPXR4dDtcclxuICAgIC8vIH0pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNoYW5nZVR4dCh0eHQ6c3RyaW5nLCBwcm9wYWdhdGVDaGFuZ2U6Ym9vbGVhbil7XHJcbiAgICB0aGlzLmlucHV0RWxlbWVudC5uYXRpdmVFbGVtZW50LnZhbHVlPSB0eHQ7XHJcbiAgICB0aGlzLnNpaUZhY2V0U2VydmljZS5zZWFyY2hGaWx0ZXJDaGFuZ2UodHh0ICwgcHJvcGFnYXRlQ2hhbmdlKTtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgIGlmKHRoaXMuc2lpRmFjZXRTZXJ2aWNlLl9pbml0RmFjZXRUb1NldC5zZWFyY2hUZXh0Lmxlbmd0aCE9bnVsbCAmJiB0aGlzLnNpaUZhY2V0U2VydmljZS5faW5pdEZhY2V0VG9TZXQuc2VhcmNoVGV4dC5sZW5ndGg+MCl7XHJcbiAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY2hhbmdlVHh0KHRoaXMuc2lpRmFjZXRTZXJ2aWNlLl9pbml0RmFjZXRUb1NldC5zZWFyY2hUZXh0LCBmYWxzZSk7XHJcbiAgICAgIH0pXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGZyb21FdmVudCh0aGlzLmlucHV0RWxlbWVudC5uYXRpdmVFbGVtZW50LCAna2V5dXAnKVxyXG4gICAgLnBpcGUoXHJcbiAgICAgIG1hcCgoaTogYW55KSA9PiBpLmN1cnJlbnRUYXJnZXQudmFsdWUpLFxyXG4gICAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpLFxyXG4gICAgICBkZWJvdW5jZVRpbWUoNTAwKVxyXG4gICAgKVxyXG4gICAgLnN1YnNjcmliZSgodHh0KT0+e1xyXG4gICAgICB0aGlzLnNpaUZhY2V0U2VydmljZS5zZWFyY2hGaWx0ZXJDaGFuZ2UodHh0KVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXNldCgpe1xyXG4gICAgdGhpcy5jaGFuZ2VUeHQoJycsIHRydWUpO1xyXG4gIH1cclxuXHJcblxyXG5cclxufVxyXG4iLCI8IS0tIDxkaXY+XHJcbjxpbnB1dCAgICNmdFNlYXJjaEJveCBpZD1cInNlYXJjaC1ib3hcIlxyXG4gIGkxOG4tcGxhY2Vob2xkZXI9XCJAQEZ1bGxfdGV4dF9zZWFyY2hcIlxyXG4gIHBsYWNlaG9sZGVyPVwic2VhcmNoLi4uXCJcclxuICB0eXBlPVwidGV4dFwiPlxyXG5cclxuICA8bWF0LWljb24gY2xhc3M9XCJzZWFyY2gtaWNvblwiIChjbGljayk9XCJmb2N1c0lucHV0KClcIj5zZWFyY2g8L21hdC1pY29uPlxyXG48L2Rpdj4gLS0+XHJcblxyXG5cclxuXHJcbjwhLS0gPG1hdC1mb3JtLWZpZWxkIGFwcGVhcmFuY2U9XCJvdXRsaW5lXCIgPiAtLT5cclxuPGlucHV0ICBpZD1cImZ0U2VhcmNoQm94XCIgI2Z0U2VhcmNoQm94IG1hdElucHV0IGkxOG4tcGxhY2Vob2xkZXI9XCJAQEZ1bGxfdGV4dF9zZWFyY2hcIiAgcGxhY2Vob2xkZXI9XCJzZWFyY2guLi5cIj5cclxuQGlmICghZnRTZWFyY2hCb3gudmFsdWUpIHtcclxuICA8bWF0LWljb24gbWF0U3VmZml4PnNlYXJjaDwvbWF0LWljb24+XHJcbn1cclxuQGlmIChmdFNlYXJjaEJveC52YWx1ZSkge1xyXG4gIDxtYXQtaWNvbiBtYXRTdWZmaXggICBhcmlhLWxhYmVsPVwiQ2xlYXJcIiAoY2xpY2spPVwicmVzZXQoKVwiIHN0eWxlPVwiY3Vyc29yOiBwb2ludGVyO1wiPmNsb3NlPC9tYXQtaWNvbj5cclxufVxyXG5cclxuPCEtLSA8L21hdC1mb3JtLWZpZWxkPiAtLT5cclxuIl19