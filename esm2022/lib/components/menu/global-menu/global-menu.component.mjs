import { Component, Output, EventEmitter, Input } from '@angular/core';
import { SIILinkManager } from '../utils/SiiLinkManager';
import { CompanySelectionDialogComponent } from './components/company-selection-dialog/company-selection-dialog.component';
import { GlobalMenuVoicesFilterPipe } from './utils/global-menu-voices-filter.pipe';
import { GlobalMenuFilterPipe } from './utils/global-menu-filter.pipe';
import { AsyncPipe } from '@angular/common';
import { MatTooltip } from '@angular/material/tooltip';
import { MatMenuTrigger, MatMenu, MatMenuItem } from '@angular/material/menu';
import { MatIconButton } from '@angular/material/button';
import { MatNavList, MatListItem } from '@angular/material/list';
import { SiiCompanySelectionComponent } from './components/company-selection/company-selection.component';
import { MatIcon } from '@angular/material/icon';
import { FormsModule } from '@angular/forms';
import { MatInput } from '@angular/material/input';
import { MatFormField, MatSuffix } from '@angular/material/form-field';
import { PageContentToolbarComponent } from '../../page-container/page-content/page-content-toolbar/page-content-toolbar.component';
import { PageContentComponent } from '../../page-container/page-content/page-content.component';
import { ToolbarComponent } from '../../toolbar/toolbar.component';
import { SiiPageContainerComponent } from '../../page-container/page-container.component';
import * as i0 from "@angular/core";
import * as i1 from "./service/global-menu.service";
import * as i2 from "@angular/material/dialog";
import * as i3 from "@angular/forms";
export class GlobalMenuComponent {
    get menus() {
        return this.globalMenuService.menu;
    }
    get company() {
        return this.globalMenuService.selectedCompany.value;
    }
    constructor(globalMenuService, matDialog) {
        this.globalMenuService = globalMenuService;
        this.matDialog = matDialog;
        this.showCloseButton = true;
        this.closeAction = new EventEmitter();
        this.linkManager = new SIILinkManager();
        this.searchFilter = '';
        this.globalMenuService.initMenu();
    }
    close() {
        this.closeAction.next();
    }
    onLinkClicked(voice, openInThisWindow = false) {
        if (!voice.companyDep) { // if there is no reason to choose the company the link refers to
            this.linkManager.openLink(voice, openInThisWindow);
        }
        else if (voice.companies.length === 1 && (this.company === null || this.company === '')) {
            this.linkManager.openLink(voice, openInThisWindow, voice.companies[0]);
        }
        else if (!this.company) {
            this.matDialog.open(CompanySelectionDialogComponent, {
                maxWidth: '95vw',
                data: {
                    companies: voice.companies.map(c => this.globalMenuService.menuUserInfo.companies[c]),
                    title: voice.title
                },
            }).afterClosed().subscribe(companyIdSelected => {
                if (companyIdSelected) {
                    this.linkManager.openLink(voice, openInThisWindow, companyIdSelected);
                }
            });
        }
        else {
            this.linkManager.openLink(voice, openInThisWindow, this.company);
        }
    }
    reset() {
        this.searchFilter = '';
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: GlobalMenuComponent, deps: [{ token: i1.GlobalMenuService }, { token: i2.MatDialog }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.13", type: GlobalMenuComponent, isStandalone: true, selector: "sii-global-menu", inputs: { showCloseButton: "showCloseButton" }, outputs: { closeAction: "closeAction" }, ngImport: i0, template: "<sii-page-container>\r\n  <sii-toolbar toolbarTitle=\"SIAL\"  [showCloseButton]=\"showCloseButton\" (closeAction)=\"close()\"></sii-toolbar>\r\n  <sii-page-content [bodyStyle]=\"'padding:0px'\" bodyClass=\"globalMenuBody\">\r\n    <sii-page-content-toolbar>\r\n      <div class=\"page-content-toolbar-body\">\r\n        <mat-form-field class=\"menu_filter\" appearance=\"outline\">\r\n          <input #searchBox  [(ngModel)]=\"searchFilter\" matInput placeholder=\"Search on menu\">\r\n          @if (!searchBox.value) {\r\n            <mat-icon matSuffix>search</mat-icon>\r\n          }\r\n          @if (searchBox.value) {\r\n            <mat-icon matSuffix   aria-label=\"Clear\" (click)=\"reset()\" style=\"cursor: pointer;\">close</mat-icon>\r\n          }\r\n        </mat-form-field>\r\n\r\n        <span [style.flex]=\"1\"></span>\r\n        <sii-company-selection></sii-company-selection>\r\n      </div>\r\n    </sii-page-content-toolbar>\r\n    <sii-company-selection class=\"bodyCompanySelection\"></sii-company-selection>\r\n\r\n\r\n    <div class=\"masonry-wrapper\"  >\r\n      <div class=\"masonry\">\r\n\r\n        <!-- PREFERITI -->\r\n        <!-- *ngIf=\"(globalMenuService.favoriteVoices | async)?.length>0\" -->\r\n        <div class=\"masonry-item preferiti-menu\" >\r\n          <div class=\"category-title\">\r\n            <mat-icon>star</mat-icon>\r\n            <span>Preferiti</span>\r\n          </div>\r\n          <mat-nav-list dense disableRipple=\"true\">\r\n            @for (favVoice of globalMenuService.favoriteVoice | async | globalMenuVoicesFilter:company:searchFilter ; track favVoice; let i = $index) {\r\n              <!-- *ngIf=\"globalMenuService.isEnabledForCurrentSelectedCompany(favVoice,company)\"  -->\r\n              <mat-list-item  (click)=\"onLinkClicked(favVoice)\">\r\n                <div class=\"menu-voice\"  > {{favVoice.title}} </div>\r\n                <button mat-icon-button class=\"submenu\" [matMenuTriggerFor]=\"submenu\" (click)=\"$event.stopPropagation()\">\r\n                  <mat-icon>more_vert</mat-icon>\r\n                </button>\r\n                <mat-menu #submenu=\"matMenu\">\r\n                  <button mat-menu-item (click)=\"globalMenuService.removeFromFavorites(favVoice, i)\">\r\n                    <mat-icon>star_border</mat-icon>\r\n                    <span class=\"font12\" i18n=\"@@removeFavorites\">Remove from favorites</span>\r\n                  </button>\r\n                  <button mat-menu-item  (click)=\"onLinkClicked(favVoice,true)\">\r\n                    <mat-icon>launch</mat-icon>\r\n                    <span class=\"font12\" i18n=\"@@openThisWindow\">Open in this window</span>\r\n                  </button>\r\n                </mat-menu>\r\n              </mat-list-item>\r\n            }\r\n\r\n          </mat-nav-list>\r\n        </div>\r\n\r\n\r\n        @for (menu of (menus | async) | globalMenuFilter:company:searchFilter; track menu) {\r\n          <div class=\"masonry-item\">\r\n            <div class=\"category-title\">\r\n              <mat-icon [svgIcon]=\"menu.icon\"></mat-icon>\r\n              <span>{{menu.category}}</span>\r\n            </div>\r\n            <mat-nav-list dense disableRipple=\"true\">\r\n              @for (voice of menu.voices  ; track voice) {\r\n                <mat-list-item   (click)=\"onLinkClicked(voice)\" >\r\n                  <div class=\"menu-voice\"> {{voice.title}} </div>\r\n                  <button mat-icon-button class=\"submenu\" [matMenuTriggerFor]=\"submenu\" (click)=\"$event.stopPropagation()\">\r\n                    <mat-icon i18n-matTooltip=\"@@openSubmenu\" matTooltip=\"Open Submenu\">more_vert</mat-icon>\r\n                  </button>\r\n                  <mat-menu #submenu=\"matMenu\">\r\n                    <button mat-menu-item [disabled]=\"globalMenuService.isInFavorites(voice)\"  (click)=\"globalMenuService.addToFavorites(voice)\">\r\n                      <mat-icon>star_border</mat-icon>\r\n                      <span class=\"font12\" i18n=\"@@addFavorites\">Add to favorites</span>\r\n                    </button>\r\n                    <button mat-menu-item  (click)=\"onLinkClicked(voice,true)\">\r\n                      <mat-icon>launch</mat-icon>\r\n                      <span class=\"font12\" i18n=\"@@openThisWindow\">Open in this window</span>\r\n                    </button>\r\n                  </mat-menu>\r\n                </mat-list-item>\r\n              }\r\n            </mat-nav-list>\r\n          </div>\r\n        }\r\n      </div>\r\n    </div>\r\n\r\n\r\n\r\n  </sii-page-content>\r\n</sii-page-container>\r\n", styles: [":host{right:0;top:0;position:absolute;width:100vw;height:100vh;z-index:11}sii-page-content{background-color:#f6f7f8;color:#000}.page-content-toolbar-body{padding:0 10px;display:flex;flex:1 1 100%}sii-sdac-preview{margin:10px!important}.masonry-wrapper{margin:0!important;flex:1 1 auto;overflow:auto}.masonry{columns:1;column-gap:30px;position:relative;padding:0 10px}.masonry-item{display:inline-block;vertical-align:top;margin:15px 0;width:100%;background-color:#fff;box-shadow:0 1px 3px #0003}.category-title{color:#427f9f;display:flex;align-items:center;padding:10px;letter-spacing:.36px;font-size:18px}.preferiti-menu .category-title{color:#c51b88}.category-title mat-icon{padding-right:10px}.menu-voice{flex:1;overflow:hidden;text-overflow:ellipsis;font-size:14px;line-height:14px;letter-spacing:.43px}.submenu{display:none;margin-right:-16px}mat-list-item:hover .submenu{display:inline-block}.menu_filter input{font-size:17px;line-height:43px;color:#000;margin-top:5px}mat-form-field.menu_filter::ng-deep .mat-form-field-infix{padding:0;border:0}mat-form-field.menu_filter::ng-deep .mat-form-field-wrapper{margin:0;padding:0}mat-form-field.menu_filter::ng-deep .mat-form-field-suffix{top:-7px;color:#0009}mat-form-field.menu_filter::ng-deep .mat-form-field-flex:hover .mat-form-field-outline,mat-form-field.menu_filter::ng-deep .mat-form-field-outline{background-color:#fff;border-radius:5px}.bodyCompanySelection{display:none;margin:10px!important}::ng-deep .globalMenuBody{flex-direction:row-reverse}@media only screen and (max-width: 500px){.menu_filter{flex:1 1 100%}.page-content-toolbar-body sii-company-selection{display:none}.bodyCompanySelection{display:block}}@media only screen and (max-width: 840px){::ng-deep .globalMenuBody{flex-direction:column}::ng-deep .globalMenuBody .masonry-wrapper{overflow:unset}}@media only screen and (min-width: 700px) and (max-width: 840px){.masonry{columns:2}}@media only screen and (min-width: 841px) and (max-width: 1090px){.masonry{columns:2}.masonry-wrapper.withSdac .masonry{columns:1}}@media only screen and (min-width: 1091px) and (max-width: 1340px){.masonry{columns:3}.masonry-wrapper.withSdac .masonry{columns:2}}@media only screen and (min-width: 1341px) and (max-width: 1590px){.masonry{columns:4}.masonry-wrapper.withSdac .masonry{columns:3}}@media only screen and (min-width: 1591px){.masonry{columns:5}.masonry-wrapper.withSdac .masonry{columns:4}}\n"], dependencies: [{ kind: "component", type: SiiPageContainerComponent, selector: "sii-page-container", inputs: ["autoHiddenToolbar", "scrollerRef", "backgroundImgUrl", "hideBackgroundImg", "backgroundClass"], outputs: ["clickOutsideDetail", "toggleFilterPanel"] }, { kind: "component", type: ToolbarComponent, selector: "sii-toolbar", inputs: ["autoHide", "toolbarTitle", "menu", "applicationMenu", "helpId", "showEngageSearch", "showEngageMenu", "showCloseButton"], outputs: ["closeAction"] }, { kind: "component", type: PageContentComponent, selector: "sii-page-content", inputs: ["width", "bodyStyle", "bodyClass"] }, { kind: "component", type: PageContentToolbarComponent, selector: "sii-page-content-toolbar", inputs: ["filtersCount", "hideCount", "itemsCount", "itemsCountLabel", "autoHide", "filterIcon"] }, { kind: "component", type: MatFormField, selector: "mat-form-field", inputs: ["hideRequiredMarker", "color", "floatLabel", "appearance", "subscriptSizing", "hintLabel"], exportAs: ["matFormField"] }, { kind: "directive", type: MatInput, selector: "input[matInput], textarea[matInput], select[matNativeControl],      input[matNativeControl], textarea[matNativeControl]", inputs: ["disabled", "id", "placeholder", "name", "required", "type", "errorStateMatcher", "aria-describedby", "value", "readonly"], exportAs: ["matInput"] }, { kind: "ngmodule", type: FormsModule }, { kind: "directive", type: i3.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i3.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i3.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "component", type: MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "directive", type: MatSuffix, selector: "[matSuffix], [matIconSuffix], [matTextSuffix]", inputs: ["matTextSuffix"] }, { kind: "component", type: SiiCompanySelectionComponent, selector: "sii-company-selection" }, { kind: "component", type: MatNavList, selector: "mat-nav-list", exportAs: ["matNavList"] }, { kind: "component", type: MatListItem, selector: "mat-list-item, a[mat-list-item], button[mat-list-item]", inputs: ["activated"], exportAs: ["matListItem"] }, { kind: "component", type: MatIconButton, selector: "button[mat-icon-button]", exportAs: ["matButton"] }, { kind: "directive", type: MatMenuTrigger, selector: "[mat-menu-trigger-for], [matMenuTriggerFor]", inputs: ["mat-menu-trigger-for", "matMenuTriggerFor", "matMenuTriggerData", "matMenuTriggerRestoreFocus"], outputs: ["menuOpened", "onMenuOpen", "menuClosed", "onMenuClose"], exportAs: ["matMenuTrigger"] }, { kind: "component", type: MatMenu, selector: "mat-menu", inputs: ["backdropClass", "aria-label", "aria-labelledby", "aria-describedby", "xPosition", "yPosition", "overlapTrigger", "hasBackdrop", "class", "classList"], outputs: ["closed", "close"], exportAs: ["matMenu"] }, { kind: "component", type: MatMenuItem, selector: "[mat-menu-item]", inputs: ["role", "disabled", "disableRipple"], exportAs: ["matMenuItem"] }, { kind: "directive", type: MatTooltip, selector: "[matTooltip]", inputs: ["matTooltipPosition", "matTooltipPositionAtOrigin", "matTooltipDisabled", "matTooltipShowDelay", "matTooltipHideDelay", "matTooltipTouchGestures", "matTooltip", "matTooltipClass"], exportAs: ["matTooltip"] }, { kind: "pipe", type: AsyncPipe, name: "async" }, { kind: "pipe", type: GlobalMenuFilterPipe, name: "globalMenuFilter" }, { kind: "pipe", type: GlobalMenuVoicesFilterPipe, name: "globalMenuVoicesFilter" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: GlobalMenuComponent, decorators: [{
            type: Component,
            args: [{ selector: 'sii-global-menu', standalone: true, imports: [SiiPageContainerComponent, ToolbarComponent, PageContentComponent, PageContentToolbarComponent, MatFormField, MatInput, FormsModule, MatIcon, MatSuffix, SiiCompanySelectionComponent, MatNavList, MatListItem, MatIconButton, MatMenuTrigger, MatMenu, MatMenuItem, MatTooltip, AsyncPipe, GlobalMenuFilterPipe, GlobalMenuVoicesFilterPipe], template: "<sii-page-container>\r\n  <sii-toolbar toolbarTitle=\"SIAL\"  [showCloseButton]=\"showCloseButton\" (closeAction)=\"close()\"></sii-toolbar>\r\n  <sii-page-content [bodyStyle]=\"'padding:0px'\" bodyClass=\"globalMenuBody\">\r\n    <sii-page-content-toolbar>\r\n      <div class=\"page-content-toolbar-body\">\r\n        <mat-form-field class=\"menu_filter\" appearance=\"outline\">\r\n          <input #searchBox  [(ngModel)]=\"searchFilter\" matInput placeholder=\"Search on menu\">\r\n          @if (!searchBox.value) {\r\n            <mat-icon matSuffix>search</mat-icon>\r\n          }\r\n          @if (searchBox.value) {\r\n            <mat-icon matSuffix   aria-label=\"Clear\" (click)=\"reset()\" style=\"cursor: pointer;\">close</mat-icon>\r\n          }\r\n        </mat-form-field>\r\n\r\n        <span [style.flex]=\"1\"></span>\r\n        <sii-company-selection></sii-company-selection>\r\n      </div>\r\n    </sii-page-content-toolbar>\r\n    <sii-company-selection class=\"bodyCompanySelection\"></sii-company-selection>\r\n\r\n\r\n    <div class=\"masonry-wrapper\"  >\r\n      <div class=\"masonry\">\r\n\r\n        <!-- PREFERITI -->\r\n        <!-- *ngIf=\"(globalMenuService.favoriteVoices | async)?.length>0\" -->\r\n        <div class=\"masonry-item preferiti-menu\" >\r\n          <div class=\"category-title\">\r\n            <mat-icon>star</mat-icon>\r\n            <span>Preferiti</span>\r\n          </div>\r\n          <mat-nav-list dense disableRipple=\"true\">\r\n            @for (favVoice of globalMenuService.favoriteVoice | async | globalMenuVoicesFilter:company:searchFilter ; track favVoice; let i = $index) {\r\n              <!-- *ngIf=\"globalMenuService.isEnabledForCurrentSelectedCompany(favVoice,company)\"  -->\r\n              <mat-list-item  (click)=\"onLinkClicked(favVoice)\">\r\n                <div class=\"menu-voice\"  > {{favVoice.title}} </div>\r\n                <button mat-icon-button class=\"submenu\" [matMenuTriggerFor]=\"submenu\" (click)=\"$event.stopPropagation()\">\r\n                  <mat-icon>more_vert</mat-icon>\r\n                </button>\r\n                <mat-menu #submenu=\"matMenu\">\r\n                  <button mat-menu-item (click)=\"globalMenuService.removeFromFavorites(favVoice, i)\">\r\n                    <mat-icon>star_border</mat-icon>\r\n                    <span class=\"font12\" i18n=\"@@removeFavorites\">Remove from favorites</span>\r\n                  </button>\r\n                  <button mat-menu-item  (click)=\"onLinkClicked(favVoice,true)\">\r\n                    <mat-icon>launch</mat-icon>\r\n                    <span class=\"font12\" i18n=\"@@openThisWindow\">Open in this window</span>\r\n                  </button>\r\n                </mat-menu>\r\n              </mat-list-item>\r\n            }\r\n\r\n          </mat-nav-list>\r\n        </div>\r\n\r\n\r\n        @for (menu of (menus | async) | globalMenuFilter:company:searchFilter; track menu) {\r\n          <div class=\"masonry-item\">\r\n            <div class=\"category-title\">\r\n              <mat-icon [svgIcon]=\"menu.icon\"></mat-icon>\r\n              <span>{{menu.category}}</span>\r\n            </div>\r\n            <mat-nav-list dense disableRipple=\"true\">\r\n              @for (voice of menu.voices  ; track voice) {\r\n                <mat-list-item   (click)=\"onLinkClicked(voice)\" >\r\n                  <div class=\"menu-voice\"> {{voice.title}} </div>\r\n                  <button mat-icon-button class=\"submenu\" [matMenuTriggerFor]=\"submenu\" (click)=\"$event.stopPropagation()\">\r\n                    <mat-icon i18n-matTooltip=\"@@openSubmenu\" matTooltip=\"Open Submenu\">more_vert</mat-icon>\r\n                  </button>\r\n                  <mat-menu #submenu=\"matMenu\">\r\n                    <button mat-menu-item [disabled]=\"globalMenuService.isInFavorites(voice)\"  (click)=\"globalMenuService.addToFavorites(voice)\">\r\n                      <mat-icon>star_border</mat-icon>\r\n                      <span class=\"font12\" i18n=\"@@addFavorites\">Add to favorites</span>\r\n                    </button>\r\n                    <button mat-menu-item  (click)=\"onLinkClicked(voice,true)\">\r\n                      <mat-icon>launch</mat-icon>\r\n                      <span class=\"font12\" i18n=\"@@openThisWindow\">Open in this window</span>\r\n                    </button>\r\n                  </mat-menu>\r\n                </mat-list-item>\r\n              }\r\n            </mat-nav-list>\r\n          </div>\r\n        }\r\n      </div>\r\n    </div>\r\n\r\n\r\n\r\n  </sii-page-content>\r\n</sii-page-container>\r\n", styles: [":host{right:0;top:0;position:absolute;width:100vw;height:100vh;z-index:11}sii-page-content{background-color:#f6f7f8;color:#000}.page-content-toolbar-body{padding:0 10px;display:flex;flex:1 1 100%}sii-sdac-preview{margin:10px!important}.masonry-wrapper{margin:0!important;flex:1 1 auto;overflow:auto}.masonry{columns:1;column-gap:30px;position:relative;padding:0 10px}.masonry-item{display:inline-block;vertical-align:top;margin:15px 0;width:100%;background-color:#fff;box-shadow:0 1px 3px #0003}.category-title{color:#427f9f;display:flex;align-items:center;padding:10px;letter-spacing:.36px;font-size:18px}.preferiti-menu .category-title{color:#c51b88}.category-title mat-icon{padding-right:10px}.menu-voice{flex:1;overflow:hidden;text-overflow:ellipsis;font-size:14px;line-height:14px;letter-spacing:.43px}.submenu{display:none;margin-right:-16px}mat-list-item:hover .submenu{display:inline-block}.menu_filter input{font-size:17px;line-height:43px;color:#000;margin-top:5px}mat-form-field.menu_filter::ng-deep .mat-form-field-infix{padding:0;border:0}mat-form-field.menu_filter::ng-deep .mat-form-field-wrapper{margin:0;padding:0}mat-form-field.menu_filter::ng-deep .mat-form-field-suffix{top:-7px;color:#0009}mat-form-field.menu_filter::ng-deep .mat-form-field-flex:hover .mat-form-field-outline,mat-form-field.menu_filter::ng-deep .mat-form-field-outline{background-color:#fff;border-radius:5px}.bodyCompanySelection{display:none;margin:10px!important}::ng-deep .globalMenuBody{flex-direction:row-reverse}@media only screen and (max-width: 500px){.menu_filter{flex:1 1 100%}.page-content-toolbar-body sii-company-selection{display:none}.bodyCompanySelection{display:block}}@media only screen and (max-width: 840px){::ng-deep .globalMenuBody{flex-direction:column}::ng-deep .globalMenuBody .masonry-wrapper{overflow:unset}}@media only screen and (min-width: 700px) and (max-width: 840px){.masonry{columns:2}}@media only screen and (min-width: 841px) and (max-width: 1090px){.masonry{columns:2}.masonry-wrapper.withSdac .masonry{columns:1}}@media only screen and (min-width: 1091px) and (max-width: 1340px){.masonry{columns:3}.masonry-wrapper.withSdac .masonry{columns:2}}@media only screen and (min-width: 1341px) and (max-width: 1590px){.masonry{columns:4}.masonry-wrapper.withSdac .masonry{columns:3}}@media only screen and (min-width: 1591px){.masonry{columns:5}.masonry-wrapper.withSdac .masonry{columns:4}}\n"] }]
        }], ctorParameters: () => [{ type: i1.GlobalMenuService }, { type: i2.MatDialog }], propDecorators: { showCloseButton: [{
                type: Input
            }], closeAction: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xvYmFsLW1lbnUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvc2lpLXRvb2xraXQvc3JjL2xpYi9jb21wb25lbnRzL21lbnUvZ2xvYmFsLW1lbnUvZ2xvYmFsLW1lbnUuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvc2lpLXRvb2xraXQvc3JjL2xpYi9jb21wb25lbnRzL21lbnUvZ2xvYmFsLW1lbnUvZ2xvYmFsLW1lbnUuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxNQUFNLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBeUMsTUFBTSxlQUFlLENBQUM7QUFFdEgsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBS3pELE9BQU8sRUFBRSwrQkFBK0IsRUFBRSxNQUFNLDBFQUEwRSxDQUFDO0FBQzNILE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLHdDQUF3QyxDQUFDO0FBQ3BGLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUM1QyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDdkQsT0FBTyxFQUFFLGNBQWMsRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDOUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDakUsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sNERBQTRELENBQUM7QUFDMUcsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ2pELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM3QyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDbkQsT0FBTyxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUN2RSxPQUFPLEVBQUUsMkJBQTJCLEVBQUUsTUFBTSx1RkFBdUYsQ0FBQztBQUNwSSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSwwREFBMEQsQ0FBQztBQUNoRyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUNuRSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSwrQ0FBK0MsQ0FBQzs7Ozs7QUFTMUYsTUFBTSxPQUFPLG1CQUFtQjtJQUs5QixJQUFJLEtBQUs7UUFDUCxPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7SUFDckMsQ0FBQztJQUNELElBQUksT0FBTztRQUNULE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUM7SUFDdEQsQ0FBQztJQUlELFlBQW9CLGlCQUFvQyxFQUFTLFNBQW9CO1FBQWpFLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBbUI7UUFBUyxjQUFTLEdBQVQsU0FBUyxDQUFXO1FBYjVFLG9CQUFlLEdBQUcsSUFBSSxDQUFDO1FBQ3RCLGdCQUFXLEdBQUcsSUFBSSxZQUFZLEVBQVEsQ0FBQztRQUN6QyxnQkFBVyxHQUFHLElBQUksY0FBYyxFQUFFLENBQUM7UUFDM0MsaUJBQVksR0FBRyxFQUFFLENBQUM7UUFXaEIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQ25DLENBQUM7SUFHRixLQUFLO1FBQ0gsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUMxQixDQUFDO0lBS0QsYUFBYSxDQUFDLEtBQW1CLEVBQUUsZ0JBQWdCLEdBQUUsS0FBSztRQUN4RCxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUEsaUVBQWlFO1lBQ3JGLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ3ZELENBQUM7YUFBTSxJQUFJLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEtBQUssSUFBSSxJQUFJLElBQUksQ0FBQyxPQUFPLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUN4RixJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsZ0JBQWdCLEVBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNFLENBQUM7YUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRyxDQUFDO1lBQzFCLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLCtCQUErQixFQUFFO2dCQUNuRCxRQUFRLEVBQUUsTUFBTTtnQkFDaEIsSUFBSSxFQUFFO29CQUNGLFNBQVMsRUFBRSxLQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUN2RixLQUFLLEVBQUUsS0FBSyxDQUFDLEtBQUs7aUJBQUU7YUFDdkIsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFO2dCQUM3QyxJQUFJLGlCQUFpQixFQUFFLENBQUM7b0JBQ3BCLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxnQkFBZ0IsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO2dCQUMxRSxDQUFDO1lBQ0gsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO2FBQU0sQ0FBQztZQUNKLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDckUsQ0FBQztJQUNILENBQUM7SUFHRCxLQUFLO1FBQ0gsSUFBSSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUM7SUFDekIsQ0FBQzsrR0FsRFUsbUJBQW1CO21HQUFuQixtQkFBbUIsb0tDaENoQyxnaUpBNEZBLHk2RUQ5RGMseUJBQXlCLCtOQUFFLGdCQUFnQixzTkFBRSxvQkFBb0IsMEdBQUUsMkJBQTJCLHVLQUFFLFlBQVksNExBQUUsUUFBUSxnVUFBRSxXQUFXLCttQkFBRSxPQUFPLDJJQUFFLFNBQVMscUhBQUUsNEJBQTRCLGtFQUFFLFVBQVUsbUZBQUUsV0FBVyxxSkFBRSxhQUFhLDZGQUFFLGNBQWMscVNBQUUsT0FBTywyUUFBRSxXQUFXLHNJQUFFLFVBQVUsNFFBQUUsU0FBUyx5Q0FBRSxvQkFBb0Isb0RBQUUsMEJBQTBCOzs0RkFFN1UsbUJBQW1CO2tCQVAvQixTQUFTOytCQUNJLGlCQUFpQixjQUdmLElBQUksV0FDUCxDQUFDLHlCQUF5QixFQUFFLGdCQUFnQixFQUFFLG9CQUFvQixFQUFFLDJCQUEyQixFQUFFLFlBQVksRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsNEJBQTRCLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxhQUFhLEVBQUUsY0FBYyxFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxvQkFBb0IsRUFBRSwwQkFBMEIsQ0FBQzs4R0FHaFYsZUFBZTtzQkFBdkIsS0FBSztnQkFDSSxXQUFXO3NCQUFwQixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgSG9zdEJpbmRpbmcsIE9uQ2hhbmdlcywgU2ltcGxlQ2hhbmdlcyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBTaWlNZW51Vm9pY2UgfSBmcm9tICcuL2R0by9tZW51LXZvaWNlJztcclxuaW1wb3J0IHsgU0lJTGlua01hbmFnZXIgfSBmcm9tICcuLi91dGlscy9TaWlMaW5rTWFuYWdlcic7XHJcbmltcG9ydCB7IEdsb2JhbE1lbnVTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlL2dsb2JhbC1tZW51LnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBTaWlNZW51Rm9sZGVyIH0gZnJvbSAnLi9kdG8vbWVudS1mb2xkZXInO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBCZWhhdmlvclN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgTWF0RGlhbG9nIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvZGlhbG9nJztcclxuaW1wb3J0IHsgQ29tcGFueVNlbGVjdGlvbkRpYWxvZ0NvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9jb21wYW55LXNlbGVjdGlvbi1kaWFsb2cvY29tcGFueS1zZWxlY3Rpb24tZGlhbG9nLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEdsb2JhbE1lbnVWb2ljZXNGaWx0ZXJQaXBlIH0gZnJvbSAnLi91dGlscy9nbG9iYWwtbWVudS12b2ljZXMtZmlsdGVyLnBpcGUnO1xyXG5pbXBvcnQgeyBHbG9iYWxNZW51RmlsdGVyUGlwZSB9IGZyb20gJy4vdXRpbHMvZ2xvYmFsLW1lbnUtZmlsdGVyLnBpcGUnO1xyXG5pbXBvcnQgeyBBc3luY1BpcGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQgeyBNYXRUb29sdGlwIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvdG9vbHRpcCc7XHJcbmltcG9ydCB7IE1hdE1lbnVUcmlnZ2VyLCBNYXRNZW51LCBNYXRNZW51SXRlbSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL21lbnUnO1xyXG5pbXBvcnQgeyBNYXRJY29uQnV0dG9uIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvYnV0dG9uJztcclxuaW1wb3J0IHsgTWF0TmF2TGlzdCwgTWF0TGlzdEl0ZW0gfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9saXN0JztcclxuaW1wb3J0IHsgU2lpQ29tcGFueVNlbGVjdGlvbkNvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9jb21wYW55LXNlbGVjdGlvbi9jb21wYW55LXNlbGVjdGlvbi5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBNYXRJY29uIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvaWNvbic7XHJcbmltcG9ydCB7IEZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBNYXRJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2lucHV0JztcclxuaW1wb3J0IHsgTWF0Rm9ybUZpZWxkLCBNYXRTdWZmaXggfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9mb3JtLWZpZWxkJztcclxuaW1wb3J0IHsgUGFnZUNvbnRlbnRUb29sYmFyQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vcGFnZS1jb250YWluZXIvcGFnZS1jb250ZW50L3BhZ2UtY29udGVudC10b29sYmFyL3BhZ2UtY29udGVudC10b29sYmFyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFBhZ2VDb250ZW50Q29tcG9uZW50IH0gZnJvbSAnLi4vLi4vcGFnZS1jb250YWluZXIvcGFnZS1jb250ZW50L3BhZ2UtY29udGVudC5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBUb29sYmFyQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vdG9vbGJhci90b29sYmFyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFNpaVBhZ2VDb250YWluZXJDb21wb25lbnQgfSBmcm9tICcuLi8uLi9wYWdlLWNvbnRhaW5lci9wYWdlLWNvbnRhaW5lci5jb21wb25lbnQnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ3NpaS1nbG9iYWwtbWVudScsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vZ2xvYmFsLW1lbnUuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vZ2xvYmFsLW1lbnUuY29tcG9uZW50LmNzcyddLFxyXG4gICAgc3RhbmRhbG9uZTogdHJ1ZSxcclxuICAgIGltcG9ydHM6IFtTaWlQYWdlQ29udGFpbmVyQ29tcG9uZW50LCBUb29sYmFyQ29tcG9uZW50LCBQYWdlQ29udGVudENvbXBvbmVudCwgUGFnZUNvbnRlbnRUb29sYmFyQ29tcG9uZW50LCBNYXRGb3JtRmllbGQsIE1hdElucHV0LCBGb3Jtc01vZHVsZSwgTWF0SWNvbiwgTWF0U3VmZml4LCBTaWlDb21wYW55U2VsZWN0aW9uQ29tcG9uZW50LCBNYXROYXZMaXN0LCBNYXRMaXN0SXRlbSwgTWF0SWNvbkJ1dHRvbiwgTWF0TWVudVRyaWdnZXIsIE1hdE1lbnUsIE1hdE1lbnVJdGVtLCBNYXRUb29sdGlwLCBBc3luY1BpcGUsIEdsb2JhbE1lbnVGaWx0ZXJQaXBlLCBHbG9iYWxNZW51Vm9pY2VzRmlsdGVyUGlwZV1cclxufSlcclxuZXhwb3J0IGNsYXNzIEdsb2JhbE1lbnVDb21wb25lbnQge1xyXG4gIEBJbnB1dCgpIHNob3dDbG9zZUJ1dHRvbiA9IHRydWU7XHJcbiAgQE91dHB1dCgpIGNsb3NlQWN0aW9uID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xyXG4gIHByaXZhdGUgbGlua01hbmFnZXIgPSBuZXcgU0lJTGlua01hbmFnZXIoKTtcclxuICBzZWFyY2hGaWx0ZXIgPSAnJztcclxuICBnZXQgbWVudXMoKTogQmVoYXZpb3JTdWJqZWN0PFNpaU1lbnVGb2xkZXJbXT57XHJcbiAgICByZXR1cm4gdGhpcy5nbG9iYWxNZW51U2VydmljZS5tZW51O1xyXG4gIH1cclxuICBnZXQgY29tcGFueSgpOiBzdHJpbmd7XHJcbiAgICByZXR1cm4gdGhpcy5nbG9iYWxNZW51U2VydmljZS5zZWxlY3RlZENvbXBhbnkudmFsdWU7XHJcbiAgfVxyXG5cclxuXHJcblxyXG4gIGNvbnN0cnVjdG9yKCBwdWJsaWMgZ2xvYmFsTWVudVNlcnZpY2U6IEdsb2JhbE1lbnVTZXJ2aWNlLCBwdWJsaWMgbWF0RGlhbG9nOiBNYXREaWFsb2cgKSB7XHJcbiAgICB0aGlzLmdsb2JhbE1lbnVTZXJ2aWNlLmluaXRNZW51KCk7XHJcbiAgIH1cclxuXHJcblxyXG4gIGNsb3NlKCl7XHJcbiAgICB0aGlzLmNsb3NlQWN0aW9uLm5leHQoKTtcclxuICB9XHJcblxyXG5cclxuXHJcblxyXG4gIG9uTGlua0NsaWNrZWQodm9pY2U6IFNpaU1lbnVWb2ljZSwgb3BlbkluVGhpc1dpbmRvdz0gZmFsc2UpIHtcclxuICAgIGlmICghdm9pY2UuY29tcGFueURlcCkgey8vIGlmIHRoZXJlIGlzIG5vIHJlYXNvbiB0byBjaG9vc2UgdGhlIGNvbXBhbnkgdGhlIGxpbmsgcmVmZXJzIHRvXHJcbiAgICAgICAgdGhpcy5saW5rTWFuYWdlci5vcGVuTGluayh2b2ljZSwgb3BlbkluVGhpc1dpbmRvdyk7XHJcbiAgICB9IGVsc2UgaWYgKHZvaWNlLmNvbXBhbmllcy5sZW5ndGggPT09IDEgJiYgKHRoaXMuY29tcGFueSA9PT0gbnVsbCB8fCB0aGlzLmNvbXBhbnkgPT09ICcnKSkge1xyXG4gICAgICAgIHRoaXMubGlua01hbmFnZXIub3Blbkxpbmsodm9pY2UsIG9wZW5JblRoaXNXaW5kb3csIHZvaWNlLmNvbXBhbmllc1swXSk7XHJcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmNvbXBhbnkgKSB7XHJcbiAgICAgIHRoaXMubWF0RGlhbG9nLm9wZW4oQ29tcGFueVNlbGVjdGlvbkRpYWxvZ0NvbXBvbmVudCwge1xyXG4gICAgICAgIG1heFdpZHRoOiAnOTV2dycsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICBjb21wYW5pZXM6IHZvaWNlLmNvbXBhbmllcy5tYXAoYyA9PiB0aGlzLmdsb2JhbE1lbnVTZXJ2aWNlLm1lbnVVc2VySW5mby5jb21wYW5pZXNbY10pLFxyXG4gICAgICAgICAgdGl0bGU6IHZvaWNlLnRpdGxlIH0sXHJcbiAgICAgIH0pLmFmdGVyQ2xvc2VkKCkuc3Vic2NyaWJlKGNvbXBhbnlJZFNlbGVjdGVkID0+IHtcclxuICAgICAgICBpZiAoY29tcGFueUlkU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5saW5rTWFuYWdlci5vcGVuTGluayh2b2ljZSwgb3BlbkluVGhpc1dpbmRvdywgY29tcGFueUlkU2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubGlua01hbmFnZXIub3Blbkxpbmsodm9pY2UsIG9wZW5JblRoaXNXaW5kb3csIHRoaXMuY29tcGFueSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgcmVzZXQoKXtcclxuICAgIHRoaXMuc2VhcmNoRmlsdGVyID0gJyc7XHJcbiAgfVxyXG5cclxuXHJcbn1cclxuIiwiPHNpaS1wYWdlLWNvbnRhaW5lcj5cclxuICA8c2lpLXRvb2xiYXIgdG9vbGJhclRpdGxlPVwiU0lBTFwiICBbc2hvd0Nsb3NlQnV0dG9uXT1cInNob3dDbG9zZUJ1dHRvblwiIChjbG9zZUFjdGlvbik9XCJjbG9zZSgpXCI+PC9zaWktdG9vbGJhcj5cclxuICA8c2lpLXBhZ2UtY29udGVudCBbYm9keVN0eWxlXT1cIidwYWRkaW5nOjBweCdcIiBib2R5Q2xhc3M9XCJnbG9iYWxNZW51Qm9keVwiPlxyXG4gICAgPHNpaS1wYWdlLWNvbnRlbnQtdG9vbGJhcj5cclxuICAgICAgPGRpdiBjbGFzcz1cInBhZ2UtY29udGVudC10b29sYmFyLWJvZHlcIj5cclxuICAgICAgICA8bWF0LWZvcm0tZmllbGQgY2xhc3M9XCJtZW51X2ZpbHRlclwiIGFwcGVhcmFuY2U9XCJvdXRsaW5lXCI+XHJcbiAgICAgICAgICA8aW5wdXQgI3NlYXJjaEJveCAgWyhuZ01vZGVsKV09XCJzZWFyY2hGaWx0ZXJcIiBtYXRJbnB1dCBwbGFjZWhvbGRlcj1cIlNlYXJjaCBvbiBtZW51XCI+XHJcbiAgICAgICAgICBAaWYgKCFzZWFyY2hCb3gudmFsdWUpIHtcclxuICAgICAgICAgICAgPG1hdC1pY29uIG1hdFN1ZmZpeD5zZWFyY2g8L21hdC1pY29uPlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgQGlmIChzZWFyY2hCb3gudmFsdWUpIHtcclxuICAgICAgICAgICAgPG1hdC1pY29uIG1hdFN1ZmZpeCAgIGFyaWEtbGFiZWw9XCJDbGVhclwiIChjbGljayk9XCJyZXNldCgpXCIgc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXI7XCI+Y2xvc2U8L21hdC1pY29uPlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIDwvbWF0LWZvcm0tZmllbGQ+XHJcblxyXG4gICAgICAgIDxzcGFuIFtzdHlsZS5mbGV4XT1cIjFcIj48L3NwYW4+XHJcbiAgICAgICAgPHNpaS1jb21wYW55LXNlbGVjdGlvbj48L3NpaS1jb21wYW55LXNlbGVjdGlvbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L3NpaS1wYWdlLWNvbnRlbnQtdG9vbGJhcj5cclxuICAgIDxzaWktY29tcGFueS1zZWxlY3Rpb24gY2xhc3M9XCJib2R5Q29tcGFueVNlbGVjdGlvblwiPjwvc2lpLWNvbXBhbnktc2VsZWN0aW9uPlxyXG5cclxuXHJcbiAgICA8ZGl2IGNsYXNzPVwibWFzb25yeS13cmFwcGVyXCIgID5cclxuICAgICAgPGRpdiBjbGFzcz1cIm1hc29ucnlcIj5cclxuXHJcbiAgICAgICAgPCEtLSBQUkVGRVJJVEkgLS0+XHJcbiAgICAgICAgPCEtLSAqbmdJZj1cIihnbG9iYWxNZW51U2VydmljZS5mYXZvcml0ZVZvaWNlcyB8IGFzeW5jKT8ubGVuZ3RoPjBcIiAtLT5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwibWFzb25yeS1pdGVtIHByZWZlcml0aS1tZW51XCIgPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNhdGVnb3J5LXRpdGxlXCI+XHJcbiAgICAgICAgICAgIDxtYXQtaWNvbj5zdGFyPC9tYXQtaWNvbj5cclxuICAgICAgICAgICAgPHNwYW4+UHJlZmVyaXRpPC9zcGFuPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8bWF0LW5hdi1saXN0IGRlbnNlIGRpc2FibGVSaXBwbGU9XCJ0cnVlXCI+XHJcbiAgICAgICAgICAgIEBmb3IgKGZhdlZvaWNlIG9mIGdsb2JhbE1lbnVTZXJ2aWNlLmZhdm9yaXRlVm9pY2UgfCBhc3luYyB8IGdsb2JhbE1lbnVWb2ljZXNGaWx0ZXI6Y29tcGFueTpzZWFyY2hGaWx0ZXIgOyB0cmFjayBmYXZWb2ljZTsgbGV0IGkgPSAkaW5kZXgpIHtcclxuICAgICAgICAgICAgICA8IS0tICpuZ0lmPVwiZ2xvYmFsTWVudVNlcnZpY2UuaXNFbmFibGVkRm9yQ3VycmVudFNlbGVjdGVkQ29tcGFueShmYXZWb2ljZSxjb21wYW55KVwiICAtLT5cclxuICAgICAgICAgICAgICA8bWF0LWxpc3QtaXRlbSAgKGNsaWNrKT1cIm9uTGlua0NsaWNrZWQoZmF2Vm9pY2UpXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWVudS12b2ljZVwiICA+IHt7ZmF2Vm9pY2UudGl0bGV9fSA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gbWF0LWljb24tYnV0dG9uIGNsYXNzPVwic3VibWVudVwiIFttYXRNZW51VHJpZ2dlckZvcl09XCJzdWJtZW51XCIgKGNsaWNrKT1cIiRldmVudC5zdG9wUHJvcGFnYXRpb24oKVwiPlxyXG4gICAgICAgICAgICAgICAgICA8bWF0LWljb24+bW9yZV92ZXJ0PC9tYXQtaWNvbj5cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPG1hdC1tZW51ICNzdWJtZW51PVwibWF0TWVudVwiPlxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIG1hdC1tZW51LWl0ZW0gKGNsaWNrKT1cImdsb2JhbE1lbnVTZXJ2aWNlLnJlbW92ZUZyb21GYXZvcml0ZXMoZmF2Vm9pY2UsIGkpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPG1hdC1pY29uPnN0YXJfYm9yZGVyPC9tYXQtaWNvbj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvbnQxMlwiIGkxOG49XCJAQHJlbW92ZUZhdm9yaXRlc1wiPlJlbW92ZSBmcm9tIGZhdm9yaXRlczwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgIDxidXR0b24gbWF0LW1lbnUtaXRlbSAgKGNsaWNrKT1cIm9uTGlua0NsaWNrZWQoZmF2Vm9pY2UsdHJ1ZSlcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bWF0LWljb24+bGF1bmNoPC9tYXQtaWNvbj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvbnQxMlwiIGkxOG49XCJAQG9wZW5UaGlzV2luZG93XCI+T3BlbiBpbiB0aGlzIHdpbmRvdzwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L21hdC1tZW51PlxyXG4gICAgICAgICAgICAgIDwvbWF0LWxpc3QtaXRlbT5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIDwvbWF0LW5hdi1saXN0PlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuXHJcbiAgICAgICAgQGZvciAobWVudSBvZiAobWVudXMgfCBhc3luYykgfCBnbG9iYWxNZW51RmlsdGVyOmNvbXBhbnk6c2VhcmNoRmlsdGVyOyB0cmFjayBtZW51KSB7XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibWFzb25yeS1pdGVtXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXRlZ29yeS10aXRsZVwiPlxyXG4gICAgICAgICAgICAgIDxtYXQtaWNvbiBbc3ZnSWNvbl09XCJtZW51Lmljb25cIj48L21hdC1pY29uPlxyXG4gICAgICAgICAgICAgIDxzcGFuPnt7bWVudS5jYXRlZ29yeX19PC9zcGFuPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPG1hdC1uYXYtbGlzdCBkZW5zZSBkaXNhYmxlUmlwcGxlPVwidHJ1ZVwiPlxyXG4gICAgICAgICAgICAgIEBmb3IgKHZvaWNlIG9mIG1lbnUudm9pY2VzICA7IHRyYWNrIHZvaWNlKSB7XHJcbiAgICAgICAgICAgICAgICA8bWF0LWxpc3QtaXRlbSAgIChjbGljayk9XCJvbkxpbmtDbGlja2VkKHZvaWNlKVwiID5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1lbnUtdm9pY2VcIj4ge3t2b2ljZS50aXRsZX19IDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIG1hdC1pY29uLWJ1dHRvbiBjbGFzcz1cInN1Ym1lbnVcIiBbbWF0TWVudVRyaWdnZXJGb3JdPVwic3VibWVudVwiIChjbGljayk9XCIkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bWF0LWljb24gaTE4bi1tYXRUb29sdGlwPVwiQEBvcGVuU3VibWVudVwiIG1hdFRvb2x0aXA9XCJPcGVuIFN1Ym1lbnVcIj5tb3JlX3ZlcnQ8L21hdC1pY29uPlxyXG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgPG1hdC1tZW51ICNzdWJtZW51PVwibWF0TWVudVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gbWF0LW1lbnUtaXRlbSBbZGlzYWJsZWRdPVwiZ2xvYmFsTWVudVNlcnZpY2UuaXNJbkZhdm9yaXRlcyh2b2ljZSlcIiAgKGNsaWNrKT1cImdsb2JhbE1lbnVTZXJ2aWNlLmFkZFRvRmF2b3JpdGVzKHZvaWNlKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPG1hdC1pY29uPnN0YXJfYm9yZGVyPC9tYXQtaWNvbj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm9udDEyXCIgaTE4bj1cIkBAYWRkRmF2b3JpdGVzXCI+QWRkIHRvIGZhdm9yaXRlczwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG1hdC1tZW51LWl0ZW0gIChjbGljayk9XCJvbkxpbmtDbGlja2VkKHZvaWNlLHRydWUpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8bWF0LWljb24+bGF1bmNoPC9tYXQtaWNvbj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm9udDEyXCIgaTE4bj1cIkBAb3BlblRoaXNXaW5kb3dcIj5PcGVuIGluIHRoaXMgd2luZG93PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICA8L21hdC1tZW51PlxyXG4gICAgICAgICAgICAgICAgPC9tYXQtbGlzdC1pdGVtPlxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgPC9tYXQtbmF2LWxpc3Q+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICB9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcblxyXG5cclxuXHJcbiAgPC9zaWktcGFnZS1jb250ZW50PlxyXG48L3NpaS1wYWdlLWNvbnRhaW5lcj5cclxuIl19